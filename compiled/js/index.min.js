(function(){
/*
 jQuery v1.11.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var g=a.length,e=0;e<g;e++){var d=a[e];if(b.call(c,d,e,a))return{i:e,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,g){if(b){c=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var e=a[g];e in c||(c[e]={});c=c[e]}a=a[a.length-1];g=c[a];b=b(g);b!=g&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,k=h.type(a);return"function"===k||h.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===k||0===b||"number"==typeof b&&0<b&&b-1 in a}function g(a,b,c){if(h.isFunction(b))return h.grep(a,function(a,k){return!!b.call(a,k,
a)!==c});if(b.nodeType)return h.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Cb.test(b))return h.filter(b,a,c);b=h.filter(b,a)}return h.grep(a,function(a){return 0<=h.inArray(a,b)!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function d(a){var b=db[a]={};return h.each(a.match(la)||[],function(a,k){b[k]=!0}),b}function f(){B.addEventListener?(B.removeEventListener("DOMContentLoaded",l,!1),a.removeEventListener("load",l,!1)):(B.detachEvent("onreadystatechange",
l),a.detachEvent("onload",l))}function l(){(B.addEventListener||"load"===event.type||"complete"===B.readyState)&&(f(),h.ready())}function m(a,b,c){if(void 0===c&&1===a.nodeType){var k="data-"+b.replace(Db,"-$1").toLowerCase();if(c=a.getAttribute(k),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Eb.test(c)?h.parseJSON(c):c}catch(H){}h.data(a,b,c)}else c=void 0}return c}function n(a){for(var b in a)if(("data"!==b||!h.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}
function r(a,b,c,d){if(h.acceptData(a)){var k,p,e=h.expando,f=a.nodeType,w=f?h.cache:a,g=f?a[e]:a[e]&&e;if(g&&w[g]&&(d||w[g].data)||void 0!==c||"string"!=typeof b)return g||(g=f?a[e]=ka.pop()||h.guid++:e),w[g]||(w[g]=f?{}:{toJSON:h.noop}),("object"==typeof b||"function"==typeof b)&&(d?w[g]=h.extend(w[g],b):w[g].data=h.extend(w[g].data,b)),p=w[g],d||(p.data||(p.data={}),p=p.data),void 0!==c&&(p[h.camelCase(b)]=c),"string"==typeof b?(k=p[b],null==k&&(k=p[h.camelCase(b)])):k=p,k}}function t(a,b,c){if(h.acceptData(a)){var k,
p,d=a.nodeType,e=d?h.cache:a,f=d?a[h.expando]:h.expando;if(e[f]){if(b&&(k=c?e[f]:e[f].data)){h.isArray(b)?b=b.concat(h.map(b,h.camelCase)):b in k?b=[b]:(b=h.camelCase(b),b=b in k?[b]:b.split(" "));for(p=b.length;p--;)delete k[b[p]];if(c?!n(k):!h.isEmptyObject(k))return}(c||(delete e[f].data,n(e[f])))&&(d?h.cleanData([a],!0):u.deleteExpando||e!=e.window?delete e[f]:e[f]=null)}}}function v(){return!0}function y(){return!1}function P(){try{return B.activeElement}catch(k){}}function x(a){var b=eb.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function J(a,b){var k,c,p=0,d="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!d)for(d=[],k=a.childNodes||a;null!=(c=k[p]);p++)!b||h.nodeName(c,b)?d.push(c):h.merge(d,J(c,b));return void 0===b||b&&h.nodeName(a,b)?h.merge([a],d):d}function da(a){Ta.test(a.type)&&(a.defaultChecked=a.checked)}function O(a,
b){return h.nodeName(a,"table")&&h.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function q(a){return a.type=(null!==h.find.attr(a,"type"))+"/"+a.type,a}function R(a){var b=Fb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function A(a,b){for(var k,c=0;null!=(k=a[c]);c++)h._data(k,"globalEval",!b||h._data(b[c],"globalEval"))}function z(a,b){if(1===b.nodeType&&h.hasData(a)){var k,c;var p=h._data(a);
a=h._data(b,p);var d=p.events;if(d)for(k in delete a.handle,a.events={},d)for(p=0,c=d[k].length;c>p;p++)h.event.add(b,k,d[k][p]);a.data&&(a.data=h.extend({},a.data))}}function F(b,c){var k;b=h(c.createElement(b)).appendTo(c.body);c=a.getDefaultComputedStyle&&(k=a.getDefaultComputedStyle(b[0]))?k.display:h.css(b[0],"display");return b.detach(),c}function D(a){var b=B,k=fb[a];return k||(k=F(a,b),"none"!==k&&k||(Ca=(Ca||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),
b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),k=F(a,b),Ca.detach()),fb[a]=k),k}function C(a,b){return{get:function(){var k=a();if(null!=k)return k?void delete this.get:(this.get=b).apply(this,arguments)}}}function ha(a,b){if(b in a)return b;for(var k=b.charAt(0).toUpperCase()+b.slice(1),c=b,p=gb.length;p--;)if(b=gb[p]+k,b in a)return b;return c}function S(a,b){for(var k,c,p,d=[],e=0,f=a.length;f>e;e++)c=a[e],c.style&&(d[e]=h._data(c,"olddisplay"),k=c.style.display,b?
(d[e]||"none"!==k||(c.style.display=""),""===c.style.display&&Da(c)&&(d[e]=h._data(c,"olddisplay",D(c.nodeName)))):(p=Da(c),(k&&"none"!==k||!p)&&h._data(c,"olddisplay",p?k:h.css(c,"display"))));for(e=0;f>e;e++)c=a[e],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?d[e]||"":"none"));return a}function X(a,b,c){return(a=Gb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function G(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var k=0;4>b;b+=2)"margin"===
c&&(k+=h.css(a,c+pa[b],!0,e)),d?("content"===c&&(k-=h.css(a,"padding"+pa[b],!0,e)),"margin"!==c&&(k-=h.css(a,"border"+pa[b]+"Width",!0,e))):(k+=h.css(a,"padding"+pa[b],!0,e),"padding"!==c&&(k+=h.css(a,"border"+pa[b]+"Width",!0,e)));return k}function U(a,b,c){var k=!0,d="width"===b?a.offsetWidth:a.offsetHeight,p=qa(a),e=u.boxSizing&&"border-box"===h.css(a,"boxSizing",!1,p);if(0>=d||null==d){if(d=ia(a,b,p),(0>d||null==d)&&(d=a.style[b]),Ha.test(d))return d;k=e&&(u.boxSizingReliable()||d===a.style[b]);
d=parseFloat(d)||0}return d+G(a,b,c||(e?"border":"content"),k,p)+"px"}function T(a,b,c,d,e){return new T.prototype.init(a,b,c,d,e)}function K(){return setTimeout(function(){ta=void 0}),ta=h.now()}function L(a,b){var k={height:a},c=0;for(b=b?1:0;4>c;c+=2-b){var d=pa[c];k["margin"+d]=k["padding"+d]=a}return b&&(k.opacity=k.width=a),k}function aa(a,b,c){for(var k,d=(Ea[b]||[]).concat(Ea["*"]),p=0,e=d.length;e>p;p++)if(k=d[p].call(c,b,a))return k}function E(a,b){var k,c,d,p,e;for(k in a)if(c=h.camelCase(k),
d=b[c],p=a[k],h.isArray(p)&&(d=p[1],p=a[k]=p[0]),k!==c&&(a[c]=p,delete a[k]),e=h.cssHooks[c],e&&"expand"in e)for(k in p=e.expand(p),delete a[c],p)k in a||(a[k]=p[k],b[k]=d);else b[c]=d}function Z(a,b,c){var k,d=0,p=Ia.length,e=h.Deferred().always(function(){delete f.elem}),f=function(){if(k)return!1;var b=ta||K();b=Math.max(0,g.startTime+g.duration-b);for(var c=1-(b/g.duration||0),d=0,p=g.tweens.length;p>d;d++)g.tweens[d].run(c);return e.notifyWith(a,[g,c,b]),1>c&&p?b:(e.resolveWith(a,[g]),!1)},g=
e.promise({elem:a,props:h.extend({},b),opts:h.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:ta||K(),duration:c.duration,tweens:[],createTween:function(b,k){b=h.Tween(a,g.opts,b,k,g.opts.specialEasing[b]||g.opts.easing);return g.tweens.push(b),b},stop:function(b){var c=0,d=b?g.tweens.length:0;if(k)return this;for(k=!0;d>c;c++)g.tweens[c].run(1);return b?e.resolveWith(a,[g,b]):e.rejectWith(a,[g,b]),this}});c=g.props;for(E(c,g.opts.specialEasing);p>d;d++)if(b=Ia[d].call(g,
a,c,g.opts))return b;return h.map(c,aa,g),h.isFunction(g.opts.start)&&g.opts.start.call(a,g),h.fx.timer(h.extend(f,{elem:a,anim:g,queue:g.opts.queue})),g.progress(g.opts.progress).done(g.opts.done,g.opts.complete).fail(g.opts.fail).always(g.opts.always)}function N(a){return function(b,k){"string"!=typeof b&&(k=b,b="*");var c=0,d=b.toLowerCase().match(la)||[];if(h.isFunction(k))for(;b=d[c++];)"+"===b.charAt(0)?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(k)):(a[b]=a[b]||[]).push(k)}}function Y(a,b,c,
d){function k(f){var g;return p[f]=!0,h.each(a[f]||[],function(a,f){a=f(b,c,d);return"string"!=typeof a||e||p[a]?e?!(g=a):void 0:(b.dataTypes.unshift(a),k(a),!1)}),g}var p={},e=a===Ua;return k(b.dataTypes[0])||!p["*"]&&k("*")}function ea(a,b){var k,c,d=h.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((d[c]?a:k||(k={}))[c]=b[c]);return k&&h.extend(!0,a,k),a}function V(a,b,c,d){var k;if(h.isArray(b))h.each(b,function(b,k){c||Ib.test(a)?d(a,k):V(a+"["+("object"==typeof k?b:"")+"]",k,c,d)});
else if(c||"object"!==h.type(b))d(a,b);else for(k in b)V(a+"["+k+"]",b[k],c,d)}function Ja(){try{return new a.XMLHttpRequest}catch(k){}}function ma(a){return h.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var ka=[],ba=ka.slice,Ka=ka.concat,Fa=ka.push,La=ka.indexOf,xa={},Ga=xa.toString,ua=xa.hasOwnProperty,u={},h=function(a,b){return new h.fn.init(a,b)},Jb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Kb=/^-ms-/,Lb=/-([\da-z])/gi,Mb=function(a,b){return b.toUpperCase()};h.fn=h.prototype={jquery:"1.11.1",
constructor:h,selector:"",length:0,toArray:function(){return ba.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:ba.call(this)},pushStack:function(a){a=h.merge(this.constructor(),a);return a.prevObject=this,a.context=this.context,a},each:function(a,b){return h.each(this,a,b)},map:function(a){return this.pushStack(h.map(this,function(b,k){return a.call(b,k,b)}))},slice:function(){return this.pushStack(ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&b>a?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Fa,sort:ka.sort,splice:ka.splice};h.extend=h.fn.extend=function(){var a,b,c,d,e=arguments[0]||{},f=1,g=arguments.length,l=!1;"boolean"==typeof e&&(l=e,e=arguments[f]||{},f++);"object"==typeof e||h.isFunction(e)||(e={});for(f===g&&(e=this,f--);g>f;f++)if(null!=(c=arguments[f]))for(b in c){var m=e[b];var n=c[b];e!==n&&(l&&n&&(h.isPlainObject(n)||
(a=h.isArray(n)))?(a?(a=!1,d=m&&h.isArray(m)?m:[]):d=m&&h.isPlainObject(m)?m:{},e[b]=h.extend(l,d,n)):void 0!==n&&(e[b]=n))}return e};h.extend({expando:"jQuery"+("1.11.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===h.type(a)},isArray:Array.isArray||function(a){return"array"===h.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!h.isArray(a)&&0<=a-parseFloat(a)},isEmptyObject:function(a){for(var b in a)return!1;
return!0},isPlainObject:function(a){var b;if(!a||"object"!==h.type(a)||a.nodeType||h.isWindow(a))return!1;try{if(a.constructor&&!ua.call(a,"constructor")&&!ua.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(w){return!1}if(u.ownLast)for(b in a)return ua.call(a,b);for(b in a);return void 0===b||ua.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?xa[Ga.call(a)]||"object":typeof a},globalEval:function(b){b&&h.trim(b)&&(a.execScript||function(b){a.eval.call(a,
b)})(b)},camelCase:function(a){return a.replace(Kb,"ms-").replace(Lb,Mb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var k,e=0,p=a.length,f=c(a);if(d)if(f)for(;p>e&&(k=b.apply(a[e],d),!1!==k);e++);else for(e in a){if(k=b.apply(a[e],d),!1===k)break}else if(f)for(;p>e&&(k=b.call(a[e],e,a[e]),!1!==k);e++);else for(e in a)if(k=b.call(a[e],e,a[e]),!1===k)break;return a},trim:function(a){return null==a?"":(a+"").replace(Jb,"")},makeArray:function(a,
b){b=b||[];return null!=a&&(c(Object(a))?h.merge(b,"string"==typeof a?[a]:a):Fa.call(b,a)),b},inArray:function(a,b,c){if(b){if(La)return La.call(b,a,c);var k=b.length;for(c=c?0>c?Math.max(0,k+c):c:0;k>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,k=0,d=a.length;c>k;)a[d++]=b[k++];if(c!==c)for(;void 0!==b[k];)a[d++]=b[k++];return a.length=d,a},grep:function(a,b,c){for(var k=[],d=0,e=a.length,f=!c;e>d;d++)c=!b(a[d],d),c!==f&&k.push(a[d]);return k},map:function(a,
b,d){var k=0,e=a.length,f=[];if(c(a))for(;e>k;k++){var p=b(a[k],k,d);null!=p&&f.push(p)}else for(k in a)p=b(a[k],k,d),null!=p&&f.push(p);return Ka.apply([],f)},guid:1,proxy:function(a,b){var c,k,d;return"string"==typeof b&&(d=a[b],b=a,a=d),h.isFunction(a)?(c=ba.call(arguments,2),k=function(){return a.apply(b||this,c.concat(ba.call(arguments)))},k.guid=a.guid=a.guid||h.guid++,k):void 0},now:function(){return+new Date},support:u});h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){xa["[object "+b+"]"]=b.toLowerCase()});var na=function(a){function b(a,b,c,k){var d,e,f,p,h;if((b?b.ownerDocument||b:ea)!==x&&za(b),b=b||x,c=c||[],!a||"string"!=typeof a)return c;if(1!==(p=b.nodeType)&&9!==p)return[];if(u&&!k){if(d=ra.exec(a))if(f=d[1])if(9===p){if(e=b.getElementById(f),!e||!e.parentNode)return c;if(e.id===f)return c.push(e),c}else{if(b.ownerDocument&&(e=b.ownerDocument.getElementById(f))&&G(b,e)&&e.id===f)return c.push(e),c}else{if(d[2])return U.apply(c,b.getElementsByTagName(a)),
c;if((f=d[3])&&W.getElementsByClassName&&b.getElementsByClassName)return U.apply(c,b.getElementsByClassName(f)),c}if(W.qsa&&(!S||!S.test(a))){if(e=d=V,f=b,h=9===p&&a,1===p&&"object"!==b.nodeName.toLowerCase()){p=na(a);(d=b.getAttribute("id"))?e=d.replace(sa,"\\$&"):b.setAttribute("id",e);e="[id='"+e+"'] ";for(f=p.length;f--;)p[f]=e+z(p[f]);f=oa.test(a)&&m(b.parentNode)||b;h=p.join(",")}if(h)try{return U.apply(c,f.querySelectorAll(h)),c}catch(yc){}finally{d||b.removeAttribute("id")}}}return P(a.replace(aa,
"$1"),b,c,k)}function c(){function a(c,k){return b.push(c+" ")>Q.cacheLength&&delete a[b.shift()],a[c+" "]=k}var b=[];return a}function k(a){return a[V]=!0,a}function d(a){var b=x.createElement("div");try{return!!a(b)}catch(wc){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){var c=a.split("|");for(a=a.length;a--;)Q.attrHandle[c[a]]=b}function f(a,b){var c=b&&a,k=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(k)return k;
if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function g(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return k(function(b){return b=+b,k(function(c,k){for(var d,e=a([],c.length,b),f=e.length;f--;)c[d=e[f]]&&(c[d]=!(k[d]=c[d]))})})}function m(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function n(){}function z(a){for(var b=
0,c=a.length,k="";c>b;b++)k+=a[b].value;return k}function F(a,b,c){var k=b.dir,d=c&&"parentNode"===k,e=E++;return b.first?function(b,c,e){for(;b=b[k];)if(1===b.nodeType||d)return a(b,c,e)}:function(b,c,f){var p,h,g=[B,e];if(f)for(;b=b[k];){if((1===b.nodeType||d)&&a(b,c,f))return!0}else for(;b=b[k];)if(1===b.nodeType||d){if(h=b[V]||(b[V]={}),(p=h[k])&&p[0]===B&&p[1]===e)return g[2]=p[2];if(h[k]=g,g[2]=a(b,c,f))return!0}}}function r(a){return 1<a.length?function(b,c,k){for(var d=a.length;d--;)if(!a[d](b,
c,k))return!1;return!0}:a[0]}function D(a,b,c,k,d){for(var e,f=[],p=0,h=a.length,g=null!=b;h>p;p++)(e=a[p])&&(!c||c(e,k,d))&&(f.push(e),g&&b.push(p));return f}function Z(a,c,d,e,f,p){return e&&!e[V]&&(e=Z(e)),f&&!f[V]&&(f=Z(f,p)),k(function(k,p,h,g){var l,w=[],I=[],m=p.length,H;if(!(H=k)){H=c||"*";for(var M=h.nodeType?[h]:h,n=[],ya=0,z=M.length;z>ya;ya++)b(H,M[ya],n);H=n}H=!a||!k&&c?H:D(H,w,a,h,g);M=d?f||(k?a:m||e)?[]:p:H;if(d&&d(H,M,h,g),e){var fa=D(M,I);e(fa,[],h,g);for(h=fa.length;h--;)(l=fa[h])&&
(M[I[h]]=!(H[I[h]]=l))}if(k){if(f||a){if(f){fa=[];for(h=M.length;h--;)(l=M[h])&&fa.push(H[h]=l);f(null,M=[],fa,g)}for(h=M.length;h--;)(l=M[h])&&-1<(fa=f?ba.call(k,l):w[h])&&(k[fa]=!(p[fa]=l))}}else M=D(M===p?M.splice(m,M.length):M),f?f(null,p,M,g):U.apply(p,M)})}function C(a){var b,c,k=a.length,d=Q.relative[a[0].type];var e=d||Q.relative[" "];for(var f=d?1:0,p=F(function(a){return a===b},e,!0),h=F(function(a){return-1<ba.call(b,a)},e,!0),g=[function(a,c,k){return!d&&(k||c!==v)||((b=c).nodeType?p(a,
c,k):h(a,c,k))}];k>f;f++)if(e=Q.relative[a[f].type])g=[F(r(g),e)];else{if(e=Q.filter[a[f].type].apply(null,a[f].matches),e[V]){for(c=++f;k>c&&!Q.relative[a[c].type];c++);return Z(1<f&&r(g),1<f&&z(a.slice(0,f-1).concat({value:" "===a[f-2].type?"*":""})).replace(aa,"$1"),e,c>f&&C(a.slice(f,c)),k>c&&C(a=a.slice(c)),k>c&&z(a))}g.push(e)}return r(g)}function t(a,c){var d=0<c.length,e=0<a.length,f=function(k,f,p,h,g){var l,w,I,m=0,H="0",M=k&&[],n=[],z=v,fa=k||e&&Q.find.TAG("*",g),ya=B+=null==z?1:Math.random()||
.1,F=fa.length;for(g&&(v=f!==x&&f);H!==F&&null!=(l=fa[H]);H++){if(e&&l){for(w=0;I=a[w++];)if(I(l,f,p)){h.push(l);break}g&&(B=ya)}d&&((l=!I&&l)&&m--,k&&M.push(l))}if(m+=H,d&&H!==m){for(w=0;I=c[w++];)I(M,n,f,p);if(k){if(0<m)for(;H--;)M[H]||n[H]||(n[H]=da.call(h));n=D(n)}U.apply(h,n);g&&!k&&0<n.length&&1<m+c.length&&b.uniqueSort(h)}return g&&(B=ya,v=z),M};return d?k(f):f}var q,N,P,v,A,y,x,Y,u,S,J,ha,G,V="sizzle"+-new Date,ea=a.document,B=0,E=0,X=c(),O=c(),L=c(),K=function(a,b){return a===b&&(y=!0),0},
Ja={}.hasOwnProperty,ma=[],da=ma.pop,R=ma.push,U=ma.push,T=ma.slice,ba=ma.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ka="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),xa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ka+"))|)[\\x20\\t\\r\\n\\f]*\\]",ca=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
xa+")*)|.*)\\)|)",aa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,La=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ua=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,la=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,Ka=new RegExp(ca),Fa=new RegExp("^"+ka+"$"),ja={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+xa),PSEUDO:new RegExp("^"+ca),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ia=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oa=/[+~]/,sa=/'|\\/g,va=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,wa=function(a,b,c){a="0x"+b-65536;
return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)};try{U.apply(ma=T.call(ea.childNodes),ea.childNodes),ma[ea.childNodes.length].nodeType}catch(ya){U={apply:ma.length?function(a,b){R.apply(a,T.call(b))}:function(a,b){for(var c=a.length,k=0;a[c++]=b[k++];);a.length=c-1}}}var W=b.support={};var ta=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};var za=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:ea;
a=c.defaultView;return c!==x&&9===c.nodeType&&c.documentElement?(x=c,Y=c.documentElement,u=!ta(c),a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){za()},!1):a.attachEvent&&a.attachEvent("onunload",function(){za()})),W.attributes=d(function(a){return a.className="i",!a.getAttribute("className")}),W.getElementsByTagName=d(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),W.getElementsByClassName=ia.test(c.getElementsByClassName)&&d(function(a){return a.innerHTML=
"<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),W.getById=d(function(a){return Y.appendChild(a).id=V,!c.getElementsByName||!c.getElementsByName(V).length}),W.getById?(Q.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&u)return(a=b.getElementById(a))&&a.parentNode?[a]:[]},Q.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete Q.find.ID,Q.filter.ID=function(a){var b=
a.replace(va,wa);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}}),Q.find.TAG=W.getElementsByTagName?function(a,b){return"undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName(a):void 0}:function(a,b){var c=[],k=0;b=b.getElementsByTagName(a);if("*"===a){for(;a=b[k++];)1===a.nodeType&&c.push(a);return c}return b},Q.find.CLASS=W.getElementsByClassName&&function(a,b){return"undefined"!==typeof b.getElementsByClassName&&u?b.getElementsByClassName(a):
void 0},J=[],S=[],(W.qsa=ia.test(c.querySelectorAll))&&(d(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>";a.querySelectorAll("[msallowclip^='']").length&&S.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||S.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||S.push(":checked")}),
d(function(a){var b=c.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&S.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||S.push(":enabled",":disabled");a.querySelectorAll("*,:x");S.push(",.*:")})),(W.matchesSelector=ia.test(ha=Y.matches||Y.webkitMatchesSelector||Y.mozMatchesSelector||Y.oMatchesSelector||Y.msMatchesSelector))&&d(function(a){W.disconnectedMatch=ha.call(a,"div");ha.call(a,
"[s!='']:x");J.push("!=",ca)}),S=S.length&&new RegExp(S.join("|")),J=J.length&&new RegExp(J.join("|")),b=ia.test(Y.compareDocumentPosition),G=b||ia.test(Y.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a;b=b&&b.parentNode;return a===b||!(!b||1!==b.nodeType||!(c.contains?c.contains(b):a.compareDocumentPosition&&16&a.compareDocumentPosition(b)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},K=b?function(a,b){if(a===b)return y=!0,0;var k=!a.compareDocumentPosition-
!b.compareDocumentPosition;return k?k:(k=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&k||!W.sortDetached&&b.compareDocumentPosition(a)===k?a===c||a.ownerDocument===ea&&G(ea,a)?-1:b===c||b.ownerDocument===ea&&G(ea,b)?1:A?ba.call(A,a)-ba.call(A,b):0:4&k?-1:1)}:function(a,b){if(a===b)return y=!0,0;var k=0,d=a.parentNode,e=b.parentNode,p=[a],h=[b];if(!d||!e)return a===c?-1:b===c?1:d?-1:e?1:A?ba.call(A,a)-ba.call(A,b):0;if(d===e)return f(a,b);for(;a=a.parentNode;)p.unshift(a);
for(a=b;a=a.parentNode;)h.unshift(a);for(;p[k]===h[k];)k++;return k?f(p[k],h[k]):p[k]===ea?-1:h[k]===ea?1:0},c):x};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==x&&za(a),c=c.replace(la,"='$1']"),!(!W.matchesSelector||!u||J&&J.test(c)||S&&S.test(c)))try{var k=ha.call(a,c);if(k||W.disconnectedMatch||a.document&&11!==a.document.nodeType)return k}catch(xc){}return 0<b(c,x,null,[a]).length};b.contains=function(a,b){return(a.ownerDocument||a)!==
x&&za(a),G(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==x&&za(a);var c=Q.attrHandle[b.toLowerCase()];c=c&&Ja.call(Q.attrHandle,b.toLowerCase())?c(a,b,!u):void 0;return void 0!==c?c:W.attributes||!u?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],k=0,d=0;if(y=!W.detectDuplicates,A=!W.sortStable&&a.slice(0),a.sort(K),y){for(;b=a[d++];)b===a[d]&&(k=c.push(d));
for(;k--;)a.splice(c[k],1)}return A=null,a};var Ga=b.getText=function(a){var b,c="",k=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=Ga(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[k++];)c+=Ga(b);return c};var Q=b.selectors={cacheLength:50,createPseudo:k,match:ja,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return ja.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&Ka.test(c)&&(b=na(c,!0))&&(b=c.indexOf(")",
c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=X[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),X(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,
c,k){return function(d){d=b.attr(d,a);return null==d?"!="===c:c?(d+="","="===c?d===k:"!="===c?d!==k:"^="===c?k&&0===d.indexOf(k):"*="===c?k&&-1<d.indexOf(k):"$="===c?k&&d.slice(-k.length)===k:"~="===c?-1<(" "+d+" ").indexOf(k):"|="===c?d===k||d.slice(0,k.length+1)===k+"-":!1):!0}},CHILD:function(a,b,c,k,d){var e="nth"!==a.slice(0,3),f="last"!==a.slice(-4),p="of-type"===b;return 1===k&&0===d?function(a){return!!a.parentNode}:function(b,c,h){var g;c=e!==f?"nextSibling":"previousSibling";var l=b.parentNode,
w=p&&b.nodeName.toLowerCase();h=!h&&!p;if(l){if(e){for(;c;){for(g=b;g=g[c];)if(p?g.nodeName.toLowerCase()===w:1===g.nodeType)return!1;var I=c="only"===a&&!I&&"nextSibling"}return!0}if(I=[f?l.firstChild:l.lastChild],f&&h){h=l[V]||(l[V]={});var m=h[a]||[];var H=m[0]===B&&m[1];var M=m[0]===B&&m[2];for(g=H&&l.childNodes[H];g=++H&&g&&g[c]||(M=H=0)||I.pop();)if(1===g.nodeType&&++M&&g===b){h[a]=[B,H,M];break}}else if(h&&(m=(b[V]||(b[V]={}))[a])&&m[0]===B)M=m[1];else for(;(g=++H&&g&&g[c]||(M=H=0)||I.pop())&&
((p?g.nodeName.toLowerCase()!==w:1!==g.nodeType)||!++M||(h&&((g[V]||(g[V]={}))[a]=[B,M]),g!==b)););return M-=d,M===k||0===M%k&&0<=M/k}}},PSEUDO:function(a,c){var d,e=Q.pseudos[a]||Q.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return e[V]?e(c):1<e.length?(d=[a,a,"",c],Q.setFilters.hasOwnProperty(a.toLowerCase())?k(function(a,b){for(var k,d=e(a,c),f=d.length;f--;)k=ba.call(a,d[f]),a[k]=!(b[k]=d[f])}):function(a){return e(a,0,d)}):e}},pseudos:{not:k(function(a){var b=[],c=[],d=N(a.replace(aa,
"$1"));return d[V]?k(function(a,b,c,k){var e;c=d(a,null,k,[]);for(k=a.length;k--;)(e=c[k])&&(a[k]=!(b[k]=e))}):function(a,k,e){return b[0]=a,d(b,null,e,c),!c.pop()}}),has:k(function(a){return function(c){return 0<b(a,c).length}}),contains:k(function(a){return function(b){return-1<(b.textContent||b.innerText||Ga(b)).indexOf(a)}}),lang:k(function(a){return Fa.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=u?b.lang:b.getAttribute("xml:lang")||
b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===Y},focus:function(a){return a===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!Q.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&
"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:l(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};Q.pseudos.nth=Q.pseudos.eq;for(q in{radio:!0,checkbox:!0,
file:!0,password:!0,image:!0})Q.pseudos[q]=h(q);for(q in{submit:!0,reset:!0})Q.pseudos[q]=g(q);n.prototype=Q.filters=Q.pseudos;Q.setFilters=new n;var na=b.tokenize=function(a,c){var k,d,e,f,p;if(f=O[a+" "])return c?0:f.slice(0);f=a;var h=[];for(p=Q.preFilter;f;){g&&!(k=La.exec(f))||(k&&(f=f.slice(k[0].length)||f),h.push(d=[]));var g=!1;(k=ua.exec(f))&&(g=k.shift(),d.push({value:g,type:k[0].replace(aa," ")}),f=f.slice(g.length));for(e in Q.filter)!(k=ja[e].exec(f))||p[e]&&!(k=p[e](k))||(g=k.shift(),
d.push({value:g,type:e,matches:k}),f=f.slice(g.length));if(!g)break}return c?f.length:f?b.error(a):O(a,h).slice(0)};return N=b.compile=function(a,b){var c,k=[],d=[],e=L[a+" "];if(!e){b||(b=na(a));for(c=b.length;c--;)e=C(b[c]),e[V]?k.push(e):d.push(e);e=L(a,t(d,k));e.selector=a}return e},P=b.select=function(a,b,c,k){var d,e,f,p,h,g="function"==typeof a&&a,l=!k&&na(a=g.selector||a);if(c=c||[],1===l.length){if(e=l[0]=l[0].slice(0),2<e.length&&"ID"===(f=e[0]).type&&W.getById&&9===b.nodeType&&u&&Q.relative[e[1].type]){if(b=
(Q.find.ID(f.matches[0].replace(va,wa),b)||[])[0],!b)return c;g&&(b=b.parentNode);a=a.slice(e.shift().value.length)}for(d=ja.needsContext.test(a)?0:e.length;d--&&(f=e[d],!Q.relative[p=f.type]);)if((h=Q.find[p])&&(k=h(f.matches[0].replace(va,wa),oa.test(e[0].type)&&m(b.parentNode)||b))){if(e.splice(d,1),a=k.length&&z(e),!a)return U.apply(c,k),c;break}}return(g||N(a,l))(k,b,!u,c,oa.test(a)&&m(b.parentNode)||b),c},W.sortStable=V.split("").sort(K).join("")===V,W.detectDuplicates=!!y,za(),W.sortDetached=
d(function(a){return 1&a.compareDocumentPosition(x.createElement("div"))}),d(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),W.attributes&&d(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||e("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),
d(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var k;return c?void 0:!0===a[b]?b.toLowerCase():(k=a.getAttributeNode(b))&&k.specified?k.value:null}),b}(a);h.find=na;h.expr=na.selectors;h.expr[":"]=h.expr.pseudos;h.unique=na.uniqueSort;h.text=na.getText;h.isXMLDoc=na.isXML;h.contains=na.contains;var ib=h.expr.match.needsContext,jb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,
Cb=/^.[^:#\[\.,]*$/;h.filter=function(a,b,c){var k=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===k.nodeType?h.find.matchesSelector(k,a)?[k]:[]:h.find.matches(a,h.grep(b,function(a){return 1===a.nodeType}))};h.fn.extend({find:function(a){var b,c=[],k=this,d=k.length;if("string"!=typeof a)return this.pushStack(h(a).filter(function(){for(b=0;d>b;b++)if(h.contains(k[b],this))return!0}));for(b=0;d>b;b++)h.find(a,k[b],c);return c=this.pushStack(1<d?h.unique(c):c),c.selector=this.selector?this.selector+
" "+a:a,c},filter:function(a){return this.pushStack(g(this,a||[],!1))},not:function(a){return this.pushStack(g(this,a||[],!0))},is:function(a){return!!g(this,"string"==typeof a&&ib.test(a)?h(a):a||[],!1).length}});var B=a.document,Pb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(h.fn.init=function(a,b){var c,k;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Pb.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||Ma).find(a):this.constructor(b).find(a);
if(c[1]){if(b=b instanceof h?b[0]:b,h.merge(this,h.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:B,!0)),jb.test(c[1])&&h.isPlainObject(b))for(c in b)h.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(k=B.getElementById(c[2]),k&&k.parentNode){if(k.id!==c[2])return Ma.find(a);this.length=1;this[0]=k}return this.context=B,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):h.isFunction(a)?"undefined"!=typeof Ma.ready?Ma.ready(a):a(h):(void 0!==a.selector&&
(this.selector=a.selector,this.context=a.context),h.makeArray(a,this))}).prototype=h.fn;var Ma=h(B);var Qb=/^(?:parents|prev(?:Until|All))/,Rb={children:!0,contents:!0,next:!0,prev:!0};h.extend({dir:function(a,b,c){var k=[];for(a=a[b];a&&9!==a.nodeType&&(void 0===c||1!==a.nodeType||!h(a).is(c));)1===a.nodeType&&k.push(a),a=a[b];return k},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});h.fn.extend({has:function(a){var b,c=h(a,this),k=c.length;return this.filter(function(){for(b=
0;k>b;b++)if(h.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,k=0,d=this.length,e=[],f=ib.test(a)||"string"!=typeof a?h(a,b||this.context):0;d>k;k++)for(c=this[k];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(f?-1<f.index(c):1===c.nodeType&&h.find.matchesSelector(c,a))){e.push(c);break}return this.pushStack(1<e.length?h.unique(e):e)},index:function(a){return a?"string"==typeof a?h.inArray(this[0],h(a)):h.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:
-1},add:function(a,b){return this.pushStack(h.unique(h.merge(this.get(),h(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});h.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return h.dir(a,"parentNode")},parentsUntil:function(a,b,c){return h.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return h.dir(a,"nextSibling")},
prevAll:function(a){return h.dir(a,"previousSibling")},nextUntil:function(a,b,c){return h.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return h.dir(a,"previousSibling",c)},siblings:function(a){return h.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return h.sibling(a.firstChild)},contents:function(a){return h.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:h.merge([],a.childNodes)}},function(a,b){h.fn[a]=function(c,k){var d=h.map(this,b,c);return"Until"!==a.slice(-5)&&
(k=c),k&&"string"==typeof k&&(d=h.filter(k,d)),1<this.length&&(Rb[a]||(d=h.unique(d)),Qb.test(a)&&(d=d.reverse())),this.pushStack(d)}});var la=/\S+/g,db={};h.Callbacks=function(a){a="string"==typeof a?db[a]||d(a):h.extend({},a);var b,c,k,e,f,g,l=[],m=!a.once&&[],n=function(d){c=a.memory&&d;k=!0;f=g||0;g=0;e=l.length;for(b=!0;l&&e>f;f++)if(!1===l[f].apply(d[0],d[1])&&a.stopOnFalse){c=!1;break}b=!1;l&&(m?m.length&&n(m.shift()):c?l=[]:z.disable())},z={add:function(){if(l){var k=l.length;!function Nb(b){h.each(b,
function(b,c){b=h.type(c);"function"===b?a.unique&&z.has(c)||l.push(c):c&&c.length&&"string"!==b&&Nb(c)})}(arguments);b?e=l.length:c&&(g=k,n(c))}return this},remove:function(){return l&&h.each(arguments,function(a,c){for(var k;-1<(k=h.inArray(c,l,k));)l.splice(k,1),b&&(e>=k&&e--,f>=k&&f--)}),this},has:function(a){return a?-1<h.inArray(a,l):!(!l||!l.length)},empty:function(){return l=[],e=0,this},disable:function(){return l=m=c=void 0,this},disabled:function(){return!l},lock:function(){return m=void 0,
c||z.disable(),this},locked:function(){return!m},fireWith:function(a,c){return!l||k&&!m||(c=c||[],c=[a,c.slice?c.slice():c],b?m.push(c):n(c)),this},fire:function(){return z.fireWith(this,arguments),this},fired:function(){return!!k}};return z};h.extend({Deferred:function(a){var b=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],c="pending",k={state:function(){return c},always:function(){return d.done(arguments).fail(arguments),
this},then:function(){var a=arguments;return h.Deferred(function(c){h.each(b,function(b,e){var f=h.isFunction(a[b])&&a[b];d[e[1]](function(){var a=f&&f.apply(this,arguments);a&&h.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[e[0]+"With"](this===k?c.promise():this,f?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?h.extend(a,k):k}},d={};return k.pipe=k.then,h.each(b,function(a,e){var f=e[2],h=e[3];k[e[1]]=f.add;h&&f.add(function(){c=
h},b[1^a][2].disable,b[2][2].lock);d[e[0]]=function(){return d[e[0]+"With"](this===d?k:this,arguments),this};d[e[0]+"With"]=f.fireWith}),k.promise(d),a&&a.call(d,d),d},when:function(a){var b=0,c=ba.call(arguments),k=c.length,d=1!==k||a&&h.isFunction(a.promise)?k:0,e=1===d?a:h.Deferred(),f=function(a,b,c){return function(k){b[a]=this;c[a]=1<arguments.length?ba.call(arguments):k;c===l?e.notifyWith(b,c):--d||e.resolveWith(b,c)}},g;if(1<k){var l=Array(k);var m=Array(k);for(g=Array(k);k>b;b++)c[b]&&h.isFunction(c[b].promise)?
c[b].promise().done(f(b,g,c)).fail(e.reject).progress(f(b,m,l)):--d}return d||e.resolveWith(g,c),e.promise()}});var Na;h.fn.ready=function(a){return h.ready.promise().done(a),this};h.extend({isReady:!1,readyWait:1,holdReady:function(a){a?h.readyWait++:h.ready(!0)},ready:function(a){if(!0===a?!--h.readyWait:!h.isReady){if(!B.body)return setTimeout(h.ready);h.isReady=!0;!0!==a&&0<--h.readyWait||(Na.resolveWith(B,[h]),h.fn.triggerHandler&&(h(B).triggerHandler("ready"),h(B).off("ready")))}}});h.ready.promise=
function(b){if(!Na)if(Na=h.Deferred(),"complete"===B.readyState)setTimeout(h.ready);else if(B.addEventListener)B.addEventListener("DOMContentLoaded",l,!1),a.addEventListener("load",l,!1);else{B.attachEvent("onreadystatechange",l);a.attachEvent("onload",l);var c=!1;try{c=null==a.frameElement&&B.documentElement}catch(w){}c&&c.doScroll&&!function I(){if(!h.isReady){try{c.doScroll("left")}catch(H){return setTimeout(I,50)}f();h.ready()}}()}return Na.promise(b)};for(var Sb in h(u))break;u.ownLast="0"!==
Sb;u.inlineBlockNeedsLayout=!1;h(function(){var a,b,c,d;(c=B.getElementsByTagName("body")[0])&&c.style&&(b=B.createElement("div"),d=B.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),"undefined"!==typeof b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",u.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))});(function(){var a=B.createElement("div");
if(null==u.deleteExpando){u.deleteExpando=!0;try{delete a.test}catch(p){u.deleteExpando=!1}}})();h.acceptData=function(a){var b=h.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||!0!==b&&a.getAttribute("classid")===b};var Eb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Db=/([A-Z])/g;h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?h.cache[a[h.expando]]:a[h.expando],!!a&&!n(a)},data:function(a,
b,c){return r(a,b,c)},removeData:function(a,b){return t(a,b)},_data:function(a,b,c){return r(a,b,c,!0)},_removeData:function(a,b){return t(a,b,!0)}});h.fn.extend({data:function(a,b){var c,k,d,e=this[0],f=e&&e.attributes;if(void 0===a){if(this.length&&(d=h.data(e),1===e.nodeType&&!h._data(e,"parsedAttrs"))){for(c=f.length;c--;)f[c]&&(k=f[c].name,0===k.indexOf("data-")&&(k=h.camelCase(k.slice(5)),m(e,k,d[k])));h._data(e,"parsedAttrs",!0)}return d}return"object"==typeof a?this.each(function(){h.data(this,
a)}):1<arguments.length?this.each(function(){h.data(this,a,b)}):e?m(e,a,h.data(e,a)):void 0},removeData:function(a){return this.each(function(){h.removeData(this,a)})}});h.extend({queue:function(a,b,c){var k;return a?(b=(b||"fx")+"queue",k=h._data(a,b),c&&(!k||h.isArray(c)?k=h._data(a,b,h.makeArray(c)):k.push(c)),k||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=h.queue(a,b),k=c.length,d=c.shift(),e=h._queueHooks(a,b),f=function(){h.dequeue(a,b)};"inprogress"===d&&(d=c.shift(),k--);d&&("fx"===
b&&c.unshift("inprogress"),delete e.stop,d.call(a,f,e));!k&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return h._data(a,c)||h._data(a,c,{empty:h.Callbacks("once memory").add(function(){h._removeData(a,b+"queue");h._removeData(a,c)})})}});h.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?h.queue(this[0],a):void 0===b?this:this.each(function(){var c=h.queue(this,a,b);h._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&h.dequeue(this,
a)})},dequeue:function(a){return this.each(function(){h.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,k=1,d=h.Deferred(),e=this,f=this.length,g=function(){--k||d.resolveWith(e,[e])};"string"!=typeof a&&(b=a,a=void 0);for(a=a||"fx";f--;)(c=h._data(e[f],a+"queueHooks"))&&c.empty&&(k++,c.empty.add(g));return g(),d.promise(b)}});var Oa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pa=["Top","Right","Bottom","Left"],Da=function(a,b){return a=b||a,"none"===
h.css(a,"display")||!h.contains(a.ownerDocument,a)},ra=h.access=function(a,b,c,d,e,f,g){var k=0,p=a.length,l=null==c;if("object"===h.type(c))for(k in e=!0,c)h.access(a,b,k,c[k],!0,f,g);else if(void 0!==d&&(e=!0,h.isFunction(d)||(g=!0),l&&(g?(b.call(a,d),b=null):(l=b,b=function(a,b,c){return l.call(h(a),c)})),b))for(;p>k;k++)b(a[k],c,g?d:d.call(a[k],k,b(a[k],c)));return e?a:l?b.call(a):p?b(a[0],c):f},Ta=/^(?:checkbox|radio)$/i;!function(){var a=B.createElement("input"),b=B.createElement("div"),c=B.createDocumentFragment();
if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",u.leadingWhitespace=3===b.firstChild.nodeType,u.tbody=!b.getElementsByTagName("tbody").length,u.htmlSerialize=!!b.getElementsByTagName("link").length,u.html5Clone="<:nav></:nav>"!==B.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),u.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML=
"<input type='radio' checked='checked' name='t'/>",u.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,u.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){u.noCloneEvent=!1}),b.cloneNode(!0).click()),null==u.deleteExpando){u.deleteExpando=!0;try{delete b.test}catch(I){u.deleteExpando=!1}}}();(function(){var b,c=B.createElement("div");for(b in{submit:!0,change:!0,focusin:!0}){var d="on"+b;(u[b+"Bubbles"]=d in a)||(c.setAttribute(d,"t"),u[b+"Bubbles"]=!1===c.attributes[d].expando)}})();
var Va=/^(?:input|select|textarea)$/i,Tb=/^key/,Ub=/^(?:mouse|pointer|contextmenu)|click/,kb=/^(?:focusinfocus|focusoutblur)$/,lb=/^([^.]*)(?:\.(.+)|)$/;h.event={global:{},add:function(a,b,c,d,e){var k,f,g,l,p,w,m,I;if(f=h._data(a)){c.handler&&(g=c,c=g.handler,e=g.selector);c.guid||(c.guid=h.guid++);(k=f.events)||(k=f.events={});(p=f.handle)||(p=f.handle=function(a){return"undefined"===typeof h||a&&h.event.triggered===a.type?void 0:h.event.dispatch.apply(p.elem,arguments)},p.elem=a);b=(b||"").match(la)||
[""];for(f=b.length;f--;){var H=lb.exec(b[f])||[];var n=I=H[1];H=(H[2]||"").split(".").sort();n&&(l=h.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=h.event.special[n]||{},w=h.extend({type:n,origType:I,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&h.expr.match.needsContext.test(e),namespace:H.join(".")},g),(m=k[n])||(m=k[n]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,H,p)||(a.addEventListener?a.addEventListener(n,p,!1):a.attachEvent&&a.attachEvent("on"+n,p))),l.add&&(l.add.call(a,
w),w.handler.guid||(w.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,w):m.push(w),h.event.global[n]=!0)}a=null}},remove:function(a,b,c,d,e){var k,f,g,l,p,w,m,I,n=h.hasData(a)&&h._data(a);if(n&&(p=n.events)){b=(b||"").match(la)||[""];for(l=b.length;l--;)if(f=lb.exec(b[l])||[],w=I=f[1],m=(f[2]||"").split(".").sort(),w){var H=h.event.special[w]||{};w=(d?H.delegateType:H.bindType)||w;var z=p[w]||[];f=f[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)");for(g=k=z.length;k--;){var F=z[k];
!e&&I!==F.origType||c&&c.guid!==F.guid||f&&!f.test(F.namespace)||d&&d!==F.selector&&("**"!==d||!F.selector)||(z.splice(k,1),F.selector&&z.delegateCount--,H.remove&&H.remove.call(a,F))}g&&!z.length&&(H.teardown&&!1!==H.teardown.call(a,m,n.handle)||h.removeEvent(a,w,n.handle),delete p[w])}else for(w in p)h.event.remove(a,w+b[l],c,d,!0);h.isEmptyObject(p)&&(delete n.handle,h._removeData(a,"events"))}},trigger:function(b,c,d,e){var k,f,g,l,p=[d||B],w=ua.call(b,"type")?b.type:b;var m=ua.call(b,"namespace")?
b.namespace.split("."):[];if(g=k=d=d||B,3!==d.nodeType&&8!==d.nodeType&&!kb.test(w+h.event.triggered)&&(0<=w.indexOf(".")&&(m=w.split("."),w=m.shift(),m.sort()),f=0>w.indexOf(":")&&"on"+w,b=b[h.expando]?b:new h.Event(w,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=m.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:h.makeArray(c,[b]),l=h.event.special[w]||{},e||!l.trigger||!1!==l.trigger.apply(d,
c))){if(!e&&!l.noBubble&&!h.isWindow(d)){var I=l.delegateType||w;for(kb.test(I+w)||(g=g.parentNode);g;g=g.parentNode)p.push(g),k=g;k===(d.ownerDocument||B)&&p.push(k.defaultView||k.parentWindow||a)}for(m=0;(g=p[m++])&&!b.isPropagationStopped();)b.type=1<m?I:l.bindType||w,(k=(h._data(g,"events")||{})[b.type]&&h._data(g,"handle"))&&k.apply(g,c),(k=f&&g[f])&&k.apply&&h.acceptData(g)&&(b.result=k.apply(g,c),!1===b.result&&b.preventDefault());if(b.type=w,!(e||b.isDefaultPrevented()||l._default&&!1!==l._default.apply(p.pop(),
c))&&h.acceptData(d)&&f&&d[w]&&!h.isWindow(d)){(k=d[f])&&(d[f]=null);h.event.triggered=w;try{d[w]()}catch(Hb){}h.event.triggered=void 0;k&&(d[f]=k)}return b.result}},dispatch:function(a){a=h.event.fix(a);var b,c,k,d,e=ba.call(arguments);var f=(h._data(this,"events")||{})[a.type]||[];var g=h.event.special[a.type]||{};if(e[0]=a,a.delegateTarget=this,!g.preDispatch||!1!==g.preDispatch.call(this,a)){var l=h.event.handlers.call(this,a,f);for(f=0;(k=l[f++])&&!a.isPropagationStopped();)for(a.currentTarget=
k.elem,d=0;(c=k.handlers[d++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(c.namespace)||(a.handleObj=c,a.data=c.data,b=((h.event.special[c.origType]||{}).handle||c.handler).apply(k.elem,e),void 0===b||!1!==(a.result=b)||(a.preventDefault(),a.stopPropagation()));return g.postDispatch&&g.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,k=[],d=b.delegateCount,e=a.target;if(d&&e.nodeType&&(!a.button||"click"!==a.type))for(;e!=this;e=e.parentNode||this)if(1===
e.nodeType&&(!0!==e.disabled||"click"!==a.type)){var f=[];for(c=0;d>c;c++){var g=b[c];var l=g.selector+" ";void 0===f[l]&&(f[l]=g.needsContext?0<=h(l,this).index(e):h.find(l,this,null,[e]).length);f[l]&&f.push(g)}f.length&&k.push({elem:e,handlers:f})}return d<b.length&&k.push({elem:this,handlers:b.slice(d)}),k},fix:function(a){if(a[h.expando])return a;var b=a.type;var c=a,k=this.fixHooks[b];k||(this.fixHooks[b]=k=Ub.test(b)?this.mouseHooks:Tb.test(b)?this.keyHooks:{});var d=k.props?this.props.concat(k.props):
this.props;a=new h.Event(c);for(b=d.length;b--;){var e=d[b];a[e]=c[e]}return a.target||(a.target=c.srcElement||B),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,k.filter?k.filter(a,c):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),
a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,k,e=b.button,f=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||B,k=d.documentElement,c=d.body,a.pageX=b.clientX+(k&&k.scrollLeft||c&&c.scrollLeft||0)-(k&&k.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(k&&k.scrollTop||c&&c.scrollTop||0)-(k&&k.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&f&&(a.relatedTarget=
f===a.target?b.toElement:f),a.which||void 0===e||(a.which=1&e?1:2&e?3:4&e?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==P()&&this.focus)try{return this.focus(),!1}catch(k){}},delegateType:"focusin"},blur:{trigger:function(){return this===P()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return h.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return h.nodeName(a.target,"a")}},
beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=h.extend(new h.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?h.event.trigger(a,null,b):h.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};h.removeEvent=B.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,
c))};h.Event=function(a,b){return this instanceof h.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?v:y):this.type=a,b&&h.extend(this,b),this.timeStamp=a&&a.timeStamp||h.now(),void(this[h.expando]=!0)):new h.Event(a,b)};h.Event.prototype={isDefaultPrevented:y,isPropagationStopped:y,isImmediatePropagationStopped:y,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=v;a&&(a.preventDefault?
a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=v;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=v;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){h.event.special[a]=
{delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,k=a.handleObj;return(!d||d!==this&&!h.contains(this,d))&&(a.type=k.origType,c=k.handler.apply(this,arguments),a.type=b),c}}});u.submitBubbles||(h.event.special.submit={setup:function(){return h.nodeName(this,"form")?!1:void h.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=h.nodeName(a,"input")||h.nodeName(a,"button")?a.form:void 0)&&!h._data(a,"submitBubbles")&&(h.event.add(a,"submit._submit",function(a){a._submit_bubble=
!0}),h._data(a,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&h.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return h.nodeName(this,"form")?!1:void h.event.remove(this,"._submit")}});u.changeBubbles||(h.event.special.change={setup:function(){return Va.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(h.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&
(this._just_changed=!0)}),h.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);h.event.simulate("change",this,a,!0)})),!1):void h.event.add(this,"beforeactivate._change",function(a){a=a.target;Va.test(a.nodeName)&&!h._data(a,"changeBubbles")&&(h.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||h.event.simulate("change",this.parentNode,a,!0)}),h._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;
return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return h.event.remove(this,"._change"),!Va.test(this.nodeName)}});u.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){h.event.simulate(b,a.target,h.event.fix(a),!0)};h.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=h._data(d,b);e||d.addEventListener(a,c,!0);h._data(d,b,(e||0)+1)},teardown:function(){var d=
this.ownerDocument||this,e=h._data(d,b)-1;e?h._data(d,b,e):(d.removeEventListener(a,c,!0),h._removeData(d,b))}}});h.fn.extend({on:function(a,b,c,d,e){var k,f;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(k in a)this.on(k,b,c,a[k],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!1===d)d=y;else if(!d)return this;return 1===e&&(f=d,d=function(a){return h().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=h.guid++)),
this.each(function(){h.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,h(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(!1===b||"function"==typeof b)&&(c=b,b=void 0),!1===c&&(c=y),this.each(function(){h.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){h.event.trigger(a,
b,this)})},triggerHandler:function(a,b){var c=this[0];return c?h.event.trigger(a,b,c,!0):void 0}});var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Vb=/ jQuery\d+="(?:null|\d+)"/g,mb=new RegExp("<(?:"+eb+")[\\s/>]","i"),Wa=/^\s+/,nb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ob=/<([\w:]+)/,pb=/<tbody/i,Wb=/<|&#?\w+;/,Xb=/<(?:script|style|link)/i,Yb=/checked\s*(?:[^=]|=\s*.checked.)/i,
qb=/^$|\/(?:java|ecma)script/i,Fb=/^true\/(.*)/,Zb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ca={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:u.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xa=
x(B).appendChild(B.createElement("div"));ca.optgroup=ca.option;ca.tbody=ca.tfoot=ca.colgroup=ca.caption=ca.thead;ca.th=ca.td;h.extend({clone:function(a,b,c){var d,e,k,f=h.contains(a.ownerDocument,a);if(u.html5Clone||h.isXMLDoc(a)||!mb.test("<"+a.nodeName+">")?e=a.cloneNode(!0):(Xa.innerHTML=a.outerHTML,Xa.removeChild(e=Xa.firstChild)),!(u.noCloneEvent&&u.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||h.isXMLDoc(a))){var g=J(e);var l=J(a);for(k=0;null!=(d=l[k]);++k)if(g[k]){var p=void 0,m,w=d,n=
g[k];if(1===n.nodeType){if(m=n.nodeName.toLowerCase(),!u.noCloneEvent&&n[h.expando]){d=h._data(n);for(p in d.events)h.removeEvent(n,p,d.handle);n.removeAttribute(h.expando)}"script"===m&&n.text!==w.text?(q(n).text=w.text,R(n)):"object"===m?(n.parentNode&&(n.outerHTML=w.outerHTML),u.html5Clone&&w.innerHTML&&!h.trim(n.innerHTML)&&(n.innerHTML=w.innerHTML)):"input"===m&&Ta.test(w.type)?(n.defaultChecked=n.checked=w.checked,n.value!==w.value&&(n.value=w.value)):"option"===m?n.defaultSelected=n.selected=
w.defaultSelected:("input"===m||"textarea"===m)&&(n.defaultValue=w.defaultValue)}}}if(b)if(c)for(l=l||J(a),g=g||J(e),k=0;null!=(d=l[k]);k++)z(d,g[k]);else z(a,e);return g=J(e,"script"),0<g.length&&A(g,!f&&J(a,"script")),e},buildFragment:function(a,b,c,d){for(var e,k,f,g,l,p,m,w=a.length,n=x(b),I=[],z=0;w>z;z++)if(k=a[z],k||0===k)if("object"===h.type(k))h.merge(I,k.nodeType?[k]:k);else if(Wb.test(k)){g=g||n.appendChild(b.createElement("div"));l=(ob.exec(k)||["",""])[1].toLowerCase();m=ca[l]||ca._default;
g.innerHTML=m[1]+k.replace(nb,"<$1></$2>")+m[2];for(e=m[0];e--;)g=g.lastChild;if(!u.leadingWhitespace&&Wa.test(k)&&I.push(b.createTextNode(Wa.exec(k)[0])),!u.tbody)for(e=(k="table"!==l||pb.test(k)?"<table>"!==m[1]||pb.test(k)?0:g:g.firstChild)&&k.childNodes.length;e--;)h.nodeName(p=k.childNodes[e],"tbody")&&!p.childNodes.length&&k.removeChild(p);h.merge(I,g.childNodes);for(g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=n.lastChild}else I.push(b.createTextNode(k));g&&n.removeChild(g);
u.appendChecked||h.grep(J(I,"input"),da);for(z=0;k=I[z++];)if((!d||-1===h.inArray(k,d))&&(f=h.contains(k.ownerDocument,k),g=J(n.appendChild(k),"script"),f&&A(g),c))for(e=0;k=g[e++];)qb.test(k.type||"")&&c.push(k);return n},cleanData:function(a,b){for(var c,d,e,k,f=0,g=h.expando,l=h.cache,p=u.deleteExpando,m=h.event.special;null!=(c=a[f]);f++)if((b||h.acceptData(c))&&(e=c[g],k=e&&l[e])){if(k.events)for(d in k.events)m[d]?h.event.remove(c,d):h.removeEvent(c,d,k.handle);l[e]&&(delete l[e],p?delete c[g]:
"undefined"!==typeof c.removeAttribute?c.removeAttribute(g):c[g]=null,ka.push(e))}}});h.fn.extend({text:function(a){return ra(this,function(a){return void 0===a?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||B).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||O(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||
11===this.nodeType||9===this.nodeType){var b=O(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c=a?h.filter(a,this):this,d=0;null!=(a=c[d]);d++)b||1!==a.nodeType||h.cleanData(J(a)),a.parentNode&&(b&&h.contains(a.ownerDocument,a)&&
A(J(a,"script")),a.parentNode.removeChild(a));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&h.cleanData(J(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&h.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return h.clone(this,a,b)})},html:function(a){return ra(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(Vb,
""):void 0;if(!("string"!=typeof a||Xb.test(a)||!u.htmlSerialize&&mb.test(a)||!u.leadingWhitespace&&Wa.test(a)||ca[(ob.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(nb,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(h.cleanData(J(b,!1)),b.innerHTML=a);b=0}catch(M){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode;h.cleanData(J(this));a&&a.replaceChild(b,this)}),a&&(a.length||
a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Ka.apply([],a);var c,d,e,k=0,f=this.length,g=this,l=f-1,p=a[0],m=h.isFunction(p);if(m||1<f&&"string"==typeof p&&!u.checkClone&&Yb.test(p))return this.each(function(c){var d=g.eq(c);m&&(a[0]=p.call(this,c,d.html()));d.domManip(a,b)});if(f&&(e=h.buildFragment(a,this[0].ownerDocument,!1,this),c=e.firstChild,1===e.childNodes.length&&(e=c),c)){var n=h.map(J(e,"script"),q);for(d=n.length;f>k;k++)c=e,k!==
l&&(c=h.clone(c,!0,!0),d&&h.merge(n,J(c,"script"))),b.call(this[k],c,k);if(d)for(e=n[n.length-1].ownerDocument,h.map(n,R),k=0;d>k;k++)c=n[k],qb.test(c.type||"")&&!h._data(c,"globalEval")&&h.contains(e,c)&&(c.src?h._evalUrl&&h._evalUrl(c.src):h.globalEval((c.text||c.textContent||c.innerHTML||"").replace(Zb,"")));e=c=null}return this}});h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){h.fn[a]=function(a){for(var c=0,d=[],
e=h(a),k=e.length-1;k>=c;c++)a=c===k?this:this.clone(!0),h(e[c])[b](a),Fa.apply(d,a.get());return this.pushStack(d)}});var Ca,fb={};!function(){var a;u.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=B.getElementsByTagName("body")[0],c&&c.style?(b=B.createElement("div"),d=B.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),"undefined"!==typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",
b.appendChild(B.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var rb=/^margin/,Ha=new RegExp("^("+Oa+")(?!px)[a-z%]+$","i"),qa,ia,$b=/^(top|right|bottom|left)$/;a.getComputedStyle?(qa=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},ia=function(a,b,c){var d,e,k,f,g=a.style;return c=c||qa(a),f=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==f||h.contains(a.ownerDocument,a)||(f=h.style(a,b)),Ha.test(f)&&rb.test(b)&&(d=g.width,e=g.minWidth,
k=g.maxWidth,g.minWidth=g.maxWidth=g.width=f,f=c.width,g.width=d,g.minWidth=e,g.maxWidth=k)),void 0===f?f:f+""}):B.documentElement.currentStyle&&(qa=function(a){return a.currentStyle},ia=function(a,b,c){var d,e,f,k,g=a.style;return c=c||qa(a),k=c?c[b]:void 0,null==k&&g&&g[b]&&(k=g[b]),Ha.test(k)&&!$b.test(b)&&(d=g.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),g.left="fontSize"===b?"1em":k,k=g.pixelLeft+"px",g.left=d,f&&(e.left=f)),void 0===k?k:k+""||"auto"});!function(){var b,
c,d,e,f,g,l;if(b=B.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){var m=function(){var b,c,d,k;(c=B.getElementsByTagName("body")[0])&&c.style&&(b=B.createElement("div"),d=B.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
e=f=!1,l=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,k=b.appendChild(B.createElement("div")),k.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",b.style.width="1px",l=!parseFloat((a.getComputedStyle(k,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",
k=b.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===k[0].offsetHeight,g&&(k[0].style.display="",k[1].style.display="none",g=0===k[0].offsetHeight),c.removeChild(d))};c.cssText="float:left;opacity:.5";u.opacity="0.5"===c.opacity;u.cssFloat=!!c.cssFloat;b.style.backgroundClip="content-box";b.cloneNode(!0).style.backgroundClip="";u.clearCloneStyle="content-box"===b.style.backgroundClip;u.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing;
h.extend(u,{reliableHiddenOffsets:function(){return null==g&&m(),g},boxSizingReliable:function(){return null==f&&m(),f},pixelPosition:function(){return null==e&&m(),e},reliableMarginRight:function(){return null==l&&m(),l}})}}();h.swap=function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c};var Ya=/alpha\([^)]*\)/i,ac=/opacity\s*=\s*([^)]*)/,bc=/^(none|table(?!-c[ea]).+)/,Gb=new RegExp("^("+Oa+")(.*)$","i"),cc=new RegExp("^([+-])=("+
Oa+")","i"),dc={position:"absolute",visibility:"hidden",display:"block"},sb={letterSpacing:"0",fontWeight:"400"},gb=["Webkit","O","Moz","ms"];h.extend({cssHooks:{opacity:{get:function(a,b){if(b)return a=ia(a,"opacity"),""===a?"1":a}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":u.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&
a.style){var e,f,k,g=h.camelCase(b),l=a.style;if(b=h.cssProps[g]||(h.cssProps[g]=ha(l,g)),k=h.cssHooks[b]||h.cssHooks[g],void 0===c)return k&&"get"in k&&void 0!==(e=k.get(a,!1,d))?e:l[b];if(f=typeof c,"string"===f&&(e=cc.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(h.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||h.cssNumber[g]||(c+="px"),u.clearCloneStyle||""!==c||0!==b.indexOf("background")||(l[b]="inherit"),!(k&&"set"in k&&void 0===(c=k.set(a,c,d)))))try{l[b]=c}catch(vc){}}},css:function(a,b,c,
d){var e,f,k,g=h.camelCase(b);return b=h.cssProps[g]||(h.cssProps[g]=ha(a.style,g)),k=h.cssHooks[b]||h.cssHooks[g],k&&"get"in k&&(f=k.get(a,!0,c)),void 0===f&&(f=ia(a,b,d)),"normal"===f&&b in sb&&(f=sb[b]),""===c||c?(e=parseFloat(f),!0===c||h.isNumeric(e)?e||0:f):f}});h.each(["height","width"],function(a,b){h.cssHooks[b]={get:function(a,c,d){return c?bc.test(h.css(a,"display"))&&0===a.offsetWidth?h.swap(a,dc,function(){return U(a,b,d)}):U(a,b,d):void 0},set:function(a,c,d){var e=d&&qa(a);return X(a,
c,d?G(a,b,d,u.boxSizing&&"border-box"===h.css(a,"boxSizing",!1,e),e):0)}}});u.opacity||(h.cssHooks.opacity={get:function(a,b){return ac.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style;a=a.currentStyle;var d=h.isNumeric(b)?"alpha(opacity="+100*b+")":"",e=a&&a.filter||c.filter||"";c.zoom=1;(1<=b||""===b)&&""===h.trim(e.replace(Ya,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||a&&!a.filter)||(c.filter=
Ya.test(e)?e.replace(Ya,d):e+" "+d)}});h.cssHooks.marginRight=C(u.reliableMarginRight,function(a,b){return b?h.swap(a,{display:"inline-block"},ia,[a,"marginRight"]):void 0});h.each({margin:"",padding:"",border:"Width"},function(a,b){h.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+pa[d]+b]=c[d]||c[d-2]||c[0];return e}};rb.test(a)||(h.cssHooks[a+b].set=X)});h.fn.extend({css:function(a,b){return ra(this,function(a,b,c){var d,e={},f=0;if(h.isArray(b)){c=
qa(a);for(d=b.length;d>f;f++)e[b[f]]=h.css(a,b[f],!1,c);return e}return void 0!==c?h.style(a,b,c):h.css(a,b)},a,b,1<arguments.length)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Da(this)?h(this).show():h(this).hide()})}});h.Tween=T;T.prototype={constructor:T,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=
d;this.unit=f||(h.cssNumber[c]?"":"px")},cur:function(){var a=T.propHooks[this.prop];return a&&a.get?a.get(this):T.propHooks._default.get(this)},run:function(a){var b,c=T.propHooks[this.prop];return this.pos=b=this.options.duration?h.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):T.propHooks._default.set(this),this}};T.prototype.init.prototype=
T.prototype;T.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=h.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){h.fx.step[a.prop]?h.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[h.cssProps[a.prop]]||h.cssHooks[a.prop])?h.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};
h.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};h.fx=T.prototype.init;h.fx.step={};var ta,Pa,ec=/^(?:toggle|show|hide)$/,tb=new RegExp("^(?:([+-])=|)("+Oa+")([a-z%]*)$","i"),fc=/queueHooks$/,Ia=[function(a,b,c){var d,e,f,k,g,l,p,m=this,n={},w=a.style,z=a.nodeType&&Da(a),F=h._data(a,"fxshow");c.queue||(k=h._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,g=k.empty.fire,k.empty.fire=function(){k.unqueued||g()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--;
h.queue(a,"fx").length||k.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[w.overflow,w.overflowX,w.overflowY],l=h.css(a,"display"),p="none"===l?h._data(a,"olddisplay")||D(a.nodeName):l,"inline"===p&&"none"===h.css(a,"float")&&(u.inlineBlockNeedsLayout&&"inline"!==D(a.nodeName)?w.zoom=1:w.display="inline-block"));c.overflow&&(w.overflow="hidden",u.shrinkWrapBlocks()||m.always(function(){w.overflow=c.overflow[0];w.overflowX=c.overflow[1];w.overflowY=c.overflow[2]}));for(d in b)if(e=
b[d],ec.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(z?"hide":"show")){if("show"!==e||!F||void 0===F[d])continue;z=!0}n[d]=F&&F[d]||h.style(a,d)}else l=void 0;if(h.isEmptyObject(n))"inline"===("none"===l?D(a.nodeName):l)&&(w.display=l);else for(d in F?"hidden"in F&&(z=F.hidden):F=h._data(a,"fxshow",{}),f&&(F.hidden=!z),z?h(a).show():m.done(function(){h(a).hide()}),m.done(function(){var b;h._removeData(a,"fxshow");for(b in n)h.style(a,b,n[b])}),n)b=aa(z?F[d]:0,d,m),d in F||(F[d]=b.start,z&&(b.end=
b.start,b.start="width"===d||"height"===d?1:0))}],Ea={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=(b=tb.exec(b))&&b[3]||(h.cssNumber[a]?"":"px"),f=(h.cssNumber[a]||"px"!==e&&+d)&&tb.exec(h.css(c.elem,a)),k=1,g=20;if(f&&f[3]!==e){e=e||f[3];b=b||[];f=+d||1;do k=k||".5",f/=k,h.style(c.elem,a,f+e);while(k!==(k=c.cur()/d)&&1!==k&&--g)}return b&&(f=c.start=+f||+d||0,c.unit=e,c.end=b[1]?f+(b[1]+1)*b[2]:+b[2]),c}]};h.Animation=h.extend(Z,{tweener:function(a,b){h.isFunction(a)?(b=a,a=["*"]):
a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ea[c]=Ea[c]||[],Ea[c].unshift(b)},prefilter:function(a,b){b?Ia.unshift(a):Ia.push(a)}});h.speed=function(a,b,c){var d=a&&"object"==typeof a?h.extend({},a):{complete:c||!c&&b||h.isFunction(a)&&a,duration:a,easing:c&&b||b&&!h.isFunction(b)&&b};return d.duration=h.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in h.fx.speeds?h.fx.speeds[d.duration]:h.fx.speeds._default,(null==d.queue||!0===d.queue)&&(d.queue="fx"),d.old=d.complete,d.complete=
function(){h.isFunction(d.old)&&d.old.call(this);d.queue&&h.dequeue(this,d.queue)},d};h.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=h.isEmptyObject(a),f=h.speed(b,c,d);b=function(){var b=Z(this,h.extend({},a),f);(e||h._data(this,"finish"))&&b.stop(!0)};return b.finish=b,e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};return"string"!=
typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=h.timers,k=h._data(this);if(e)k[e]&&k[e].stop&&d(k[e]);else for(e in k)k[e]&&k[e].stop&&fc.test(e)&&d(k[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||h.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b=h._data(this),c=b[a+"queue"];var d=b[a+"queueHooks"];var e=h.timers,f=
c?c.length:0;b.finish=!0;h.queue(this,a,[]);d&&d.stop&&d.stop.call(this,!0);for(d=e.length;d--;)e[d].elem===this&&e[d].queue===a&&(e[d].anim.stop(!0),e.splice(d,1));for(d=0;f>d;d++)c[d]&&c[d].finish&&c[d].finish.call(this);delete b.finish})}});h.each(["toggle","show","hide"],function(a,b){var c=h.fn[b];h.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(L(b,!0),a,d,e)}});h.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){h.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});h.timers=[];h.fx.tick=function(){var a=h.timers,b=0;for(ta=h.now();b<a.length;b++){var c=a[b];c()||a[b]!==c||a.splice(b--,1)}a.length||h.fx.stop();ta=void 0};h.fx.timer=function(a){h.timers.push(a);a()?h.fx.start():h.timers.pop()};h.fx.interval=13;h.fx.start=function(){Pa||(Pa=setInterval(h.fx.tick,h.fx.interval))};h.fx.stop=function(){clearInterval(Pa);Pa=null};h.fx.speeds=
{slow:600,fast:200,_default:400};h.fn.delay=function(a,b){return a=h.fx?h.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=B.createElement("div");a.setAttribute("className","t");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";var b=a.getElementsByTagName("a")[0];var c=B.createElement("select");var d=c.appendChild(B.createElement("option"));var e=a.getElementsByTagName("input")[0];b.style.cssText=
"top:1px";u.getSetAttribute="t"!==a.className;u.style=/top/.test(b.getAttribute("style"));u.hrefNormalized="/a"===b.getAttribute("href");u.checkOn=!!e.value;u.optSelected=d.selected;u.enctype=!!B.createElement("form").enctype;c.disabled=!0;u.optDisabled=!d.disabled;e=B.createElement("input");e.setAttribute("value","");u.input=""===e.getAttribute("value");e.value="t";e.setAttribute("type","radio");u.radioValue="t"===e.value})();var gc=/\r/g;h.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=
h.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,h(this).val()):a,null==e?e="":"number"==typeof e?e+="":h.isArray(e)&&(e=h.map(e,function(a){return null==a?"":a+""})),b=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=h.valHooks[e.type]||h.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gc,""):null==c?
"":c)}});h.extend({valHooks:{option:{get:function(a){var b=h.find.attr(a,"value");return null!=b?b:h.trim(h.text(a))}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e="select-one"===a.type||0>d,f=e?null:[],k=e?d+1:c.length,g=0>d?k:e?d:0;k>g;g++)if(b=c[g],!(!b.selected&&g!==d||(u.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&h.nodeName(b.parentNode,"optgroup"))){if(a=h(b).val(),e)return a;f.push(a)}return f},set:function(a,b){var c,d,e=a.options;
b=h.makeArray(b);for(var f=e.length;f--;)if(d=e[f],0<=h.inArray(h.valHooks.option.get(d),b))try{d.selected=c=!0}catch(fa){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}});h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(a,b){return h.isArray(b)?a.checked=0<=h.inArray(h(a).val(),b):void 0}};u.checkOn||(h.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Aa,ja=h.expr.attrHandle,Za=/^(?:checked|selected)$/i,oa=u.getSetAttribute,
Qa=u.input;h.fn.extend({attr:function(a,b){return ra(this,h.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){h.removeAttr(this,a)})}});h.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return"undefined"===typeof a.getAttribute?h.prop(a,b,c):(1===f&&h.isXMLDoc(a)||(b=b.toLowerCase(),d=h.attrHooks[b]||(h.expr.match.bool.test(b)?hc:Aa)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=h.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in
d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void h.removeAttr(a,b))},removeAttr:function(a,b){var c=0,d=b&&b.match(la);if(d&&1===a.nodeType)for(;b=d[c++];){var e=h.propFix[b]||b;h.expr.match.bool.test(b)?Qa&&oa||!Za.test(b)?a[e]=!1:a[h.camelCase("default-"+b)]=a[e]=!1:h.attr(a,b,"");a.removeAttribute(oa?b:e)}},attrHooks:{type:{set:function(a,b){if(!u.radioValue&&"radio"===b&&h.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}});var hc={set:function(a,
b,c){return!1===b?h.removeAttr(a,c):Qa&&oa||!Za.test(c)?a.setAttribute(!oa&&h.propFix[c]||c,c):a[h.camelCase("default-"+c)]=a[c]=!0,c}};h.each(h.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ja[b]||h.find.attr;ja[b]=Qa&&oa||!Za.test(b)?function(a,b,d){var e,f;return d||(f=ja[b],ja[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ja[b]=f),e}:function(a,b,c){return c?void 0:a[h.camelCase("default-"+b)]?b.toLowerCase():null}});Qa&&oa||(h.attrHooks.value={set:function(a,b,c){return h.nodeName(a,
"input")?void(a.defaultValue=b):Aa&&Aa.set(a,b,c)}});oa||(Aa={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ja.id=ja.name=ja.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},h.valHooks.button={get:function(a,b){return(a=a.getAttributeNode(b))&&a.specified?a.value:void 0},set:Aa.set},h.attrHooks.contenteditable={set:function(a,
b,c){Aa.set(a,""===b?!1:b,c)}},h.each(["width","height"],function(a,b){h.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}}));u.style||(h.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var ic=/^(?:input|select|textarea|button|object)$/i,jc=/^(?:a|area)$/i;h.fn.extend({prop:function(a,b){return ra(this,h.prop,a,b,1<arguments.length)},removeProp:function(a){return a=h.propFix[a]||a,this.each(function(){try{this[a]=
void 0,delete this[a]}catch(p){}})}});h.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!h.isXMLDoc(a),f&&(b=h.propFix[b]||b,e=h.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=h.find.attr(a,"tabindex");return b?parseInt(b,10):ic.test(a.nodeName)||jc.test(a.nodeName)&&a.href?0:-1}}}});u.hrefNormalized||
h.each(["href","src"],function(a,b){h.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});u.optSelected||(h.propHooks.selected={get:function(a){a=a.parentNode;return a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}});h.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){h.propFix[this.toLowerCase()]=this});u.enctype||(h.propFix.enctype="encoding");var $a=/[\t\r\n\f]/g;h.fn.extend({addClass:function(a){var b,
c,d,e,f=0,g=this.length;var k="string"==typeof a&&a;if(h.isFunction(a))return this.each(function(b){h(this).addClass(a.call(this,b,this.className))});if(k)for(k=(a||"").match(la)||[];g>f;f++)if(b=this[f],c=1===b.nodeType&&(b.className?(" "+b.className+" ").replace($a," "):" ")){for(e=0;d=k[e++];)0>c.indexOf(" "+d+" ")&&(c+=d+" ");c=h.trim(c);b.className!==c&&(b.className=c)}return this},removeClass:function(a){var b,c,d,e,f=0,g=this.length;var k=0===arguments.length||"string"==typeof a&&a;if(h.isFunction(a))return this.each(function(b){h(this).removeClass(a.call(this,
b,this.className))});if(k)for(k=(a||"").match(la)||[];g>f;f++)if(b=this[f],c=1===b.nodeType&&(b.className?(" "+b.className+" ").replace($a," "):"")){for(e=0;d=k[e++];)for(;0<=c.indexOf(" "+d+" ");)c=c.replace(" "+d+" "," ");c=a?h.trim(c):"";b.className!==c&&(b.className=c)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(h.isFunction(a)?function(c){h(this).toggleClass(a.call(this,c,this.className,b),b)}:
function(){if("string"===c)for(var b,d=0,e=h(this),f=a.match(la)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else("undefined"===c||"boolean"===c)&&(this.className&&h._data(this,"__className__",this.className),this.className=this.className||!1===a?"":h._data(this,"__className__")||"")})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;c>b;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace($a," ").indexOf(a))return!0;return!1}});h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){h.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});h.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var ab=h.now(),bb=/\?/,kc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
h.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=h.trim(b+"");return e&&!h.trim(e.replace(kc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():h.error("Invalid JSON: "+b)};h.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(I){c=void 0}return c&&c.documentElement&&
!c.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+b),c};var lc=/#.*$/,ub=/([?&])_=[^&]*/,mc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,nc=/^(?:GET|HEAD)$/,oc=/^\/\//,vb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wb={},Ua={},xb="*/".concat("*");try{var sa=location.href}catch(k){sa=B.createElement("a"),sa.href="",sa=sa.href}var Ba=vb.exec(sa.toLowerCase())||[];h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:sa,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ba[1]),
global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ea(ea(a,
h.ajaxSettings),b):ea(h.ajaxSettings,a)},ajaxPrefilter:N(wb),ajaxTransport:N(Ua),ajax:function(a,b){function c(a,b,c,d){var e,m,Z,w=b;if(2!==q){q=2;g&&clearTimeout(g);k=void 0;f=d||"";N.readyState=0<a?4:0;d=200<=a&&300>a||304===a;if(c){var C=n;for(var t=N,x,P,v,y,Y=C.contents,u=C.dataTypes;"*"===u[0];)u.shift(),void 0===P&&(P=C.mimeType||t.getResponseHeader("Content-Type"));if(P)for(y in Y)if(Y[y]&&Y[y].test(P)){u.unshift(y);break}if(u[0]in c)v=u[0];else{for(y in c){if(!u[0]||C.converters[y+" "+u[0]]){v=
y;break}x||(x=y)}v=v||x}C=v?(v!==u[0]&&u.unshift(v),c[v]):void 0}a:{c=n;x=C;P=N;v=d;var I,H,S;C={};t=c.dataTypes.slice();if(t[1])for(I in c.converters)C[I.toLowerCase()]=c.converters[I];for(y=t.shift();y;)if(c.responseFields[y]&&(P[c.responseFields[y]]=x),!S&&v&&c.dataFilter&&(x=c.dataFilter(x,c.dataType)),S=y,y=t.shift())if("*"===y)y=S;else if("*"!==S&&S!==y){if(I=C[S+" "+y]||C["* "+y],!I)for(M in C)if(H=M.split(" "),H[1]===y&&(I=C[S+" "+H[0]]||C["* "+H[0]])){!0===I?I=C[M]:!0!==C[M]&&(y=H[0],t.unshift(H[1]));
break}if(!0!==I)if(I&&c["throws"])x=I(x);else try{x=I(x)}catch(Ob){var M={state:"parsererror",error:I?Ob:"No conversion from "+S+" to "+y};break a}}M={state:"success",data:x}}C=M;d?(n.ifModified&&(Z=N.getResponseHeader("Last-Modified"),Z&&(h.lastModified[A]=Z),Z=N.getResponseHeader("etag"),Z&&(h.etag[A]=Z)),204===a||"HEAD"===n.type?w="nocontent":304===a?w="notmodified":(w=C.state,e=C.data,m=C.error,d=!m)):(m=w,(a||!w)&&(w="error",0>a&&(a=0)));N.status=a;N.statusText=(b||w)+"";d?F.resolveWith(z,[e,
w,N]):F.rejectWith(z,[N,w,m]);N.statusCode(D);D=void 0;l&&p.trigger(d?"ajaxSuccess":"ajaxError",[N,n,d?e:m]);r.fireWith(z,[N,w]);l&&(p.trigger("ajaxComplete",[N,n]),--h.active||h.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=void 0);b=b||{};var d,e,f,g,l,k,m,n=h.ajaxSetup({},b),z=n.context||n,p=n.context&&(z.nodeType||z.jquery)?h(z):h.event,F=h.Deferred(),r=h.Callbacks("once memory"),D=n.statusCode||{},Z={},C={},q=0,t="canceled",N={readyState:0,getResponseHeader:function(a){var b;if(2===
q){if(!m)for(m={};b=mc.exec(f);)m[b[1].toLowerCase()]=b[2];b=m[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===q?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return q||(a=C[c]=C[c]||a,Z[a]=b),this},overrideMimeType:function(a){return q||(n.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>q)for(b in a)D[b]=[D[b],a[b]];else N.always(a[N.status]);return this},abort:function(a){a=a||t;return k&&k.abort(a),c(0,a),this}};if(F.promise(N).complete=
r.add,N.success=N.done,N.error=N.fail,n.url=((a||n.url||sa)+"").replace(lc,"").replace(oc,Ba[1]+"//"),n.type=b.method||b.type||n.method||n.type,n.dataTypes=h.trim(n.dataType||"*").toLowerCase().match(la)||[""],null==n.crossDomain&&(d=vb.exec(n.url.toLowerCase()),n.crossDomain=!(!d||d[1]===Ba[1]&&d[2]===Ba[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Ba[3]||("http:"===Ba[1]?"80":"443")))),n.data&&n.processData&&"string"!=typeof n.data&&(n.data=h.param(n.data,n.traditional)),Y(wb,n,b,N),2===q)return N;
(l=n.global)&&0===h.active++&&h.event.trigger("ajaxStart");n.type=n.type.toUpperCase();n.hasContent=!nc.test(n.type);var A=n.url;n.hasContent||(n.data&&(A=n.url+=(bb.test(A)?"&":"?")+n.data,delete n.data),!1===n.cache&&(n.url=ub.test(A)?A.replace(ub,"$1_="+ab++):A+(bb.test(A)?"&":"?")+"_="+ab++));n.ifModified&&(h.lastModified[A]&&N.setRequestHeader("If-Modified-Since",h.lastModified[A]),h.etag[A]&&N.setRequestHeader("If-None-Match",h.etag[A]));(n.data&&n.hasContent&&!1!==n.contentType||b.contentType)&&
N.setRequestHeader("Content-Type",n.contentType);N.setRequestHeader("Accept",n.dataTypes[0]&&n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+("*"!==n.dataTypes[0]?", "+xb+"; q=0.01":""):n.accepts["*"]);for(e in n.headers)N.setRequestHeader(e,n.headers[e]);if(n.beforeSend&&(!1===n.beforeSend.call(z,N,n)||2===q))return N.abort();t="abort";for(e in{success:1,error:1,complete:1})N[e](n[e]);if(k=Y(Ua,n,b,N)){N.readyState=1;l&&p.trigger("ajaxSend",[N,n]);n.async&&0<n.timeout&&(g=setTimeout(function(){N.abort("timeout")},
n.timeout));try{q=1,k.send(Z,c)}catch(hb){if(!(2>q))throw hb;c(-1,hb)}}else c(-1,"No Transport");return N},getJSON:function(a,b,c){return h.get(a,b,c,"json")},getScript:function(a,b){return h.get(a,void 0,b,"script")}});h.each(["get","post"],function(a,b){h[b]=function(a,c,d,e){return h.isFunction(c)&&(e=e||d,d=c,c=void 0),h.ajax({url:a,type:b,dataType:e,data:c,success:d})}});h.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){h.fn[b]=function(a){return this.on(b,
a)}});h._evalUrl=function(a){return h.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};h.fn.extend({wrapAll:function(a){if(h.isFunction(a))return this.each(function(b){h(this).wrapAll(a.call(this,b))});if(this[0]){var b=h(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(h.isFunction(a)?
function(b){h(this).wrapInner(a.call(this,b))}:function(){var b=h(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=h.isFunction(a);return this.each(function(c){h(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}});h.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!u.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||
h.css(a,"display"))};h.expr.filters.visible=function(a){return!h.expr.filters.hidden(a)};var pc=/%20/g,Ib=/\[\]$/,yb=/\r?\n/g,qc=/^(?:submit|button|image|reset|file)$/i,rc=/^(?:input|select|textarea|keygen)/i;h.param=function(a,b){var c,d=[],e=function(a,b){b=h.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(a)||a.jquery&&!h.isPlainObject(a))h.each(a,function(){e(this.name,this.value)});
else for(c in a)V(c,a[c],b,e);return d.join("&").replace(pc,"+")};h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=h.prop(this,"elements");return a?h.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!h(this).is(":disabled")&&rc.test(this.nodeName)&&!qc.test(a)&&(this.checked||!Ta.test(a))}).map(function(a,b){a=h(this).val();return null==a?null:h.isArray(a)?h.map(a,function(a){return{name:b.name,
value:a.replace(yb,"\r\n")}}):{name:b.name,value:a.replace(yb,"\r\n")}}).get()}});h.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Ja()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(p){}b=void 0}return b}:Ja;var sc=0,Ra={},Sa=h.ajaxSettings.xhr();a.ActiveXObject&&h(a).on("unload",function(){for(var a in Ra)Ra[a](void 0,!0)});u.cors=!!Sa&&"withCredentials"in Sa;(Sa=u.ajax=!!Sa)&&h.ajaxTransport(function(a){if(!a.crossDomain||
u.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++sc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null);b=function(c,e){if(b&&(e||4===f.readyState))if(delete Ra[g],b=void 0,f.onreadystatechange=h.noop,e)4!==
f.readyState&&f.abort();else{var l={};var k=f.status;"string"==typeof f.responseText&&(l.text=f.responseText);try{var m=f.statusText}catch(Hb){m=""}k||!a.isLocal||a.crossDomain?1223===k&&(k=204):k=l.text?200:404}l&&d(k,m,l,f.getAllResponseHeaders())};a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Ra[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},
converters:{"text script":function(a){return h.globalEval(a),a}}});h.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});h.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=B.head||h("head")[0]||B.documentElement;return{send:function(d,e){b=B.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&
(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))};c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var zb=[],cb=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=zb.pop()||h.expando+"_"+ab++;return this[a]=!0,a}});h.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,l=!1!==b.jsonp&&(cb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&
cb.test(b.data)&&"data");return l||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=h.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,l?b[l]=b[l].replace(cb,"$1"+e):!1!==b.jsonp&&(b.url+=(bb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||h.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f;b[e]&&(b.jsonpCallback=c.jsonpCallback,zb.push(e));g&&h.isFunction(f)&&f(g[0]);g=f=void 0}),"script"):
void 0});h.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1);b=b||B;var d=jb.exec(a);c=!c&&[];return d?[b.createElement(d[1])]:(d=h.buildFragment([a],b,c),c&&c.length&&h(c).remove(),h.merge([],d.childNodes))};var Ab=h.fn.load;h.fn.load=function(a,b,c){if("string"!=typeof a&&Ab)return Ab.apply(this,arguments);var d,e,f,g=this,l=a.indexOf(" ");return 0<=l&&(d=h.trim(a.slice(l,a.length)),a=a.slice(0,l)),h.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&
(f="POST"),0<g.length&&h.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments;g.html(d?h("<div>").append(h.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this};h.expr.filters.animated=function(a){return h.grep(h.timers,function(b){return a===b.elem}).length};var Bb=a.document.documentElement;h.offset={setOffset:function(a,b,c){var d,e,f,g=h.css(a,"position"),l=h(a),k={};"static"===g&&(a.style.position="relative");var m=l.offset();var n=
h.css(a,"top");var z=h.css(a,"left");("absolute"===g||"fixed"===g)&&-1<h.inArray("auto",[n,z])?(d=l.position(),f=d.top,e=d.left):(f=parseFloat(n)||0,e=parseFloat(z)||0);h.isFunction(b)&&(b=b.call(a,c,m));null!=b.top&&(k.top=b.top-m.top+f);null!=b.left&&(k.left=b.left-m.left+e);"using"in b?b.using.call(a,k):l.css(k)}};h.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){h.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;
if(f)return b=f.documentElement,h.contains(b,e)?("undefined"!==typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=ma(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===h.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),h.nodeName(a[0],"html")||(c=a.offset()),c.top+=h.css(a[0],"borderTopWidth",!0),
c.left+=h.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-h.css(d,"marginTop",!0),left:b.left-c.left-h.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Bb;a&&!h.nodeName(a,"html")&&"static"===h.css(a,"position");)a=a.offsetParent;return a||Bb})}});h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);h.fn[a]=function(d){return ra(this,function(a,d,e){var f=ma(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:
a[d]:void(f?f.scrollTo(c?h(f).scrollLeft():e,c?e:h(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}});h.each(["top","left"],function(a,b){h.cssHooks[b]=C(u.pixelPosition,function(a,c){return c?(c=ia(a,b),Ha.test(c)?h(a).position()[b]+"px":c):void 0})});h.each({Height:"height",Width:"width"},function(a,b){h.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){h.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return ra(this,function(b,
c,d){var e;return h.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?h.css(b,c,g):h.style(b,c,d,g)},b,f?d:void 0,f,null)}})});h.fn.size=function(){return this.length};h.fn.andSelf=h.fn.addBack;"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var tc=a.jQuery,uc=a.$;return h.noConflict=function(b){return a.$===h&&(a.$=uc),b&&a.jQuery===
h&&(a.jQuery=tc),h},"undefined"===typeof b&&(a.jQuery=a.$=h),h});/*
 Bootstrap v3.3.5 (http://getbootstrap.com)
 Copyright 2011-2015 Twitter, Inc.
 Licensed under the MIT license
*/
if("undefined"==typeof jQuery)throw Error("Bootstrap's JavaScript requires jQuery");+function(a){a=a.fn.jquery.split(" ")[0].split(".");if(2>a[0]&&9>a[1]||1==a[0]&&9==a[1]&&1>a[2])throw Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);
+function(a){function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},e;for(e in b)if(void 0!==a.style[e])return{end:b[e]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,e=this;a(this).one("bsTransitionEnd",function(){c=!0});return setTimeout(function(){c||a(e).trigger(a.support.transition.end)},b),this};a(function(){a.support.transition=b();a.support.transition&&
(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);
+function(a){var b=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};b.VERSION="3.3.5";b.TRANSITION_DURATION=150;b.prototype.close=function(c){function e(){g.detach().trigger("closed.bs.alert").remove()}var d=a(this),f=d.attr("data-target");f||(f=d.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);c&&c.preventDefault();g.length||(g=d.closest(".alert"));g.trigger(c=a.Event("close.bs.alert"));c.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?
g.one("bsTransitionEnd",e).emulateTransitionEnd(b.TRANSITION_DURATION):e())};var c=a.fn.alert;a.fn.alert=function(c){return this.each(function(){var e=a(this),d=e.data("bs.alert");d||e.data("bs.alert",d=new b(this));"string"==typeof c&&d[c].call(e)})};a.fn.alert.Constructor=b;a.fn.alert.noConflict=function(){return a.fn.alert=c,this};a(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',b.prototype.close)}(jQuery);
+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),g="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,g));"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b);this.options=a.extend({},c.DEFAULTS,d);this.isLoading=!1};c.VERSION="3.3.5";c.DEFAULTS={loadingText:"loading..."};c.prototype.setState=function(b){var c=this.$element,e=c.is("input")?"val":"html",g=c.data();b+="Text";null==g.resetText&&c.data("resetText",c[e]());setTimeout(a.proxy(function(){c[e](null==
g[b]?this.options[b]:g[b]);"loadingText"==b?(this.isLoading=!0,c.addClass("disabled").attr("disabled","disabled")):this.isLoading&&(this.isLoading=!1,c.removeClass("disabled").removeAttr("disabled"))},this),0)};c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&
(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active"));c.prop("checked",this.$element.hasClass("active"));a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var g=a.fn.button;a.fn.button=b;a.fn.button.Constructor=c;a.fn.button.noConflict=function(){return a.fn.button=g,this};a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);
d.hasClass("btn")||(d=d.closest(".btn"));b.call(d,"toggle");a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery);
+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),g=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),n="string"==typeof b?b:g.slide;e||d.data("bs.carousel",e=new c(this,g));"number"==typeof b?e.to(b):n?e[n]():g.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.$items=this.$active=this.interval=this.sliding=this.paused=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",
a.proxy(this.keydown,this));"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.5";c.TRANSITION_DURATION=600;c.DEFAULTS={interval:5E3,pause:"hover",wrap:!0,keyboard:!0};c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}};
c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this};c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)};c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b);return("prev"==a&&0===c||"next"==a&&c==this.$items.length-1)&&!this.options.wrap?b:this.$items.eq((c+
("prev"==a?-1:1))%this.$items.length)};c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))};c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),
this.cycle(!0)),this.interval=clearInterval(this.interval),this};c.prototype.next=function(){return this.sliding?void 0:this.slide("next")};c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")};c.prototype.slide=function(b,e){var d=this.$element.find(".item.active"),f=e||this.getItemForDirection(b,d);e=this.interval;var g="next"==b?"left":"right",r=this;if(f.hasClass("active"))return this.sliding=!1;var t=f[0],v=a.Event("slide.bs.carousel",{relatedTarget:t,direction:g});if(this.$element.trigger(v),
!v.isDefaultPrevented()){if(this.sliding=!0,e&&this.pause(),this.$indicators.length)this.$indicators.find(".active").removeClass("active"),(v=a(this.$indicators.children()[this.getItemIndex(f)]))&&v.addClass("active");var y=a.Event("slid.bs.carousel",{relatedTarget:t,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,d.addClass(g),f.addClass(g),d.one("bsTransitionEnd",function(){f.removeClass([b,g].join(" ")).addClass("active");d.removeClass(["active",
g].join(" "));r.sliding=!1;setTimeout(function(){r.$element.trigger(y)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(d.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(y)),e&&this.cycle(),this}};var g=a.fn.carousel;a.fn.carousel=b;a.fn.carousel.Constructor=c;a.fn.carousel.noConflict=function(){return a.fn.carousel=g,this};var e=function(c){var d,e=a(this),g=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));g.hasClass("carousel")&&(d=
a.extend({},g.data(),e.data()),(e=e.attr("data-slide-to"))&&(d.interval=!1),b.call(g,d),e&&g.data("bs.carousel").to(e),c.preventDefault())};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e);a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery);
+function(a){function b(b){var c;b=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(b)}function c(b){return this.each(function(){var c=a(this),d=c.data("bs.collapse"),e=a.extend({},g.DEFAULTS,c.data(),"object"==typeof b&&b);!d&&e.toggle&&/show|hide/.test(b)&&(e.toggle=!1);d||c.data("bs.collapse",d=new g(this,e));"string"==typeof b&&d[b]()})}var g=function(b,c){this.$element=a(b);this.options=a.extend({},g.DEFAULTS,c);this.$trigger=a('[data-toggle="collapse"][href="#'+
b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()};g.VERSION="3.3.5";g.TRANSITION_DURATION=350;g.DEFAULTS={toggle:!0};g.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};g.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");
if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var l=a.Event("show.bs.collapse");if(this.$element.trigger(l),!l.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var m=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[m](0).attr("aria-expanded",!0);this.$trigger.removeClass("collapsed").attr("aria-expanded",!0);this.transitioning=1;b=function(){this.$element.removeClass("collapsing").addClass("collapse in")[m]("");this.transitioning=
0;this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return b.call(this);e=a.camelCase(["scroll",m].join("-"));this.$element.one("bsTransitionEnd",a.proxy(b,this)).emulateTransitionEnd(g.TRANSITION_DURATION)[m](this.$element[0][e])}}}};g.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){b=this.dimension();this.$element[b](this.$element[b]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",
!1);this.$trigger.addClass("collapsed").attr("aria-expanded",!1);this.transitioning=1;var c=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[b](0).one("bsTransitionEnd",a.proxy(c,this)).emulateTransitionEnd(g.TRANSITION_DURATION):c.call(this)}}};g.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};g.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+
this.options.parent+'"]').each(a.proxy(function(c,e){c=a(e);this.addAriaAndCollapsedClass(b(c),c)},this)).end()};g.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c);b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c;a.fn.collapse.Constructor=g;a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this};a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||
d.preventDefault();d=b(e);e=d.data("bs.collapse")?"toggle":e.data();c.call(d,e)})}(jQuery);
+function(a){function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&a(c))&&c.length?c:b.parent()}function c(c){c&&3===c.which||(a(g).remove(),a(e).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",
f))))}))}var g=".dropdown-backdrop",e='[data-toggle="dropdown"]',d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.VERSION="3.3.5";d.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);g={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",
g)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true");f.toggleClass("open").trigger("shown.bs.dropdown",g)}return!1}};d.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var f=b(d),g=f.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&f.find(e).trigger("focus"),d.trigger("click");d=f.find(".dropdown-menu li:not(.disabled):visible a");
d.length&&(f=d.index(c.target),38==c.which&&0<f&&f--,40==c.which&&f<d.length-1&&f++,~f||(f=0),d.eq(f).trigger("focus"))}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");e||c.data("bs.dropdown",e=new d(this));"string"==typeof b&&e[b].call(c)})};a.fn.dropdown.Constructor=d;a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this};a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",
e,d.prototype.toggle).on("keydown.bs.dropdown.data-api",e,d.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",d.prototype.keydown)}(jQuery);
+function(a){function b(b,d){return this.each(function(){var e=a(this),g=e.data("bs.modal"),m=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);g||e.data("bs.modal",g=new c(this,m));"string"==typeof b?g[b](d):m.show&&g.show(d)})}var c=function(b,c){this.options=c;this.$body=a(document.body);this.$element=a(b);this.$dialog=this.$element.find(".modal-dialog");this.originalBodyPad=this.isShown=this.$backdrop=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,
a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.5";c.TRANSITION_DURATION=300;c.BACKDROP_TRANSITION_DURATION=150;c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e);this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),
this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body);d.$element.show().scrollTop(0);d.adjustDialog();e&&d.$element[0].offsetWidth;
d.$element.addClass("in");d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))};c.prototype.hide=function(b){b&&b.preventDefault();b=a.Event("hide.bs.modal");this.$element.trigger(b);this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),
this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())};c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};c.prototype.escape=function(){this.isShown&&this.options.keyboard?
this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")};c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")};c.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$body.removeClass("modal-open");a.resetAdjustments();a.resetScrollbar();a.$element.trigger("hidden.bs.modal")})};
c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var g=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===
a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),g&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),b)g?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e=function(){d.removeBackdrop();b&&b()},a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):
e()):b&&b()};c.prototype.handleUpdate=function(){this.adjustDialog()};c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})};c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};c.prototype.checkScrollbar=function(){var a=window.innerWidth;a||(a=document.documentElement.getBoundingClientRect(),
a=a.right-Math.abs(a.left));this.bodyIsOverflowing=document.body.clientWidth<a;this.scrollbarWidth=this.measureScrollbar()};c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)};c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};c.prototype.measureScrollbar=function(){var a=document.createElement("div");
a.className="modal-scrollbar-measure";this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var g=a.fn.modal;a.fn.modal=b;a.fn.modal.Constructor=c;a.fn.modal.noConflict=function(){return a.fn.modal=g,this};a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),g=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,""));e=g.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},g.data(),d.data());d.is("a")&&
c.preventDefault();g.one("show.bs.modal",function(a){a.isDefaultPrevented()||g.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})});b.call(g,e,this)})}(jQuery);
+function(a){var b=function(a,b){this.inState=this.$element=this.hoverState=this.timeout=this.enabled=this.options=this.type=null;this.init("tooltip",a,b)};b.VERSION="3.3.5";b.TRANSITION_DURATION=150;b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};b.prototype.init=function(b,c,
d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");b=this.options.trigger.split(" ");
for(c=b.length;c--;)if(d=b[c],"click"==d)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=d){var e="hover"==d?"mouseleave":"focusout";this.$element.on(("hover"==d?"mouseenter":"focusin")+"."+this.type,this.options.selector,a.proxy(this.enter,this));this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};b.prototype.getDefaults=
function(){return b.DEFAULTS};b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b};b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,e){c[a]!=e&&(b[a]=e)}),b};b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,
this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())};b.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1};b.prototype.leave=
function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())};b.prototype.show=
function(){var c=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(c);var e=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(!c.isDefaultPrevented()&&e){var d=this;c=this.tip();e=this.getUID(this.type);this.setContent();c.attr("id",e);this.$element.attr("aria-describedby",e);this.options.animation&&c.addClass("fade");e="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement;
var f=/\s?auto?\s?/i,l=f.test(e);l&&(e=e.replace(f,"")||"top");c.detach().css({top:0,left:0,display:"block"}).addClass(e).data("bs."+this.type,this);this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);f=this.getPosition();var m=c[0].offsetWidth,n=c[0].offsetHeight;if(l){l=e;var r=this.getPosition(this.$viewport);e="bottom"==e&&f.bottom+n>r.bottom?"top":"top"==e&&f.top-n<r.top?"bottom":"right"==e&&f.right+m>r.width?
"left":"left"==e&&f.left-m<r.left?"right":e;c.removeClass(l).addClass(e)}f=this.getCalculatedOffset(e,f,m,n);this.applyPlacement(f,e);e=function(){var a=d.hoverState;d.$element.trigger("shown.bs."+d.type);d.hoverState=null;"out"==a&&d.leave(d)};a.support.transition&&this.$tip.hasClass("fade")?c.one("bsTransitionEnd",e).emulateTransitionEnd(b.TRANSITION_DURATION):e()}}};b.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,g=d[0].offsetHeight,m=parseInt(d.css("margin-top"),10),
n=parseInt(d.css("margin-left"),10);isNaN(m)&&(m=0);isNaN(n)&&(n=0);b.top+=m;b.left+=n;a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0);d.addClass("in");m=d[0].offsetWidth;n=d[0].offsetHeight;"top"==c&&n!=g&&(b.top=b.top+g-n);var r=this.getViewportAdjustedDelta(c,b,m,n);r.left?b.left+=r.left:b.top+=r.top;e=(c=/top|bottom/.test(c))?2*r.left-e+m:2*r.top-g+n;g=c?"offsetWidth":"offsetHeight";d.offset(b);this.replaceArrow(e,d[0][g],c)};
b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")};b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};b.prototype.hide=function(c){function e(){"in"!=d.hoverState&&f.detach();d.$element.removeAttr("aria-describedby").trigger("hidden.bs."+d.type);c&&c()}var d=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),
g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",e).emulateTransitionEnd(b.TRANSITION_DURATION):e(),this.hoverState=null,this)};b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};b.prototype.hasContent=function(){return this.getTitle()};b.prototype.getPosition=function(b){b=b||this.$element;var c=
b[0],d="BODY"==c.tagName;c=c.getBoundingClientRect();null==c.width&&(c=a.extend({},c,{width:c.right-c.left,height:c.bottom-c.top}));var f=d?{top:0,left:0}:b.offset();b={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()};d=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},c,b,d,f)};b.prototype.getCalculatedOffset=function(a,b,c,f){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-f,left:b.left+b.width/2-
c/2}:"left"==a?{top:b.top+b.height/2-f/2,left:b.left-c}:{top:b.top+b.height/2-f/2,left:b.left+b.width}};b.prototype.getViewportAdjustedDelta=function(a,b,c,f){var d={top:0,left:0};if(!this.$viewport)return d;var e=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);/right|left/.test(a)?(c=b.top-e-g.scroll,b=b.top+e-g.scroll+f,c<g.top?d.top=g.top-c:b>g.top+g.height&&(d.top=g.top+g.height-b)):(f=b.left-e,b=b.left+e+c,f<g.left?d.left=g.left-f:b>g.right&&(d.left=
g.left+g.width-b));return d};b.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};b.prototype.getUID=function(a){do a+=~~(1E6*Math.random());while(document.getElementById(a));return a};b.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};b.prototype.arrow=
function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};b.prototype.enable=function(){this.enabled=!0};b.prototype.disable=function(){this.enabled=!1};b.prototype.toggleEnabled=function(){this.enabled=!this.enabled};b.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)));b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):
c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)};b.prototype.destroy=function(){var a=this;clearTimeout(this.timeout);this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type);a.$tip&&a.$tip.detach();a.$tip=null;a.$arrow=null;a.$viewport=null})};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var e=a(this),d=e.data("bs.tooltip"),f="object"==typeof c&&c;!d&&/destroy|hide/.test(c)||(d||e.data("bs.tooltip",d=new b(this,f)),"string"!=typeof c||d[c]())})};
a.fn.tooltip.Constructor=b;a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery);
+function(a){var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw Error("Popover requires tooltip.js");b.VERSION="3.3.5";b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);b.prototype.constructor=b;b.prototype.getDefaults=function(){return b.DEFAULTS};
b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};b.prototype.hasContent=function(){return this.getTitle()||this.getContent()};b.prototype.getContent=function(){var a=this.$element,
b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var e=a(this),d=e.data("bs.popover"),f="object"==typeof c&&c;!d&&/destroy|hide/.test(c)||(d||e.data("bs.popover",d=new b(this,f)),"string"!=typeof c||d[c]())})};a.fn.popover.Constructor=b;a.fn.popover.noConflict=function(){return a.fn.popover=
c,this}}(jQuery);
+function(a){function b(c,d){this.$body=a(document.body);this.$scrollElement=a(a(c).is(document.body)?window:c);this.options=a.extend({},b.DEFAULTS,d);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this));this.refresh();this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),g="object"==typeof c&&c;e||d.data("bs.scrollspy",
e=new b(this,g));"string"==typeof c&&e[c]()})}b.VERSION="3.3.5";b.DEFAULTS={offset:10};b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};b.prototype.refresh=function(){var b=this,c="offset",f=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();a.isWindow(this.$scrollElement[0])||(c="position",f=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var b=
a(this);b=b.data("target")||b.attr("href");var d=/^#./.test(b)&&a(b);return d&&d.length&&d.is(":visible")&&[[d[c]().top+f,b]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})};b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),g=this.options.offset+c-this.$scrollElement.height(),m=this.offsets,n=this.targets,r=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=
g)return r!=(a=n[n.length-1])&&this.activate(a);if(r&&b<m[0])return this.activeTarget=null,this.clear();for(a=m.length;a--;)r!=n[a]&&b>=m[a]&&(void 0===m[a+1]||b<m[a+1])&&this.activate(n[a])};b.prototype.activate=function(b){this.activeTarget=b;this.clear();b=a(this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]').parents("li").addClass("active");b.parent(".dropdown-menu").length&&(b=b.closest("li.dropdown").addClass("active"));b.trigger("activate.bs.scrollspy")};b.prototype.clear=
function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var g=a.fn.scrollspy;a.fn.scrollspy=c;a.fn.scrollspy.Constructor=b;a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=g,this};a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery);
+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this));"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.5";c.TRANSITION_DURATION=150;c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),e=b.data("target");if(e||(e=b.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var g=c.find(".active:last a"),n=a.Event("hide.bs.tab",{relatedTarget:b[0]}),
r=a.Event("show.bs.tab",{relatedTarget:g[0]});(g.trigger(n),b.trigger(r),r.isDefaultPrevented()||n.isDefaultPrevented())||(e=a(e),this.activate(b.closest("li"),c),this.activate(e,e.parent(),function(){g.trigger({type:"hidden.bs.tab",relatedTarget:b[0]});b.trigger({type:"shown.bs.tab",relatedTarget:g[0]})}))}};c.prototype.activate=function(b,e,g){function d(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);
b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);l?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);g&&g()}var f=e.find("> .active"),l=g&&a.support.transition&&(f.length&&f.hasClass("fade")||!!e.find("> .fade").length);f.length&&l?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d();f.removeClass("in")};var g=
a.fn.tab;a.fn.tab=b;a.fn.tab.Constructor=c;a.fn.tab.noConflict=function(){return a.fn.tab=g,this};var e=function(c){c.preventDefault();b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery);
+function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),g="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,g));"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d);this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this));this.$element=a(b);this.pinnedOffset=this.unpin=this.affixed=null;this.checkPosition()};
c.VERSION="3.3.5";c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0,target:window};c.prototype.getState=function(a,b,c,g){var d=this.$target.scrollTop(),e=this.$element.offset(),f=this.$target.height();if(null!=c&&"top"==this.affixed)return c>d?"top":!1;if("bottom"==this.affixed)return null!=c?d+this.unpin<=e.top?!1:"bottom":a-g>=d+f?!1:"bottom";var l=null==this.affixed;e=l?d:e.top;return null!=c&&c>=d?"top":null!=g&&e+(l?f:b)>=a-g?"bottom":!1};c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;
this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop();return this.pinnedOffset=this.$element.offset().top-a};c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,f=d.top,g=d.bottom,m=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(g=f=d);"function"==typeof f&&(f=d.top(this.$element));
"function"==typeof g&&(g=d.bottom(this.$element));d=this.getState(m,b,f,g);if(this.affixed!=d){null!=this.unpin&&this.$element.css("top","");f="affix"+(d?"-"+d:"");var n=a.Event(f+".bs.affix");if(this.$element.trigger(n),n.isDefaultPrevented())return;this.affixed=d;this.unpin="bottom"==d?this.getPinnedOffset():null;this.$element.removeClass(c.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}"bottom"==d&&this.$element.offset({top:m-b-g})}};var g=a.fn.affix;a.fn.affix=b;a.fn.affix.Constructor=
c;a.fn.affix.noConflict=function(){return a.fn.affix=g,this};a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{};null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom);null!=d.offsetTop&&(d.offset.top=d.offsetTop);b.call(c,d)})})}(jQuery);/*
 William DURAND <william.durand1@gmail.com>
 MIT Licensed

 GistID: 5705453

*/
(function(a,b){var c=function(a,c){var d=["https://api.flickr.com/services/feeds/photoset.gne?nsid=",c.id,"&set=",c.setId,"&format=json&jsoncallback=?"].join("");return b.getJSON(d).done(function(d){b.each(d.items,function(d,e){d=e.media.m.replace("_m","_b");b("<img />").attr("src",e.media.m).appendTo(a).wrap(c.container||"").wrap(['<a data-lightbox="true" href="',d,c.cssClass?'" class="'+c.cssClass:"",'" title="',e.title,'"></a>'].join(""))})})};b.fn.flickrPhotoStream=function(a){return c(b(this).get(),
a||{})}})(document,jQuery);(function(a){function b(a,b){return a.getAttribute("data-"+b)}function c(a){window.addEventListener&&window.addEventListener("message",function(b){a.id===b.data.sender&&(a.height=b.data.height)},!1)}function g(d,g){g=g||m;if(!g){var l=b(d,"theme")||t||"default";g=e+"cards/"+l+".html"}var y=b(d,"user");l=b(d,"repo");var v=b(d,"github");v&&(v=v.split("/"),v.length&&!y&&(y=v[0],l=l||v[1]));if(y){f+=1;v=b(d,"width");var q=b(d,"height"),x=b(d,"target"),A=b(d,"client-id")||n,z=b(d,"client-secret")||r,F=
"ghcard-"+y+"-"+f,D=a.createElement("iframe");D.setAttribute("id",F);D.setAttribute("frameborder",0);D.setAttribute("scrolling",0);D.setAttribute("allowtransparency",!0);g=g+"?user="+y+"&identity="+F;l&&(g+="&repo="+l);x&&(g+="&target="+x);A&&z&&(g+="&client_id="+A+"&client_secret="+z);D.src=g;D.width=v||Math.min(d.parentNode.clientWidth||400,400);q&&(D.height=q);c(D);d.parentNode.replaceChild(D,d);return D}}var e="//cdn.jsdelivr.net/github-cards/1.0.2/",d,f=0,l=a.getElementsByTagName("meta"),m,n,
r,t;for(d=0;d<l.length;d++){var v=l[d].getAttribute("name"),y=l[d].getAttribute("content");"gc:url"===v?m=y:"gc:base"===v?e=y:"gc:client-id"===v?n=y:"gc:client-secret"===v?r=y:"gc:theme"===v&&(t=y)}l=function(b){if(a.querySelectorAll)return a.querySelectorAll("."+b);var c=a.getElementsByTagName("div"),e=[];for(d=0;d<c.length;d++)~c[d].className.split(" ").indexOf(b)&&e.push(c[d]);return e}("github-card");for(d=0;d<l.length;d++)g(l[d]);window.githubCard&&(window.githubCard.render=g)})(document);/*
 http://creativecommons.org/licenses/by/2.5/
 - Free for use in both personal and commercial projects
 - Attribution requires leaving author name, author link, and the license info intact
*/
(function(){var a=jQuery,b=function(){function a(){this.fadeDuration=500;this.fitImagesInViewport=!0;this.resizeDuration=700;this.positionFromTop=50;this.showImageNumberLabel=!0;this.wrapAround=this.alwaysShowNavOnTouchDevices=!1}return a.prototype.albumLabel=function(a,b){return"Image "+a+" of "+b},a}(),c=function(){function b(a){this.options=a;this.album=[];this.currentImageIndex=void 0;this.init()}return b.prototype.init=function(){this.enable();this.build()},b.prototype.enable=function(){var b=
this;a("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(c){return b.start(a(c.currentTarget)),!1})},b.prototype.build=function(){var b=this;a("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(a("body"));
this.$lightbox=a("#lightbox");this.$overlay=a("#lightboxOverlay");this.$outerContainer=this.$lightbox.find(".lb-outerContainer");this.$container=this.$lightbox.find(".lb-container");this.containerTopPadding=parseInt(this.$container.css("padding-top"),10);this.containerRightPadding=parseInt(this.$container.css("padding-right"),10);this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10);this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10);this.$overlay.hide().on("click",
function(){return b.end(),!1});this.$lightbox.hide().on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1});this.$outerContainer.on("click",function(c){return"lightbox"===a(c.target).attr("id")&&b.end(),!1});this.$lightbox.find(".lb-prev").on("click",function(){return b.changeImage(0===b.currentImageIndex?b.album.length-1:b.currentImageIndex-1),!1});this.$lightbox.find(".lb-next").on("click",function(){return b.changeImage(b.currentImageIndex===b.album.length-1?0:b.currentImageIndex+
1),!1});this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return b.end(),!1})},b.prototype.start=function(b){function c(a){e.album.push({link:a.attr("href"),title:a.attr("data-title")||a.attr("title")})}var e=this,g=a(window);g.on("resize",a.proxy(this.sizeOverlay,this));a("select, object, embed").css({visibility:"hidden"});this.sizeOverlay();this.album=[];var m,n=0;if(m=b.attr("data-lightbox")){m=a(b.prop("tagName")+'[data-lightbox="'+m+'"]');for(var r=0;r<m.length;r=++r)c(a(m[r])),
m[r]===b[0]&&(n=r)}else if("lightbox"===b.attr("rel"))c(b);else for(m=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]'),r=0;r<m.length;r=++r)c(a(m[r])),m[r]===b[0]&&(n=r);b=g.scrollTop()+this.options.positionFromTop;g=g.scrollLeft();this.$lightbox.css({top:b+"px",left:g+"px"}).fadeIn(this.options.fadeDuration);this.changeImage(n)},b.prototype.changeImage=function(b){var c=this;this.disableKeyboardNav();var e=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration);a(".lb-loader").fadeIn("slow");
this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();this.$outerContainer.addClass("animating");var g=new Image;g.onload=function(){var d,f,l,t,v,y;e.attr("src",c.album[b].link);a(g);e.width(g.width);e.height(g.height);c.options.fitImagesInViewport&&(y=a(window).width(),v=a(window).height(),t=y-c.containerLeftPadding-c.containerRightPadding-20,l=v-c.containerTopPadding-c.containerBottomPadding-120,(g.width>t||g.height>l)&&(g.width/t>g.height/
l?(f=t,d=parseInt(g.height/(g.width/f),10),e.width(f),e.height(d)):(d=l,f=parseInt(g.width/(g.height/d),10),e.width(f),e.height(d))));c.sizeContainer(e.width(),e.height())};g.src=this.album[b].link;this.currentImageIndex=b},b.prototype.sizeOverlay=function(){this.$overlay.width(a(window).width()).height(a(document).height())},b.prototype.sizeContainer=function(a,b){function c(){d.$lightbox.find(".lb-dataContainer").width(r);d.$lightbox.find(".lb-prevLink").height(t);d.$lightbox.find(".lb-nextLink").height(t);
d.showImage()}var d=this,e=this.$outerContainer.outerWidth(),g=this.$outerContainer.outerHeight(),r=a+this.containerLeftPadding+this.containerRightPadding,t=b+this.containerTopPadding+this.containerBottomPadding;e!==r||g!==t?this.$outerContainer.animate({width:r,height:t},this.options.resizeDuration,"swing",function(){c()}):c()},b.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide();this.$lightbox.find(".lb-image").fadeIn("slow");this.updateNav();this.updateDetails();this.preloadNeighboringImages();
this.enableKeyboardNav()},b.prototype.updateNav=function(){var a=!1;try{document.createEvent("TouchEvent"),a=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(d){}this.$lightbox.find(".lb-nav").show();1<this.album.length&&(this.options.wrapAround?(a&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),a&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<
this.album.length-1&&(this.$lightbox.find(".lb-next").show(),a&&this.$lightbox.find(".lb-next").css("opacity","1"))))},b.prototype.updateDetails=function(){var b=this;"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){location.href=a(this).attr("href")});1<this.album.length&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+
1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating");this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})},b.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},b.prototype.enableKeyboardNav=
function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))},b.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")},b.prototype.keyboardAction=function(a){a=a.keyCode;var b=String.fromCharCode(a).toLowerCase();27===a||b.match(/x|o|c/)?this.end():"p"===b||37===a?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):("n"===b||39===a)&&(this.currentImageIndex!==this.album.length-
1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},b.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);this.$lightbox.fadeOut(this.options.fadeDuration);this.$overlay.fadeOut(this.options.fadeDuration);a("select, object, embed").css({visibility:"visible"})},b}();a(function(){var a=new b;new c(a)})}).call(this);var mr_firstSectionHeight,mr_nav,mr_fixedAt,mr_navOuterHeight,mr_navScrolled=!1,mr_navFixed=!1,mr_outOfSight=!1,mr_floatingProjectSections,mr_scrollTop=0;
$(document).ready(function(){function a(a){var b,c;$(a).find('.validate-required[type="checkbox"]').each(function(){$('[name="'+$(this).attr("name")+'"]:checked').length||(c=1,b=$(this).attr("name").replace("[]",""),a.find(".form-error").text("Please tick at least one "+b+" box."))});$(a).find(".validate-required").each(function(){""===$(this).val()?($(this).addClass("field-error"),c=1):$(this).removeClass("field-error")});$(a).find(".validate-email").each(function(){/(.+)@(.+){2,}\.(.+){2,}/.test($(this).val())?
$(this).removeClass("field-error"):($(this).addClass("field-error"),c=1)});a.find(".field-error").length||a.find(".form-error").fadeOut(1E3);return c}function b(a){return decodeURIComponent(((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)")).exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}$(".inner-link").each(function(){"#"!==$(this).attr("href").charAt(0)&&$(this).removeClass("inner-link")});$(".inner-link").length&&$(".inner-link").smoothScroll({offset:-55,speed:800});addEventListener("scroll",
function(){mr_scrollTop=window.pageYOffset},!1);$(".background-image-holder").each(function(){var a=$(this).children("img").attr("src");$(this).css("background",'url("'+a+'")');$(this).children("img").hide();$(this).css("background-position","initial")});setTimeout(function(){$(".background-image-holder").each(function(){$(this).addClass("fadeIn")})},200);$('[data-toggle="tooltip"]').tooltip();$("ul[data-bullet]").each(function(){var a=$(this).attr("data-bullet");$(this).find("li").prepend('<i class="'+
a+'"></i>')});$(".progress-bar").each(function(){$(this).css("width",$(this).attr("data-progress")+"%")});$("nav").hasClass("fixed")||$("nav").hasClass("absolute")?$("body").addClass("nav-is-overlay"):($(".nav-container").css("min-height",$("nav").outerHeight(!0)),$(window).resize(function(){$(".nav-container").css("min-height",$("nav").outerHeight(!0))}),768<$(window).width()&&$(".parallax:nth-of-type(1) .background-image-holder").css("top",-$("nav").outerHeight(!0)),768<$(window).width()&&$("section.fullscreen:nth-of-type(1)").css("height",
$(window).height()-$("nav").outerHeight(!0)));$("nav").hasClass("bg-dark")&&$(".nav-container").addClass("bg-dark");mr_nav=$("body .nav-container nav:first");mr_navOuterHeight=$("body .nav-container nav:first").outerHeight();mr_fixedAt="undefined"!==typeof mr_nav.attr("data-fixed-at")?parseInt(mr_nav.attr("data-fixed-at").replace("px","")):parseInt($("section:nth-of-type(1)").outerHeight());window.addEventListener("scroll",updateNav,!1);$(".menu > li > ul").each(function(){var a=$(this).offset(),
b=a.left+$(this).outerWidth(!0);b>$(window).width()&&!$(this).hasClass("mega-menu")?$(this).addClass("make-right"):b>$(window).width()&&$(this).hasClass("mega-menu")&&(a=$(window).width()-a.left,a=$(this).outerWidth(!0)-a,$(this).css("margin-left",-a))});$(".mobile-toggle").click(function(){$(".nav-bar").toggleClass("nav-open");$(this).toggleClass("active")});$(".menu li").click(function(a){a||(a=window.event);a.stopPropagation();$(this).find("ul").length?$(this).toggleClass("toggle-sub"):$(this).parents(".toggle-sub").removeClass("toggle-sub")});
$(".menu li a").click(function(){$(this).hasClass("inner-link")&&$(this).closest(".nav-bar").removeClass("nav-open")});$(".module.widget-handle").click(function(){$(this).toggleClass("toggle-widget-handle")});$(".search-widget-handle .search-form input").click(function(a){a||(a=window.event);a.stopPropagation()});$(".offscreen-toggle").length?$("body").addClass("has-offscreen-nav"):$("body").removeClass("has-offscreen-nav");$(".offscreen-toggle").click(function(){$(".main-container").toggleClass("reveal-nav");
$("nav").toggleClass("reveal-nav");$(".offscreen-container").toggleClass("reveal-nav")});$(".main-container").click(function(){$(this).hasClass("reveal-nav")&&($(this).removeClass("reveal-nav"),$(".offscreen-container").removeClass("reveal-nav"),$("nav").removeClass("reveal-nav"))});$(".offscreen-container a").click(function(){$(".offscreen-container").removeClass("reveal-nav");$(".main-container").removeClass("reveal-nav");$("nav").removeClass("reveal-nav")});$(window).load(function(){$(".projects").each(function(){var a=
"";$(this).find(".project").each(function(){$(this).attr("data-filter").split(",").forEach(function(b){-1==a.indexOf(b)&&(a+='<li data-filter="'+b+'">'+capitaliseFirstLetter(b)+"</li>")});$(this).closest(".projects").find("ul.filters").empty().append('<li data-filter="all" class="active">All</li>').append(a)})});$(".filters li").click(function(){var a=$(this).attr("data-filter");$(this).closest(".filters").find("li").removeClass("active");$(this).addClass("active");$(this).closest(".projects").find(".project").each(function(){-1==
$(this).attr("data-filter").indexOf(a)?$(this).addClass("inactive"):$(this).removeClass("inactive")});"all"==a&&$(this).closest(".projects").find(".project").removeClass("inactive")})});jQuery(".tweets-feed").each(function(a){jQuery(this).attr("id","tweets-"+a)}).each(function(a){var b={id:jQuery("#tweets-"+a).attr("data-widget-id"),domId:"",maxTweets:jQuery("#tweets-"+a).attr("data-amount"),enableLinks:!0,showUser:!0,showTime:!0,dateFunction:"",showRetweet:!1,customCallback:function(b){for(var c=
b.length,d=0,e=document.getElementById("tweets-"+a),f='<ul class="slides">';d<c;)f+="<li>"+b[d]+"</li>",d++;f+="</ul>";return e.innerHTML=f}};twitterFetcher.fetch(b)});$(".flickr-feed").length&&$(".flickr-feed").each(function(){var a=$(this).attr("data-user-id"),b=$(this).attr("data-album-id");$(this).flickrPhotoStream({id:a,setId:b,container:'<li class="masonry-item" />'});setTimeout(function(){initializeMasonry();window.dispatchEvent(new Event("resize"))},1E3)});$(window).load(function(){$(".slider-all-controls, .slider-paging-controls, .slider-arrow-controls, .slider-thumb-controls, .logo-carousel").length&&
($(".slider-all-controls").flexslider({start:function(a){a.find(".slides li:first-child").find(".fs-vid-background video").length&&a.find(".slides li:first-child").find(".fs-vid-background video").get(0).play()},after:function(a){a.find(".fs-vid-background video").length&&(a.find("li:not(.flex-active-slide)").find(".fs-vid-background video").length&&a.find("li:not(.flex-active-slide)").find(".fs-vid-background video").get(0).pause(),a.find(".flex-active-slide").find(".fs-vid-background video").length&&
a.find(".flex-active-slide").find(".fs-vid-background video").get(0).play())}}),$(".slider-paging-controls").flexslider({animation:"slide",directionNav:!1}),$(".slider-arrow-controls").flexslider({controlNav:!1}),$(".slider-thumb-controls .slides li").each(function(){var a=$(this).find("img").attr("src");$(this).attr("data-thumb",a)}),$(".slider-thumb-controls").flexslider({animation:"slide",controlNav:"thumbnails",directionNav:!0}),$(".logo-carousel").flexslider({minItems:1,maxItems:4,move:1,itemWidth:200,
itemMargin:0,animation:"slide",slideshow:!0,slideshowSpeed:3E3,directionNav:!1,controlNav:!1}));$(".lightbox-grid li a").each(function(){var a=$(this).closest(".lightbox-grid").attr("data-gallery-title");$(this).attr("data-lightbox",a)})});$("iframe[data-provider]").each(function(){var a=jQuery(this).attr("data-provider"),b=jQuery(this).attr("data-video-id"),c=jQuery(this).attr("data-autoplay");"vimeo"==a?(a="http://player.vimeo.com/video/"+b+"?badge=0&title=0&byline=0&title=0&autoplay="+c,$(this).attr("data-src",
a)):"youtube"==a?(a="https://www.youtube.com/embed/"+b+"?showinfo=0&autoplay="+c,$(this).attr("data-src",a)):console.log("Only Vimeo and Youtube videos are supported at this time")});jQuery(".foundry_modal[modal-link]").remove();$(".foundry_modal").length&&!jQuery(".modal-screen").length&&jQuery("<div />").addClass("modal-screen").appendTo("body");jQuery(".foundry_modal").click(function(){jQuery(this).addClass("modal-acknowledged")});jQuery(document).on("wheel mousewheel scroll",".foundry_modal, .modal-screen",
function(a){$(this).get(0).scrollTop+=a.originalEvent.deltaY;return!1});$(".modal-container:not([modal-link])").each(function(a){if(jQuery(this).find("iframe[src]").length){jQuery(this).find(".foundry_modal").addClass("iframe-modal");var b=jQuery(this).find("iframe");b.attr("data-src",b.attr("src"));b.attr("src","")}jQuery(this).find(".btn-modal").attr("modal-link",a);jQuery('.foundry_modal[modal-link="'+a+'"]').length||jQuery(this).find(".foundry_modal").clone().appendTo("body").attr("modal-link",
a).prepend(jQuery('<i class="ti-close close-modal">'))});$(".btn-modal").unbind("click").click(function(){var a=jQuery('.foundry_modal[modal-link="'+jQuery(this).attr("modal-link")+'"]');var b="";jQuery(".modal-screen").toggleClass("reveal-modal");a.find("iframe").length&&("1"===a.find("iframe").attr("data-autoplay")&&(b="&autoplay=1"),a.find("iframe").attr("src",a.find("iframe").attr("data-src")+b));a.toggleClass("reveal-modal");return!1});$(".foundry_modal[data-time-delay]").each(function(){var a=
$(this),b=a.attr("data-time-delay");a.prepend($('<i class="ti-close close-modal">'));"undefined"!=typeof a.attr("data-cookie")?mr_cookies.hasItem(a.attr("data-cookie"))||setTimeout(function(){a.addClass("reveal-modal");$(".modal-screen").addClass("reveal-modal")},b):setTimeout(function(){a.addClass("reveal-modal");$(".modal-screen").addClass("reveal-modal")},b)});$(".foundry_modal[data-show-on-exit]").each(function(){var a=$(this),b=$(a.attr("data-show-on-exit"));$(b).length&&(a.prepend($('<i class="ti-close close-modal">')),
$(document).on("mouseleave",b,function(){$("body .reveal-modal").length||("undefined"!==typeof a.attr("data-cookie")?mr_cookies.hasItem(a.attr("data-cookie"))||(a.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")):(a.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")))}))});$(".foundry_modal[data-hide-after]").each(function(){var a=$(this),b=a.attr("data-hide-after");"undefined"!=typeof a.attr("data-cookie")?mr_cookies.hasItem(a.attr("data-cookie"))||setTimeout(function(){a.hasClass("modal-acknowledged")||
(a.removeClass("reveal-modal"),$(".modal-screen").removeClass("reveal-modal"))},b):setTimeout(function(){a.hasClass("modal-acknowledged")||(a.removeClass("reveal-modal"),$(".modal-screen").removeClass("reveal-modal"))},b)});jQuery(".close-modal:not(.modal-strip .close-modal)").unbind("click").click(function(){var a=jQuery(this).closest(".foundry_modal");a.toggleClass("reveal-modal");"undefined"!==typeof a.attr("data-cookie")&&mr_cookies.setItem(a.attr("data-cookie"),"true",Infinity);a.find("iframe").length&&
a.find("iframe").attr("src","");jQuery(".modal-screen").removeClass("reveal-modal")});jQuery(".modal-screen").unbind("click").click(function(){jQuery(".foundry_modal.reveal-modal").find("iframe").length&&jQuery(".foundry_modal.reveal-modal").find("iframe").attr("src","");jQuery(".foundry_modal.reveal-modal").toggleClass("reveal-modal");jQuery(this).toggleClass("reveal-modal")});jQuery(document).keyup(function(a){27==a.keyCode&&(jQuery(".foundry_modal").find("iframe").length&&jQuery(".foundry_modal").find("iframe").attr("src",
""),jQuery(".foundry_modal").removeClass("reveal-modal"),jQuery(".modal-screen").removeClass("reveal-modal"))});jQuery(".modal-strip").each(function(){jQuery(this).find(".close-modal").length||jQuery(this).append(jQuery('<i class="ti-close close-modal">'));var a=jQuery(this);"undefined"!=typeof a.attr("data-cookie")?mr_cookies.hasItem(a.attr("data-cookie"))||setTimeout(function(){a.addClass("reveal-modal")},1E3):setTimeout(function(){a.addClass("reveal-modal")},1E3)});jQuery(".modal-strip .close-modal").click(function(){var a=
jQuery(this).closest(".modal-strip");"undefined"!=typeof a.attr("data-cookie")&&mr_cookies.setItem(a.attr("data-cookie"),"true",Infinity);jQuery(this).closest(".modal-strip").removeClass("reveal-modal");return!1});jQuery(".close-iframe").click(function(){jQuery(this).closest(".modal-video").removeClass("reveal-modal");jQuery(this).siblings("iframe").attr("src","");jQuery(this).siblings("video").get(0).pause()});$(".checkbox-option").on("click",function(){$(this).toggleClass("checked");var a=$(this).find("input");
!1===a.prop("checked")?a.prop("checked",!0):a.prop("checked",!1)});$(".radio-option").click(function(){var a=$(this).hasClass("checked"),b=$(this).find("input").attr("name");a||($('input[name="'+b+'"]').parent().removeClass("checked"),$(this).addClass("checked"),$(this).find("input").prop("checked",!0))});$(".accordion li").click(function(){$(this).closest(".accordion").hasClass("one-open")?($(this).closest(".accordion").find("li").removeClass("active"),$(this).addClass("active")):$(this).toggleClass("active");
"undefined"!==typeof window.mr_parallax&&setTimeout(mr_parallax.windowLoad,500)});$(".tabbed-content").each(function(){$(this).append('<ul class="content"></ul>')});$(".tabs li").each(function(){var a=$(this),b="";a.is(".tabs>li:first-child")&&(b=' class="active"');b=a.find(".tab-content").detach().wrap("<li"+b+"></li>").parent();a.closest(".tabbed-content").find(".content").append(b)});$(".tabs li").click(function(){$(this).closest(".tabs").find("li").removeClass("active");$(this).addClass("active");
var a=$(this).index()+1;$(this).closest(".tabbed-content").find(".content>li").removeClass("active");$(this).closest(".tabbed-content").find(".content>li:nth-of-type("+a+")").addClass("active")});$("section").closest("body").find(".local-video-container .play-button").click(function(){$(this).siblings(".background-image-holder").removeClass("fadeIn");$(this).siblings(".background-image-holder").css("z-index",-1);$(this).css("opacity",0);$(this).siblings("video").get(0).play()});$("section").closest("body").find(".player").each(function(){$(this).closest("section").find(".container").addClass("fadeOut");
var a=$(this).attr("data-video-id"),b=$(this).attr("data-start-at");$(this).attr("data-property","{videoURL:'http://youtu.be/"+a+"',containment:'self',autoPlay:true, mute:true, startAt:"+b+", opacity:1, showControls:false}")});$(".player").length&&$(".player").each(function(){var a=$(this).closest("section"),b=a.find(".player");b.YTPlayer();b.on("YTPStart",function(b){a.find(".container").removeClass("fadeOut");a.find(".masonry-loader").addClass("fadeOut")})});$(".map-holder").click(function(){$(this).addClass("interact")});
$(".map-holder").length&&$(window).scroll(function(){$(".map-holder.interact").length&&$(".map-holder.interact").removeClass("interact")});$(".countdown").length&&$(".countdown").each(function(){var a=$(this).attr("data-date");$(this).countdown(a,function(a){$(this).text(a.strftime("%D days %H:%M:%S"))})});$("form.form-email, form.form-newsletter").submit(function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c=$(this).closest("form.form-email, form.form-newsletter"),d=c.find('button[type="submit"]');
b=0;var e=c.attr("original-error"),g;b=$(c).find("iframe.mail-list-form");c.find(".form-error, .form-success").remove();d.attr("data-text",d.text());c.append('<div class="form-error" style="display: none;">'+c.attr("data-error")+"</div>");c.append('<div class="form-success" style="display: none;">'+c.attr("data-success")+"</div>");var r=c.find(".form-error");var t=c.find(".form-success");c.addClass("attempted-submit");if(b.length&&"undefined"!==typeof b.attr("srcdoc")&&""!==b.attr("srcdoc")){console.log("Mail list form signup detected.");
"undefined"!==typeof e&&!1!==e&&r.html(e);e=$(c).find(".signup-email-field").val();var v=$(c).find(".signup-name-field").val();var y=$(c).find("input.signup-first-name-field").length?$(c).find("input.signup-first-name-field").val():$(c).find(".signup-name-field").val();var P=$(c).find(".signup-last-name-field").val();if(1!==a(c)){b=prepareSignup(b);b.find("#mce-EMAIL, #fieldEmail").val(e);b.find("#mce-LNAME, #fieldLastName").val(P);b.find("#mce-FNAME, #fieldFirstName").val(y);b.find("#mce-NAME, #fieldName").val(v);
c.removeClass("attempted-submit");r.fadeOut(200);d.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled");try{$.ajax({url:b.attr("action"),crossDomain:!0,data:b.serialize(),method:"GET",cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(a){"success"!=a.result&&200!=a.Status?(r.attr("original-error",r.text()),r.html(a.msg).fadeIn(1E3),t.fadeOut(1E3),d.html(d.attr("data-text")).removeAttr("disabled")):(d.html(d.attr("data-text")).removeAttr("disabled"),
g=c.attr("success-redirect"),"undefined"!==typeof g&&!1!==g&&""!==g&&(window.location=g),c.find('input[type="text"]').val(""),c.find("textarea").val(""),t.fadeIn(1E3),r.fadeOut(1E3),setTimeout(function(){t.fadeOut(500)},5E3))}})}catch(x){r.attr("original-error",r.text()),r.html(x.message).fadeIn(1E3),t.fadeOut(1E3),setTimeout(function(){r.fadeOut(500)},5E3),d.html(d.attr("data-text")).removeAttr("disabled")}}else r.fadeIn(1E3),setTimeout(function(){r.fadeOut(500)},5E3)}else console.log("Send email form detected."),
"undefined"!==typeof e&&!1!==e&&r.text(e),b=a(c),1===b?(r.fadeIn(200),setTimeout(function(){r.fadeOut(500)},3E3)):(c.removeClass("attempted-submit"),r.fadeOut(200),d.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled"),jQuery.ajax({type:"POST",url:"mail/mail.php",data:c.serialize()+"&url="+window.location.href,success:function(a){d.html(d.attr("data-text")).removeAttr("disabled");$.isNumeric(a)?0<parseInt(a)&&(g=c.attr("success-redirect"),"undefined"!==typeof g&&!1!==g&&""!==
g&&(window.location=g),c.find('input[type="text"]').val(""),c.find("textarea").val(""),c.find(".form-success").fadeIn(1E3),r.fadeOut(1E3),setTimeout(function(){t.fadeOut(500)},5E3)):(r.attr("original-error",r.text()),r.text(a).fadeIn(1E3),t.fadeOut(1E3))},error:function(a,b,c){r.attr("original-error",r.text());r.text(c).fadeIn(1E3);t.fadeOut(1E3);d.html(d.attr("data-text")).removeAttr("disabled")}}));return!1});$(".validate-required, .validate-email").on("blur change",function(){a($(this).closest("form"))});
$("form").each(function(){$(this).find(".form-error").length&&$(this).attr("original-error",$(this).find(".form-error").text())});b("ref")&&$("form.form-email").append('<input type="text" name="referrer" class="hidden" value="'+b("ref")+'"/>');/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)&&$("section").removeClass("parallax");if($(".disqus-comments").length){var c=$(".disqus-comments").attr("data-shortname");(function(){var a=document.createElement("script");
a.type="text/javascript";a.async=!0;a.src="//"+c+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)})()}if(document.querySelector("[data-maps-api-key]")&&!document.querySelector(".gMapsAPI")&&$("[data-maps-api-key]").length){var g=document.createElement("script"),e=$("[data-maps-api-key]:first").attr("data-maps-api-key");g.type="text/javascript";g.src="https://maps.googleapis.com/maps/api/js?key="+e+"&callback=initializeMaps";
g.className="gMapsAPI";document.body.appendChild(g)}});$(window).load(function(){setTimeout(initializeMasonry,1E3);var a=setInterval(function(){$(".tweets-slider").find("li.flex-active-slide").length?clearInterval(a):$(".tweets-slider").length&&$(".tweets-slider").flexslider({directionNav:!1,controlNav:!1})},500);mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0)});
function updateNav(){var a=mr_scrollTop;0>=a?(mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight")),mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled"))):a>mr_navOuterHeight+mr_fixedAt?mr_navScrolled||(mr_nav.addClass("scrolled"),mr_navScrolled=!0):(a>mr_navOuterHeight?(mr_navFixed||(mr_nav.addClass("fixed"),mr_navFixed=!0),a>mr_navOuterHeight+10?mr_outOfSight||(mr_nav.addClass("outOfSight"),mr_outOfSight=!0):mr_outOfSight&&
(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))):(mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))),mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled")))}function capitaliseFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}
function initializeMasonry(){$(".masonry").each(function(){var a=$(this).get(0);a=new Masonry(a,{itemSelector:".masonry-item"});a.on("layoutComplete",function(){mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0);$(".filters.floating").length&&(setupFloatingProjectFilters(),updateFloatingFilters(),window.addEventListener("scroll",updateFloatingFilters,!1));$(".masonry").addClass("fadeIn");$(".masonry-loader").addClass("fadeOut");$(".masonryFlyIn").length&&masonryFlyIn()});
a.layout()})}function masonryFlyIn(){var a=0;$(".masonryFlyIn .masonry-item").each(function(){var b=$(this);setTimeout(function(){b.addClass("fadeIn")},a);a+=170})}
function setupFloatingProjectFilters(){mr_floatingProjectSections=[];$(".filters.floating").closest("section").each(function(){var a=$(this);mr_floatingProjectSections.push({section:a.get(0),outerHeight:a.outerHeight(),elemTop:a.offset().top,elemBottom:a.offset().top+a.outerHeight(),filters:a.find(".filters.floating"),filersHeight:a.find(".filters.floating").outerHeight(!0)})})}
function updateFloatingFilters(){for(var a=mr_floatingProjectSections.length;a--;){var b=mr_floatingProjectSections[a];b.elemTop<mr_scrollTop&&"undefined"==typeof window.mr_variant?(b.filters.css({position:"fixed",top:"16px",bottom:"auto"}),mr_navScrolled&&b.filters.css({transform:"translate3d(-50%,48px,0)"}),mr_scrollTop>b.elemBottom-70&&(b.filters.css({position:"absolute",bottom:"16px",top:"auto"}),b.filters.css({transform:"translate3d(-50%,0,0)"}))):b.filters.css({position:"absolute",transform:"translate3d(-50%,0,0)"})}}
window.initializeMaps=function(){"undefined"!==typeof google&&"undefined"!==typeof google.maps&&$(".map-canvas[data-maps-api-key]").each(function(){var a=this,b="undefined"!==typeof $(this).attr("data-map-style")?$(this).attr("data-map-style"):!1,c=JSON.parse(b)||[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},
{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},
{saturation:-97}]}],g="undefined"!==typeof $(this).attr("data-map-zoom")&&""!==$(this).attr("data-map-zoom")?1*$(this).attr("data-map-zoom"):17,e="undefined"!=typeof $(this).attr("data-latlong")?$(this).attr("data-latlong"):!1;b=e?1*e.substr(0,e.indexOf(",")):!1;e=e?1*e.substr(e.indexOf(",")+1):!1;var d=new google.maps.Geocoder,f="undefined"!==typeof $(this).attr("data-address")?$(this).attr("data-address").split(";"):[""],l="We Are Here",m,n={draggable:766<$(document).width()?!0:!1,scrollwheel:!1,
zoom:g,disableDefaultUI:!0,styles:c};void 0!=$(this).attr("data-marker-title")&&""!=$(this).attr("data-marker-title")&&(l=$(this).attr("data-marker-title"));void 0!=f&&""!=f[0]?d.geocode({address:f[0].replace("[nomarker]","")},function(b,c){if(c==google.maps.GeocoderStatus.OK){var d=new google.maps.Map(a,n);d.setCenter(b[0].geometry.location);f.forEach(function(a){m={url:void 0==window.mr_variant?"img/mapmarker.png":"../img/mapmarker.png",size:new google.maps.Size(50,50),scaledSize:new google.maps.Size(50,
50)};if(/(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)/.test(a))a=a.split(","),new google.maps.Marker({position:{lat:1*a[0],lng:1*a[1]},map:d,icon:m,title:l,optimised:!1});else if(0>a.indexOf("[nomarker]")){var b=new google.maps.Geocoder;b.geocode({address:a.replace("[nomarker]","")},function(a,b){b==google.maps.GeocoderStatus.OK&&new google.maps.Marker({map:d,icon:m,title:l,position:a[0].geometry.location,optimised:!1})})}})}else console.log("There was a problem geocoding the address.")}):void 0!=b&&""!=
b&&0!=b&&void 0!=e&&""!=e&&0!=e&&(n.center={lat:b,lng:e},c=new google.maps.Map(a,n),new google.maps.Marker({position:{lat:b,lng:e},map:c,icon:m,title:l}))})};initializeMaps();
function prepareSignup(a){var b=jQuery("<form />"),c=jQuery("<div />");jQuery(c).html(a.attr("srcdoc"));a=jQuery(c).find("form").attr("action");/list-manage\.com/.test(a)&&(a=a.replace("/post?","/post-json?")+"&c=?","//"==a.substr(0,2)&&(a="http:"+a));/createsend\.com/.test(a)&&(a+="?callback=?");b.attr("action",a);jQuery(c).find("input, select, textarea").not('input[type="submit"]').each(function(){jQuery(this).clone().appendTo(b)});return b}
var mr_cookies={getItem:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(a,b,c,g,e,d){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var f="";if(c)switch(c.constructor){case Number:f=Infinity===c?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:f="; expires="+c;break;case Date:f="; expires="+
c.toUTCString()}document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+f+(e?"; domain="+e:"")+(g?"; path="+g:"")+(d?"; secure":"");return!0},removeItem:function(a,b,c){if(!this.hasItem(a))return!1;document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:"");return!0},hasItem:function(a){return a?(new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie):!1},keys:function(){for(var a=
document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;c<b;c++)a[c]=decodeURIComponent(a[c]);return a}};/*
 Smooth Scroll - v1.4.10 - 2013-03-02
 https://github.com/kswedberg/jquery-smooth-scroll
 Copyright (c) 2013 Karl Swedberg
 Licensed MIT (https://github.com/kswedberg/jquery-smooth-scroll/blob/master/LICENSE-MIT)
*/
!function(a){var b=function(b){var c=[],e=!1,d=b.dir&&"left"==b.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!=document&&this!=window){var b=a(this);0<b[d]()?c.push(this):(b[d](1),e=0<b[d](),e&&c.push(this),b[d](0))}}),c.length||this.each(function(){"BODY"===this.nodeName&&(c=[this])}),"first"===b.el&&1<c.length&&(c=[c[0]]),c};a.fn.extend({scrollable:function(a){a=b.call(this,{dir:a});return this.pushStack(a)},firstScrollable:function(a){a=b.call(this,{el:"first",dir:a});return this.pushStack(a)},
smoothScroll:function(b){b=b||{};var c=a.extend({},a.fn.smoothScroll.defaults,b),e=a.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(b){var d=a(this),g=c.exclude,m=c.excludeWithin,n=0,r=0,t=!0,v={},y=location.hostname===this.hostname||!this.hostname,P=c.scrollTarget||(a.smoothScroll.filterPath(this.pathname)||e)===e,x=this.hash.replace(/(:|\.)/g,"\\$1");if(c.scrollTarget||y&&P&&x){for(;t&&g.length>n;)d.is(g[n++].replace(/(:|\.)/g,
"\\$1"))&&(t=!1);for(;t&&m.length>r;)d.closest(m[r++]).length&&(t=!1)}else t=!1;t&&(b.preventDefault(),a.extend(v,c,{scrollTarget:c.scrollTarget||x,link:this}),a.smoothScroll(v))}),this}});a.smoothScroll=function(b,g){var c,d,f=0,l="offset",m="scrollTop",n={};var r={};"number"==typeof b?(c=a.fn.smoothScroll.defaults,r=b):(c=a.extend({},a.fn.smoothScroll.defaults,b||{}),c.scrollElement&&(l="position","static"==c.scrollElement.css("position")&&c.scrollElement.css("position","relative")));c=a.extend({link:null},
c);m="left"==c.direction?"scrollLeft":m;c.scrollElement?(d=c.scrollElement,f=d[m]()):d=a("html, body").firstScrollable();c.beforeScroll.call(d,c);r="number"==typeof b?b:g||a(c.scrollTarget)[l]()&&a(c.scrollTarget)[l]()[c.direction]||0;n[m]=r+f+c.offset;b=c.speed;"auto"===b&&(b=n[m]||d.scrollTop(),b/=c.autoCoefficent);r={duration:b,easing:c.easing,complete:function(){c.afterScroll.call(c.link,c)}};c.step&&(r.step=c.step);d.length?d.stop().animate(n,r):c.afterScroll.call(c.link,c)};a.smoothScroll.version=
"1.4.10";a.smoothScroll.filterPath=function(a){return a.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")};a.fn.smoothScroll.defaults={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2}}(jQuery);(function(a,b){"function"===typeof define&&define.amd?define([],b):"object"===typeof exports?module.exports=b():b()})(this,function(){function a(a){if(null===x){for(var b=a.length,c=0,e=document.getElementById(d),f="<ul>";c<b;)f+="<li>"+a[c]+"</li>",c++;e.innerHTML=f+"</ul>"}else x(a)}function b(a){return a.replace(/<b[^>]*>(.*?)<\/b>/gi,function(a,b){return b}).replace(/class="(?!(tco-hidden|tco-display|tco-ellipsis))+.*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function c(a){a=a.getElementsByTagName("a");
for(var b=a.length-1;0<=b;b--)a[b].setAttribute("target","_blank")}function g(a,b){var c=[];b=new RegExp("(^| )"+b+"( |$)");a=a.getElementsByTagName("*");for(var d=0,e=a.length;d<e;d++)b.test(a[d].className)&&c.push(a[d]);return c}function e(a){if(void 0!==a&&0<=a.innerHTML.indexOf("data-srcset"))return a=a.innerHTML.match(/data-srcset="([A-z0-9%_\.-]+)/i)[0],decodeURIComponent(a).split('"')[1]}var d="",f=20,l=!0,m=[],n=!1,r=!0,t=!0,v=null,y=!0,P=!0,x=null,J=!0,da=!1,O=!0,q=!0,R=!1,A=null,z={fetch:function(a){void 0===
a.maxTweets&&(a.maxTweets=20);void 0===a.enableLinks&&(a.enableLinks=!0);void 0===a.showUser&&(a.showUser=!0);void 0===a.showTime&&(a.showTime=!0);void 0===a.dateFunction&&(a.dateFunction="default");void 0===a.showRetweet&&(a.showRetweet=!0);void 0===a.customCallback&&(a.customCallback=null);void 0===a.showInteraction&&(a.showInteraction=!0);void 0===a.showImages&&(a.showImages=!1);void 0===a.linksInNewWindow&&(a.linksInNewWindow=!0);void 0===a.showPermalinks&&(a.showPermalinks=!0);void 0===a.dataOnly&&
(a.dataOnly=!1);if(n)m.push(a);else{n=!0;d=a.domId;f=a.maxTweets;l=a.enableLinks;t=a.showUser;r=a.showTime;P=a.showRetweet;v=a.dateFunction;x=a.customCallback;J=a.showInteraction;da=a.showImages;O=a.linksInNewWindow;q=a.showPermalinks;R=a.dataOnly;var b=document.getElementsByTagName("head")[0];null!==A&&b.removeChild(A);A=document.createElement("script");A.type="text/javascript";A.src="https://cdn.syndication.twimg.com/widgets/timelines/"+a.id+"?&lang="+(a.lang||"en")+"&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+
Math.random();b.appendChild(A)}},callback:function(d){function F(a){var b=a.getElementsByTagName("img")[0];b.src=b.getAttribute("data-src-2x");return a}var C=document.createElement("div");C.innerHTML=d.body;"undefined"===typeof C.getElementsByClassName&&(y=!1);d=[];var A=[],x=[],X=[];var G=[];var U=[],T=[],K=0;if(y)for(C=C.getElementsByClassName("timeline-Tweet");K<C.length;){0<C[K].getElementsByClassName("timeline-Tweet-retweetCredit").length?G.push(!0):G.push(!1);if(!G[K]||G[K]&&P)d.push(C[K].getElementsByClassName("timeline-Tweet-text")[0]),
U.push(C[K].getAttribute("data-tweet-id")),A.push(F(C[K].getElementsByClassName("timeline-Tweet-author")[0])),x.push(C[K].getElementsByClassName("dt-updated")[0]),T.push(C[K].getElementsByClassName("timeline-Tweet-timestamp")[0]),void 0!==C[K].getElementsByClassName("timeline-Tweet-media")[0]?X.push(C[K].getElementsByClassName("timeline-Tweet-media")[0]):X.push(void 0);K++}else for(C=g(C,"timeline-Tweet");K<C.length;){0<g(C[K],"timeline-Tweet-retweetCredit").length?G.push(!0):G.push(!1);if(!G[K]||
G[K]&&P)d.push(g(C[K],"timeline-Tweet-text")[0]),U.push(C[K].getAttribute("data-tweet-id")),A.push(F(g(C[K],"timeline-Tweet-author")[0])),x.push(g(C[K],"dt-updated")[0]),T.push(g(C[K],"timeline-Tweet-timestamp")[0]),void 0!==g(C[K],"timeline-Tweet-media")[0]?X.push(g(C[K],"timeline-Tweet-media")[0]):X.push(void 0);K++}d.length>f&&(d.splice(f,d.length-f),A.splice(f,A.length-f),x.splice(f,x.length-f),G.splice(f,G.length-f),X.splice(f,X.length-f),T.splice(f,T.length-f));C=[];K=d.length;var L=0;if(R)for(;L<
K;)C.push({tweet:d[L].innerHTML,author:A[L].innerHTML,time:x[L].textContent,image:e(X[L]),rt:G[L],tid:U[L],permalinkURL:void 0===T[L]?"":T[L].href}),L++;else for(;L<K;){if("string"!==typeof v){G=x[L].getAttribute("datetime");var aa=new Date(x[L].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]);G=v(aa,G);x[L].setAttribute("aria-label",G);if(d[L].textContent)if(y)x[L].textContent=G;else{aa=document.createElement("p");var E=document.createTextNode(G);aa.appendChild(E);aa.setAttribute("aria-label",
G);x[L]=aa}else x[L].textContent=G}G="";l?(O&&(c(d[L]),t&&c(A[L])),t&&(G+='<div class="user">'+b(A[L].innerHTML)+"</div>"),G+='<p class="tweet">'+b(d[L].innerHTML)+"</p>",r&&(G=q?G+('<p class="timePosted"><a href="'+T[L]+'">'+x[L].getAttribute("aria-label")+"</a></p>"):G+('<p class="timePosted">'+x[L].getAttribute("aria-label")+"</p>"))):(t&&(G+='<p class="user">'+A[L].textContent+"</p>"),G+='<p class="tweet">'+d[L].textContent+"</p>",r&&(G+='<p class="timePosted">'+x[L].textContent+"</p>"));J&&(G+=
'<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+U[L]+'" class="twitter_reply_icon"'+(O?' target="_blank">':">")+'Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+U[L]+'" class="twitter_retweet_icon"'+(O?' target="_blank">':">")+'Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+U[L]+'" class="twitter_fav_icon"'+(O?' target="_blank">':">")+"Favorite</a></p>");da&&void 0!==X[L]&&(G+='<div class="media"><img src="'+e(X[L])+'" alt="Image from tweet" /></div>');
C.push(G);L++}a(C);n=!1;0<m.length&&(z.fetch(m[0]),m.splice(0,1))}};return window.twitterFetcher=z});var toBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),fromBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function base64(a){try{var b=window.btoa(a)}catch(f){b="";var c=a.length;if(0<c){for(var g=[0,0,0],e=0,d=c%3;0<a.length%3;)a[a.length]=" ";for(;e<c;)g=[a.charCodeAt(e++)&255,a.charCodeAt(e++)&255,a.charCodeAt(e++)&255],b+=toBase64[g[0]>>2]+toBase64[(g[0]&3)<<4|g[1]>>4]+toBase64[(g[1]&15)<<2|g[2]>>6]+toBase64[g[2]&63];0<d&&(b[b.length-1]="=",2==d?(b[b.length-2]="=",b[b.length-3]=toBase64[(g[0]&3)<<4]):b[b.length-2]=toBase64[(g[1]&15)<<2])}}return b}
function base64_decode(a){try{var b=window.atob(a)}catch(d){b="";var c=a.length;if(3<c&&0==c%4){for(var g=[0,0,0,0],e=0;e<c;)g=[fromBase64.indexOf(a.charAt(e++)),fromBase64.indexOf(a.charAt(e++)),fromBase64.indexOf(a.charAt(e++)),fromBase64.indexOf(a.charAt(e++))],b+=String.fromCharCode(g[0]<<2|g[1]>>4)+String.fromCharCode((g[1]&15)<<4|g[2]>>2)+String.fromCharCode((g[2]&3)<<6|g[3]);64<=g[3]&&(--b.length,64<=g[2]&&--b.length)}}return b}
function to_little_endian_dword(a){return to_little_endian_word(a)+to_little_endian_word(a>>16)}function to_little_endian_word(a){return to_byte(a)+to_byte(a>>8)}function to_byte(a){return String.fromCharCode(a&255)}function arrayToBase64(a){for(var b="",c=a.length,g=0;g<c;++g)"number"==typeof a[g]&&(b+=String.fromCharCode(a[g]));return base64(b)}function base64ToArray(a){a=base64_decode(a);for(var b=[],c=a.length,g=0;g<c;)b.push(a.charCodeAt(g++)&255);return b};$(".cover").ready(function(){$("#showGameboy").click(function(){var a="";$("#gameboy").show();$("#gameboyAlert").show();document.onkeydown=function(b){switch(b.keyCode){case 37:a+="L";break;case 38:a+="U";break;case 39:a+="R";break;case 40:a+="D";break;case 66:a+="B";break;case 65:a+="A"}if(a.includes("UUDDLRLRBA")){$("#gameboyAlert").hide();$("div.power").addClass("power-on");document.onkeydown=null;var c=document.getElementById("gameboyCanvas");document.addEventListener("keydown",keyDown);document.addEventListener("keyUp",
keyUp);try{var g=new XMLHttpRequest;g.open("GET","/binary.dat",!1);g.overrideMimeType("text/plain; charset=x-user-defined");g.onreadystatechange=function(){4===g.readyState&&(200!==g.status&&0!=g.status||start(c,g.responseText))};g.send(null)}catch(e){console.log(e),console.log("Browser does not support the FileReader object, NO SOUP FOR YOU!")}}}})});var keyZones=[["right",[39]],["left",[37]],["up",[38]],["down",[40]],["a",[88,74]],["b",[90,81,89]],["select",[16]],["start",[13]]];
function keyDown(a){for(var b=a.keyCode,c=keyZones.length,g=0;g<c;++g)for(var e=keyZones[g],d=e[1],f=d.length,l=0;l<f;++l)if(d[l]==b){GameBoyKeyDown(e[0]);try{a.preventDefault()}catch(m){}}}function keyUp(a){for(var b=a.keyCode,c=keyZones.length,g=0;g<c;++g)for(var e=keyZones[g],d=e[1],f=d.length,l=0;l<f;++l)if(d[l]==b){GameBoyKeyUp(e[0]);try{a.preventDefault()}catch(m){}}};function GameBoyCore(a,b){this.canvas=a;this.drawContext=null;this.ROMImage=b;this.registerA=1;this.FZero=!0;this.FSubtract=!1;this.FCarry=this.FHalfCarry=!0;this.registerB=0;this.registerC=19;this.registerD=0;this.registerE=216;this.registersHL=333;this.stackPointer=65534;this.programCounter=256;this.remainingClocks=this.baseCPUCyclesPerIteration=this.CPUCyclesTotalRoundoff=this.CPUCyclesTotalCurrent=this.CPUCyclesTotalBase=this.CPUCyclesTotal=0;this.inBootstrap=!0;this.skipPCIncrement=this.halt=
this.usedGBCBootROM=this.usedBootROM=!1;this.stopEmulator=3;this.IME=!0;this.interruptsEnabled=this.interruptsRequested=this.IRQLineMatched=0;this.hdmaRunning=!1;this.doubleSpeedShifter=this.CPUTicks=0;this.JoyPad=255;this.CPUStopped=!1;this.memoryReader=[];this.memoryWriter=[];this.memoryHighReader=[];this.memoryHighWriter=[];this.ROM=[];this.memory=[];this.MBCRam=[];this.VRAM=[];this.GBCMemory=[];this.MBCRAMBanksEnabled=this.MBC1Mode=!1;this.currMBCRAMBank=0;this.currMBCRAMBankPosition=-40960;this.cGBC=
!1;this.gbcRamBank=1;this.gbcRamBankPosition=-53248;this.gbcRamBankPositionECHO=-61440;this.RAMBanks=[0,1,2,4,16];this.cartridgeType=this.currentROMBank=this.ROMBank1offs=0;this.gameCode=this.name="";this.fromSaveState=!1;this.savedStateFileName="";this.modeSTAT=this.STATTracker=0;this.spriteCount=252;this.LCDisOn=this.mode0TriggerSTAT=this.mode1TriggerSTAT=this.mode2TriggerSTAT=this.LYCMatchTriggerSTAT=!1;this.LINECONTROL=[];this.DISPLAYOFFCONTROL=[function(a){}];this.LCDCONTROL=null;this.initializeLCDController();
this.RTCisLatched=!1;this.RTCDays=this.RTCHours=this.RTCMinutes=this.RTCSeconds=this.latchedHDays=this.latchedLDays=this.latchedHours=this.latchedMinutes=this.latchedSeconds=0;this.RTCHALT=this.RTCDayOverFlow=!1;this.lowY=this.highY=this.lowX=this.highX=127;this.audioHandle=null;this.numSamplesTotal=0;this.dutyLookup=[[!1,!1,!1,!1,!1,!1,!1,!0],[!0,!1,!1,!1,!1,!1,!1,!0],[!0,!1,!1,!1,!1,!0,!0,!0],[!1,!0,!0,!0,!0,!0,!0,!1]];this.bufferContainAmount=0;this.noiseSampleTable=this.LSFR7Table=this.LSFR15Table=
null;this.initializeAudioStartState();this.soundMasterEnabled=!1;this.channel3PCM=null;this.VinRightChannelMasterVolume=this.VinLeftChannelMasterVolume=8;this.rightChannel4=this.rightChannel3=this.rightChannel2=this.rightChannel1=this.leftChannel4=this.leftChannel3=this.leftChannel2=this.leftChannel1=!1;this.audioClocksUntilNextEventCounter=this.audioClocksUntilNextEvent=1;this.mixerOutputCache=this.channel2currentSampleRightTrimary=this.channel2currentSampleLeftTrimary=this.channel1currentSampleRightTrimary=
this.channel1currentSampleLeftTrimary=this.channel4currentSampleRightSecondary=this.channel4currentSampleLeftSecondary=this.channel3currentSampleRightSecondary=this.channel3currentSampleLeftSecondary=this.channel2currentSampleRightSecondary=this.channel2currentSampleLeftSecondary=this.channel1currentSampleRightSecondary=this.channel1currentSampleLeftSecondary=this.channel4currentSampleRight=this.channel4currentSampleLeft=this.channel3currentSampleRight=this.channel3currentSampleLeft=this.channel2currentSampleRight=
this.channel2currentSampleLeft=this.channel1currentSampleRight=this.channel1currentSampleLeft=0;this.emulatorSpeed=1;this.initializeTiming();this.emulatorTicks=this.rollover=this.audioDestinationPosition=this.downsampleInput=this.audioIndex=this.audioTicks=0;this.DIVTicks=56;this.LCDTicks=60;this.timerTicks=0;this.TIMAEnabled=!1;this.TACClocker=1024;this.IRQEnableDelay=this.serialShiftTimerAllocated=this.serialShiftTimer=this.serialTimer=0;a=new Date;this.lastIteration=a.getTime();a=new Date;this.firstIteration=
a.getTime();this.haltPostClocks=this.totalLinesPassed=this.queuedScanLines=this.lastUnrenderedLine=this.actualScanLine=this.iterations=0;this.cTIMER=this.cHuC1=this.cHuC3=this.cTAMA5=this.cCamera=this.cRUMBLE=this.cMMMO1=this.cSRAM=this.cMBC7=this.cMBC5=this.cMBC3=this.cMBC2=this.cMBC1=!1;this.ROMBanks=[2,4,8,16,32,64,128,256,512];this.ROMBanks[82]=72;this.ROMBanks[83]=80;this.ROMBanks[84]=96;this.backgroundY=this.backgroundX=this.currVRAMBank=this.numRAMBanks=0;this.gfxSpriteShow=this.gfxWindowDisplay=
!1;this.BGPriorityEnabled=this.bgEnabled=this.gfxSpriteNormalHeight=!0;this.gfxBackgroundCHRBankPosition=this.gfxWindowCHRBankPosition=0;this.gfxBackgroundBankOffset=128;this.drewBlank=this.windowX=this.windowY=0;this.drewFrame=!1;this.midScanlineOffset=-1;this.currentX=this.pixelEnd=0;this.tileCache=this.BGCHRCurrentBank=this.BGCHRBank2=this.BGCHRBank1=null;this.colors=[15728606,11392916,5411443,1586242];this.cachedOBJPaletteConversion=this.cachedBGPaletteConversion=this.gbOBJColorizedPalette=this.gbBGColorizedPalette=
this.gbcBGPalette=this.gbcOBJPalette=this.gbBGPalette=this.gbOBJPalette=this.gbcBGRawPalette=this.gbcOBJRawPalette=this.BGPalette=this.OBJPalette=null;this.updateGBBGPalette=this.updateGBRegularBGPalette;this.updateGBOBJPalette=this.updateGBRegularOBJPalette;this.colorizedGBPalettes=!1;this.SpriteLayerRender=this.WindowLayerRender=this.BGLayerRender=null;this.frameBuffer=[];this.canvasBuffer=this.swizzledFrame=null;this.pixelStart=0;this.onscreenWidth=this.offscreenWidth=160;this.onscreenHeight=this.offscreenHeight=
144;this.offscreenRGBCount=this.onscreenWidth*this.onscreenHeight*4;this.resizePathClear=!0;this.intializeWhiteNoise()}GameBoyCore.prototype.GBBOOTROM=[];GameBoyCore.prototype.GBCBOOTROM=[];
GameBoyCore.prototype.ffxxDump=[15,0,124,255,0,0,0,248,255,255,255,255,255,255,255,1,128,191,243,255,191,255,63,0,255,191,127,255,159,255,191,255,255,0,0,191,119,243,241,255,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,145,128,0,0,0,0,0,252,0,0,0,0,255,126,255,254,255,255,255,255,255,255,62,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,192,255,193,0,254,255,255,255,248,255,0,0,0,143,0,0,255,255,255,255,255,255,255,255,206,237,102,102,204,13,
0,11,3,115,0,131,0,12,0,13,0,8,17,31,136,137,0,14,220,204,110,230,221,221,217,153,187,187,103,99,110,14,236,204,221,220,153,159,187,185,51,62,69,236,82,250,8,183,7,93,1,253,192,255,8,252,0,229,11,248,194,206,244,249,15,127,69,109,61,254,70,151,51,94,8,239,241,255,134,131,36,116,18,252,0,159,180,183,6,213,208,122,0,158,4,95,65,47,29,119,54,117,129,170,112,58,152,209,113,2,77,1,193,255,13,0,211,5,249,0,11,0];
GameBoyCore.prototype.OPCODE=[function(a){},function(a){a.registerC=a.memoryReader[a.programCounter](a,a.programCounter);a.registerB=a.memoryRead(a.programCounter+1&65535);a.programCounter=a.programCounter+2&65535},function(a){a.memoryWrite(a.registerB<<8|a.registerC,a.registerA)},function(a){var b=(a.registerB<<8|a.registerC)+1;a.registerB=b>>8&255;a.registerC=b&255},function(a){a.registerB=a.registerB+1&255;a.FZero=0==a.registerB;a.FHalfCarry=0==(a.registerB&15);a.FSubtract=!1},function(a){a.registerB=
a.registerB-1&255;a.FZero=0==a.registerB;a.FHalfCarry=15==(a.registerB&15);a.FSubtract=!0},function(a){a.registerB=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535},function(a){a.FCarry=127<a.registerA;a.registerA=a.registerA<<1&255|a.registerA>>7;a.FZero=a.FSubtract=a.FHalfCarry=!1},function(a){var b=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+2&65535;a.memoryWrite(b,
a.stackPointer&255);a.memoryWrite(b+1&65535,a.stackPointer>>8)},function(a){var b=a.registersHL+(a.registerB<<8|a.registerC);a.FHalfCarry=(a.registersHL&4095)>(b&4095);a.FCarry=65535<b;a.registersHL=b&65535;a.FSubtract=!1},function(a){a.registerA=a.memoryRead(a.registerB<<8|a.registerC)},function(a){var b=(a.registerB<<8|a.registerC)-1&65535;a.registerB=b>>8;a.registerC=b&255},function(a){a.registerC=a.registerC+1&255;a.FZero=0==a.registerC;a.FHalfCarry=0==(a.registerC&15);a.FSubtract=!1},function(a){a.registerC=
a.registerC-1&255;a.FZero=0==a.registerC;a.FHalfCarry=15==(a.registerC&15);a.FSubtract=!0},function(a){a.registerC=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535},function(a){a.registerA=a.registerA>>1|(a.registerA&1)<<7;a.FCarry=127<a.registerA;a.FZero=a.FSubtract=a.FHalfCarry=!1},function(a){a.cGBC?1==(a.memory[65357]&1)?(127<a.memory[65357]?(cout("Going into single clock speed mode.",0),a.doubleSpeedShifter=0,a.memory[65357]&=127):(cout("Going into double clock speed mode.",
0),a.doubleSpeedShifter=1,a.memory[65357]|=128),a.memory[65357]&=254):a.handleSTOP():a.handleSTOP()},function(a){a.registerE=a.memoryReader[a.programCounter](a,a.programCounter);a.registerD=a.memoryRead(a.programCounter+1&65535);a.programCounter=a.programCounter+2&65535},function(a){a.memoryWrite(a.registerD<<8|a.registerE,a.registerA)},function(a){var b=(a.registerD<<8|a.registerE)+1;a.registerD=b>>8&255;a.registerE=b&255},function(a){a.registerD=a.registerD+1&255;a.FZero=0==a.registerD;a.FHalfCarry=
0==(a.registerD&15);a.FSubtract=!1},function(a){a.registerD=a.registerD-1&255;a.FZero=0==a.registerD;a.FHalfCarry=15==(a.registerD&15);a.FSubtract=!0},function(a){a.registerD=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535},function(a){var b=a.FCarry?1:0;a.FCarry=127<a.registerA;a.registerA=a.registerA<<1&255|b;a.FZero=a.FSubtract=a.FHalfCarry=!1},function(a){a.programCounter=a.programCounter+(a.memoryReader[a.programCounter](a,a.programCounter)<<24>>
24)+1&65535},function(a){var b=a.registersHL+(a.registerD<<8|a.registerE);a.FHalfCarry=(a.registersHL&4095)>(b&4095);a.FCarry=65535<b;a.registersHL=b&65535;a.FSubtract=!1},function(a){a.registerA=a.memoryRead(a.registerD<<8|a.registerE)},function(a){var b=(a.registerD<<8|a.registerE)-1&65535;a.registerD=b>>8;a.registerE=b&255},function(a){a.registerE=a.registerE+1&255;a.FZero=0==a.registerE;a.FHalfCarry=0==(a.registerE&15);a.FSubtract=!1},function(a){a.registerE=a.registerE-1&255;a.FZero=0==a.registerE;
a.FHalfCarry=15==(a.registerE&15);a.FSubtract=!0},function(a){a.registerE=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535},function(a){var b=a.FCarry?128:0;a.FCarry=1==(a.registerA&1);a.registerA=a.registerA>>1|b;a.FZero=a.FSubtract=a.FHalfCarry=!1},function(a){a.FZero?a.programCounter=a.programCounter+1&65535:(a.programCounter=a.programCounter+(a.memoryReader[a.programCounter](a,a.programCounter)<<24>>24)+1&65535,a.CPUTicks+=4)},function(a){a.registersHL=
a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+2&65535},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registerA);a.registersHL=a.registersHL+1&65535},function(a){a.registersHL=a.registersHL+1&65535},function(a){var b=(a.registersHL>>8)+1&255;a.FZero=0==b;a.FHalfCarry=0==(b&15);a.FSubtract=!1;a.registersHL=b<<8|a.registersHL&255},function(a){var b=(a.registersHL>>8)-1&255;a.FZero=0==b;a.FHalfCarry=15==(b&
15);a.FSubtract=!0;a.registersHL=b<<8|a.registersHL&255},function(a){a.registersHL=a.memoryReader[a.programCounter](a,a.programCounter)<<8|a.registersHL&255;a.programCounter=a.programCounter+1&65535},function(a){if(a.FSubtract)a.FCarry&&a.FHalfCarry?(a.registerA=a.registerA+154&255,a.FHalfCarry=!1):a.FCarry?a.registerA=a.registerA+160&255:a.FHalfCarry&&(a.registerA=a.registerA+250&255,a.FHalfCarry=!1);else{if(a.FCarry||153<a.registerA)a.registerA=a.registerA+96&255,a.FCarry=!0;if(a.FHalfCarry||9<
(a.registerA&15))a.registerA=a.registerA+6&255,a.FHalfCarry=!1}a.FZero=0==a.registerA},function(a){a.FZero?(a.programCounter=a.programCounter+(a.memoryReader[a.programCounter](a,a.programCounter)<<24>>24)+1&65535,a.CPUTicks+=4):a.programCounter=a.programCounter+1&65535},function(a){a.FHalfCarry=2047<(a.registersHL&4095);a.FCarry=32767<a.registersHL;a.registersHL=a.registersHL<<1&65535;a.FSubtract=!1},function(a){a.registerA=a.memoryReader[a.registersHL](a,a.registersHL);a.registersHL=a.registersHL+
1&65535},function(a){a.registersHL=a.registersHL-1&65535},function(a){var b=a.registersHL+1&255;a.FZero=0==b;a.FHalfCarry=0==(b&15);a.FSubtract=!1;a.registersHL=a.registersHL&65280|b},function(a){var b=a.registersHL-1&255;a.FZero=0==b;a.FHalfCarry=15==(b&15);a.FSubtract=!0;a.registersHL=a.registersHL&65280|b},function(a){a.registersHL=a.registersHL&65280|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535},function(a){a.registerA^=255;a.FSubtract=a.FHalfCarry=
!0},function(a){a.FCarry?a.programCounter=a.programCounter+1&65535:(a.programCounter=a.programCounter+(a.memoryReader[a.programCounter](a,a.programCounter)<<24>>24)+1&65535,a.CPUTicks+=4)},function(a){a.stackPointer=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+2&65535},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registerA);a.registersHL=a.registersHL-1&65535},function(a){a.stackPointer=a.stackPointer+
1&65535},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL)+1&255;a.FZero=0==b;a.FHalfCarry=0==(b&15);a.FSubtract=!1;a.memoryWriter[a.registersHL](a,a.registersHL,b)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL)-1&255;a.FZero=0==b;a.FHalfCarry=15==(b&15);a.FSubtract=!0;a.memoryWriter[a.registersHL](a,a.registersHL,b)},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.programCounter](a,a.programCounter));a.programCounter=a.programCounter+1&
65535},function(a){a.FCarry=!0;a.FSubtract=a.FHalfCarry=!1},function(a){a.FCarry?(a.programCounter=a.programCounter+(a.memoryReader[a.programCounter](a,a.programCounter)<<24>>24)+1&65535,a.CPUTicks+=4):a.programCounter=a.programCounter+1&65535},function(a){var b=a.registersHL+a.stackPointer;a.FHalfCarry=(a.registersHL&4095)>(b&4095);a.FCarry=65535<b;a.registersHL=b&65535;a.FSubtract=!1},function(a){a.registerA=a.memoryReader[a.registersHL](a,a.registersHL);a.registersHL=a.registersHL-1&65535},function(a){a.stackPointer=
a.stackPointer-1&65535},function(a){a.registerA=a.registerA+1&255;a.FZero=0==a.registerA;a.FHalfCarry=0==(a.registerA&15);a.FSubtract=!1},function(a){a.registerA=a.registerA-1&255;a.FZero=0==a.registerA;a.FHalfCarry=15==(a.registerA&15);a.FSubtract=!0},function(a){a.registerA=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535},function(a){a.FCarry=!a.FCarry;a.FSubtract=a.FHalfCarry=!1},function(a){},function(a){a.registerB=a.registerC},function(a){a.registerB=
a.registerD},function(a){a.registerB=a.registerE},function(a){a.registerB=a.registersHL>>8},function(a){a.registerB=a.registersHL&255},function(a){a.registerB=a.memoryReader[a.registersHL](a,a.registersHL)},function(a){a.registerB=a.registerA},function(a){a.registerC=a.registerB},function(a){},function(a){a.registerC=a.registerD},function(a){a.registerC=a.registerE},function(a){a.registerC=a.registersHL>>8},function(a){a.registerC=a.registersHL&255},function(a){a.registerC=a.memoryReader[a.registersHL](a,
a.registersHL)},function(a){a.registerC=a.registerA},function(a){a.registerD=a.registerB},function(a){a.registerD=a.registerC},function(a){},function(a){a.registerD=a.registerE},function(a){a.registerD=a.registersHL>>8},function(a){a.registerD=a.registersHL&255},function(a){a.registerD=a.memoryReader[a.registersHL](a,a.registersHL)},function(a){a.registerD=a.registerA},function(a){a.registerE=a.registerB},function(a){a.registerE=a.registerC},function(a){a.registerE=a.registerD},function(a){},function(a){a.registerE=
a.registersHL>>8},function(a){a.registerE=a.registersHL&255},function(a){a.registerE=a.memoryReader[a.registersHL](a,a.registersHL)},function(a){a.registerE=a.registerA},function(a){a.registersHL=a.registerB<<8|a.registersHL&255},function(a){a.registersHL=a.registerC<<8|a.registersHL&255},function(a){a.registersHL=a.registerD<<8|a.registersHL&255},function(a){a.registersHL=a.registerE<<8|a.registersHL&255},function(a){},function(a){a.registersHL=257*(a.registersHL&255)},function(a){a.registersHL=
a.memoryReader[a.registersHL](a,a.registersHL)<<8|a.registersHL&255},function(a){a.registersHL=a.registerA<<8|a.registersHL&255},function(a){a.registersHL=a.registersHL&65280|a.registerB},function(a){a.registersHL=a.registersHL&65280|a.registerC},function(a){a.registersHL=a.registersHL&65280|a.registerD},function(a){a.registersHL=a.registersHL&65280|a.registerE},function(a){a.registersHL=a.registersHL&65280|a.registersHL>>8},function(a){},function(a){a.registersHL=a.registersHL&65280|a.memoryReader[a.registersHL](a,
a.registersHL)},function(a){a.registersHL=a.registersHL&65280|a.registerA},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registerB)},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registerC)},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registerD)},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registerE)},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registersHL>>8)},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registersHL&
255)},function(a){0<(a.interruptsEnabled&a.interruptsRequested&31)?a.cGBC||a.usedBootROM?a.CPUTicks+=4:a.skipPCIncrement=!0:a.calculateHALTPeriod()},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.registerA)},function(a){a.registerA=a.registerB},function(a){a.registerA=a.registerC},function(a){a.registerA=a.registerD},function(a){a.registerA=a.registerE},function(a){a.registerA=a.registersHL>>8},function(a){a.registerA=a.registersHL&255},function(a){a.registerA=a.memoryReader[a.registersHL](a,
a.registersHL)},function(a){},function(a){var b=a.registerA+a.registerB;a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+a.registerC;a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+a.registerD;a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=
a.registerA+a.registerE;a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+(a.registersHL>>8);a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+(a.registersHL&255);a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+a.memoryReader[a.registersHL](a,
a.registersHL);a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){a.FHalfCarry=8==(a.registerA&8);a.FCarry=127<a.registerA;a.registerA=a.registerA<<1&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+a.registerB+(a.FCarry?1:0);a.FHalfCarry=15<(a.registerA&15)+(a.registerB&15)+(a.FCarry?1:0);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+a.registerC+(a.FCarry?
1:0);a.FHalfCarry=15<(a.registerA&15)+(a.registerC&15)+(a.FCarry?1:0);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+a.registerD+(a.FCarry?1:0);a.FHalfCarry=15<(a.registerA&15)+(a.registerD&15)+(a.FCarry?1:0);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA+a.registerE+(a.FCarry?1:0);a.FHalfCarry=15<(a.registerA&15)+(a.registerE&15)+(a.FCarry?1:0);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==
a.registerA;a.FSubtract=!1},function(a){var b=a.registersHL>>8,c=a.registerA+b+(a.FCarry?1:0);a.FHalfCarry=15<(a.registerA&15)+(b&15)+(a.FCarry?1:0);a.FCarry=255<c;a.registerA=c&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registersHL&255,c=a.registerA+b+(a.FCarry?1:0);a.FHalfCarry=15<(a.registerA&15)+(b&15)+(a.FCarry?1:0);a.FCarry=255<c;a.registerA=c&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL),c=a.registerA+b+(a.FCarry?
1:0);a.FHalfCarry=15<(a.registerA&15)+(b&15)+(a.FCarry?1:0);a.FCarry=255<c;a.registerA=c&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA<<1|(a.FCarry?1:0);a.FHalfCarry=15<(a.registerA<<1&30|(a.FCarry?1:0));a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){var b=a.registerA-a.registerB;a.FHalfCarry=(a.registerA&15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-a.registerC;a.FHalfCarry=(a.registerA&
15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-a.registerD;a.FHalfCarry=(a.registerA&15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-a.registerE;a.FHalfCarry=(a.registerA&15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-(a.registersHL>>8);a.FHalfCarry=(a.registerA&15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=!0},function(a){var b=
a.registerA-(a.registersHL&255);a.FHalfCarry=(a.registerA&15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-a.memoryReader[a.registersHL](a,a.registersHL);a.FHalfCarry=(a.registerA&15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=!0},function(a){a.registerA=0;a.FHalfCarry=a.FCarry=!1;a.FZero=a.FSubtract=!0},function(a){var b=a.registerA-a.registerB-(a.FCarry?1:0);a.FHalfCarry=0>(a.registerA&15)-(a.registerB&15)-(a.FCarry?1:0);a.FCarry=
0>b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!0},function(a){var b=a.registerA-a.registerC-(a.FCarry?1:0);a.FHalfCarry=0>(a.registerA&15)-(a.registerC&15)-(a.FCarry?1:0);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!0},function(a){var b=a.registerA-a.registerD-(a.FCarry?1:0);a.FHalfCarry=0>(a.registerA&15)-(a.registerD&15)-(a.FCarry?1:0);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!0},function(a){var b=a.registerA-a.registerE-(a.FCarry?1:0);a.FHalfCarry=
0>(a.registerA&15)-(a.registerE&15)-(a.FCarry?1:0);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!0},function(a){var b=a.registersHL>>8,c=a.registerA-b-(a.FCarry?1:0);a.FHalfCarry=0>(a.registerA&15)-(b&15)-(a.FCarry?1:0);a.FCarry=0>c;a.registerA=c&255;a.FZero=0==a.registerA;a.FSubtract=!0},function(a){var b=a.registerA-(a.registersHL&255)-(a.FCarry?1:0);a.FHalfCarry=0>(a.registerA&15)-(a.registersHL&15)-(a.FCarry?1:0);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=
!0},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL),c=a.registerA-b-(a.FCarry?1:0);a.FHalfCarry=0>(a.registerA&15)-(b&15)-(a.FCarry?1:0);a.FCarry=0>c;a.registerA=c&255;a.FZero=0==a.registerA;a.FSubtract=!0},function(a){a.FCarry?(a.FZero=!1,a.FSubtract=a.FHalfCarry=a.FCarry=!0,a.registerA=255):(a.FHalfCarry=a.FCarry=!1,a.FSubtract=a.FZero=!0,a.registerA=0)},function(a){a.registerA&=a.registerB;a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.registerA&=
a.registerC;a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.registerA&=a.registerD;a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.registerA&=a.registerE;a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.registerA&=a.registersHL>>8;a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.registerA&=a.registersHL;a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.registerA&=
a.memoryReader[a.registersHL](a,a.registersHL);a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.registerA^=a.registerB;a.FZero=0==a.registerA;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA^=a.registerC;a.FZero=0==a.registerA;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA^=a.registerD;a.FZero=0==a.registerA;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA^=
a.registerE;a.FZero=0==a.registerA;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA^=a.registersHL>>8;a.FZero=0==a.registerA;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA^=a.registersHL&255;a.FZero=0==a.registerA;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA^=a.memoryReader[a.registersHL](a,a.registersHL);a.FZero=0==a.registerA;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA=0;a.FZero=!0;a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.registerA|=
a.registerB;a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.registerA|=a.registerC;a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.registerA|=a.registerD;a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.registerA|=a.registerE;a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.registerA|=a.registersHL>>8;a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.registerA|=a.registersHL&
255;a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.registerA|=a.memoryReader[a.registersHL](a,a.registersHL);a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.FZero=0==a.registerA;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){var b=a.registerA-a.registerB;a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-a.registerC;a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=
!0},function(a){var b=a.registerA-a.registerD;a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-a.registerE;a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-(a.registersHL>>8);a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=!0},function(a){var b=a.registerA-(a.registersHL&255);a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=!0},
function(a){var b=a.registerA-a.memoryReader[a.registersHL](a,a.registersHL);a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=!0},function(a){a.FHalfCarry=a.FCarry=!1;a.FZero=a.FSubtract=!0},function(a){a.FZero||(a.programCounter=a.memoryRead(a.stackPointer+1&65535)<<8|a.memoryReader[a.stackPointer](a,a.stackPointer),a.stackPointer=a.stackPointer+2&65535,a.CPUTicks+=12)},function(a){a.registerC=a.memoryReader[a.stackPointer](a,a.stackPointer);a.registerB=a.memoryRead(a.stackPointer+
1&65535);a.stackPointer=a.stackPointer+2&65535},function(a){a.FZero?a.programCounter=a.programCounter+2&65535:(a.programCounter=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter),a.CPUTicks+=4)},function(a){a.programCounter=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter)},function(a){if(a.FZero)a.programCounter=a.programCounter+2&65535;else{var b=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,
a.programCounter);a.programCounter=a.programCounter+2&65535;a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=b;a.CPUTicks+=12}},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.registerB);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,
a.registerC)},function(a){var b=a.registerA+a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;a.FHalfCarry=(b&15)<(a.registerA&15);a.FCarry=255<b;a.registerA=b&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=0},function(a){a.FZero&&
(a.programCounter=a.memoryRead(a.stackPointer+1&65535)<<8|a.memoryReader[a.stackPointer](a,a.stackPointer),a.stackPointer=a.stackPointer+2&65535,a.CPUTicks+=12)},function(a){a.programCounter=a.memoryRead(a.stackPointer+1&65535)<<8|a.memoryReader[a.stackPointer](a,a.stackPointer);a.stackPointer=a.stackPointer+2&65535},function(a){a.FZero?(a.programCounter=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter),a.CPUTicks+=4):a.programCounter=a.programCounter+
2&65535},function(a){var b=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;a.CPUTicks+=a.SecondaryTICKTable[b];a.CBOPCODE[b](a)},function(a){if(a.FZero){var b=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+2&65535;a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,
a.stackPointer,a.programCounter&255);a.programCounter=b;a.CPUTicks+=12}else a.programCounter=a.programCounter+2&65535},function(a){var b=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+2&65535;a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=
b},function(a){var b=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;var c=a.registerA+b+(a.FCarry?1:0);a.FHalfCarry=15<(a.registerA&15)+(b&15)+(a.FCarry?1:0);a.FCarry=255<c;a.registerA=c&255;a.FZero=0==a.registerA;a.FSubtract=!1},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);
a.programCounter=8},function(a){a.FCarry||(a.programCounter=a.memoryRead(a.stackPointer+1&65535)<<8|a.memoryReader[a.stackPointer](a,a.stackPointer),a.stackPointer=a.stackPointer+2&65535,a.CPUTicks+=12)},function(a){a.registerE=a.memoryReader[a.stackPointer](a,a.stackPointer);a.registerD=a.memoryRead(a.stackPointer+1&65535);a.stackPointer=a.stackPointer+2&65535},function(a){a.FCarry?a.programCounter=a.programCounter+2&65535:(a.programCounter=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,
a.programCounter),a.CPUTicks+=4)},function(a){cout("Illegal op code 0xD3 called, pausing emulation.",2);pause()},function(a){if(a.FCarry)a.programCounter=a.programCounter+2&65535;else{var b=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+2&65535;a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,
a.stackPointer,a.programCounter&255);a.programCounter=b;a.CPUTicks+=12}},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.registerD);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.registerE)},function(a){var b=a.registerA-a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;a.FHalfCarry=(a.registerA&15)<(b&15);a.FCarry=0>b;a.registerA=b&255;a.FZero=0==b;a.FSubtract=
!0},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=16},function(a){a.FCarry&&(a.programCounter=a.memoryRead(a.stackPointer+1&65535)<<8|a.memoryReader[a.stackPointer](a,a.stackPointer),a.stackPointer=a.stackPointer+2&65535,a.CPUTicks+=12)},function(a){a.programCounter=a.memoryRead(a.stackPointer+1&65535)<<
8|a.memoryReader[a.stackPointer](a,a.stackPointer);a.stackPointer=a.stackPointer+2&65535;a.IRQEnableDelay=2==a.IRQEnableDelay||118==a.memoryReader[a.programCounter](a,a.programCounter)?1:2},function(a){a.FCarry?(a.programCounter=a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter),a.CPUTicks+=4):a.programCounter=a.programCounter+2&65535},function(a){cout("Illegal op code 0xDB called, pausing emulation.",2);pause()},function(a){if(a.FCarry){var b=a.memoryRead(a.programCounter+
1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+2&65535;a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=b;a.CPUTicks+=12}else a.programCounter=a.programCounter+2&65535},function(a){cout("Illegal op code 0xDD called, pausing emulation.",2);pause()},function(a){var b=
a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;var c=a.registerA-b-(a.FCarry?1:0);a.FHalfCarry=0>(a.registerA&15)-(b&15)-(a.FCarry?1:0);a.FCarry=0>c;a.registerA=c&255;a.FZero=0==a.registerA;a.FSubtract=!0},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=24},
function(a){a.memoryHighWrite(a.memoryReader[a.programCounter](a,a.programCounter),a.registerA);a.programCounter=a.programCounter+1&65535},function(a){a.registersHL=a.memoryRead(a.stackPointer+1&65535)<<8|a.memoryReader[a.stackPointer](a,a.stackPointer);a.stackPointer=a.stackPointer+2&65535},function(a){a.memoryHighWriter[a.registerC](a,a.registerC,a.registerA)},function(a){cout("Illegal op code 0xE3 called, pausing emulation.",2);pause()},function(a){cout("Illegal op code 0xE4 called, pausing emulation.",
2);pause()},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.registersHL>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.registersHL&255)},function(a){a.registerA&=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;a.FZero=0==a.registerA;a.FHalfCarry=!0;a.FSubtract=a.FCarry=!1},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,
a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=32},function(a){var b=a.memoryReader[a.programCounter](a,a.programCounter)<<24>>24;a.programCounter=a.programCounter+1&65535;var c=a.stackPointer+b&65535;b=a.stackPointer^b^c;a.stackPointer=c;a.FCarry=256==(b&256);a.FHalfCarry=16==(b&16);a.FZero=a.FSubtract=!1},function(a){a.programCounter=a.registersHL},function(a){a.memoryWrite(a.memoryRead(a.programCounter+
1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter),a.registerA);a.programCounter=a.programCounter+2&65535},function(a){cout("Illegal op code 0xEB called, pausing emulation.",2);pause()},function(a){cout("Illegal op code 0xEC called, pausing emulation.",2);pause()},function(a){cout("Illegal op code 0xED called, pausing emulation.",2);pause()},function(a){a.registerA^=a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;a.FZero=0==a.registerA;
a.FSubtract=a.FHalfCarry=a.FCarry=!1},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=40},function(a){a.registerA=a.memoryHighRead(a.memoryReader[a.programCounter](a,a.programCounter));a.programCounter=a.programCounter+1&65535},function(a){var b=a.memoryReader[a.stackPointer](a,a.stackPointer);a.FZero=127<
b;a.FSubtract=64==(b&64);a.FHalfCarry=32==(b&32);a.FCarry=16==(b&16);a.registerA=a.memoryRead(a.stackPointer+1&65535);a.stackPointer=a.stackPointer+2&65535},function(a){a.registerA=a.memoryHighReader[a.registerC](a,a.registerC)},function(a){a.IME=!1;a.IRQEnableDelay=0},function(a){cout("Illegal op code 0xF4 called, pausing emulation.",2);pause()},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.registerA);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,
a.stackPointer,(a.FZero?128:0)|(a.FSubtract?64:0)|(a.FHalfCarry?32:0)|(a.FCarry?16:0))},function(a){a.registerA|=a.memoryReader[a.programCounter](a,a.programCounter);a.FZero=0==a.registerA;a.programCounter=a.programCounter+1&65535;a.FSubtract=a.FCarry=a.FHalfCarry=!1},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=
48},function(a){var b=a.memoryReader[a.programCounter](a,a.programCounter)<<24>>24;a.programCounter=a.programCounter+1&65535;a.registersHL=a.stackPointer+b&65535;b=a.stackPointer^b^a.registersHL;a.FCarry=256==(b&256);a.FHalfCarry=16==(b&16);a.FZero=a.FSubtract=!1},function(a){a.stackPointer=a.registersHL},function(a){a.registerA=a.memoryRead(a.memoryRead(a.programCounter+1&65535)<<8|a.memoryReader[a.programCounter](a,a.programCounter));a.programCounter=a.programCounter+2&65535},function(a){a.IRQEnableDelay=
2==a.IRQEnableDelay||118==a.memoryReader[a.programCounter](a,a.programCounter)?1:2},function(a){cout("Illegal op code 0xFC called, pausing emulation.",2);pause()},function(a){cout("Illegal op code 0xFD called, pausing emulation.",2);pause()},function(a){var b=a.registerA-a.memoryReader[a.programCounter](a,a.programCounter);a.programCounter=a.programCounter+1&65535;a.FHalfCarry=(b&15)>(a.registerA&15);a.FCarry=0>b;a.FZero=0==b;a.FSubtract=!0},function(a){a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,
a.stackPointer,a.programCounter>>8);a.stackPointer=a.stackPointer-1&65535;a.memoryWriter[a.stackPointer](a,a.stackPointer,a.programCounter&255);a.programCounter=56}];
GameBoyCore.prototype.CBOPCODE=[function(a){a.FCarry=127<a.registerB;a.registerB=a.registerB<<1&255|(a.FCarry?1:0);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerB},function(a){a.FCarry=127<a.registerC;a.registerC=a.registerC<<1&255|(a.FCarry?1:0);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerC},function(a){a.FCarry=127<a.registerD;a.registerD=a.registerD<<1&255|(a.FCarry?1:0);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerD},function(a){a.FCarry=127<a.registerE;a.registerE=a.registerE<<1&
255|(a.FCarry?1:0);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerE},function(a){a.FCarry=32767<a.registersHL;a.registersHL=a.registersHL<<1&65024|(a.FCarry?256:0)|a.registersHL&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=256>a.registersHL},function(a){a.FCarry=128==(a.registersHL&128);a.registersHL=a.registersHL&65280|a.registersHL<<1&255|(a.FCarry?1:0);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==(a.registersHL&255)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL);a.FCarry=127<b;b=b<<1&
255|(a.FCarry?1:0);a.memoryWriter[a.registersHL](a,a.registersHL,b);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==b},function(a){a.FCarry=127<a.registerA;a.registerA=a.registerA<<1&255|(a.FCarry?1:0);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerA},function(a){a.FCarry=1==(a.registerB&1);a.registerB=(a.FCarry?128:0)|a.registerB>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerB},function(a){a.FCarry=1==(a.registerC&1);a.registerC=(a.FCarry?128:0)|a.registerC>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=
0==a.registerC},function(a){a.FCarry=1==(a.registerD&1);a.registerD=(a.FCarry?128:0)|a.registerD>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerD},function(a){a.FCarry=1==(a.registerE&1);a.registerE=(a.FCarry?128:0)|a.registerE>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerE},function(a){a.FCarry=256==(a.registersHL&256);a.registersHL=(a.FCarry?32768:0)|a.registersHL>>1&65280|a.registersHL&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=256>a.registersHL},function(a){a.FCarry=1==(a.registersHL&
1);a.registersHL=a.registersHL&65280|(a.FCarry?128:0)|(a.registersHL&255)>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==(a.registersHL&255)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL);a.FCarry=1==(b&1);b=(a.FCarry?128:0)|b>>1;a.memoryWriter[a.registersHL](a,a.registersHL,b);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==b},function(a){a.FCarry=1==(a.registerA&1);a.registerA=(a.FCarry?128:0)|a.registerA>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerA},function(a){var b=127<a.registerB;
a.registerB=a.registerB<<1&255|(a.FCarry?1:0);a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerB},function(a){var b=127<a.registerC;a.registerC=a.registerC<<1&255|(a.FCarry?1:0);a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerC},function(a){var b=127<a.registerD;a.registerD=a.registerD<<1&255|(a.FCarry?1:0);a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerD},function(a){var b=127<a.registerE;a.registerE=a.registerE<<1&255|(a.FCarry?1:0);a.FCarry=b;a.FHalfCarry=a.FSubtract=
!1;a.FZero=0==a.registerE},function(a){var b=32767<a.registersHL;a.registersHL=a.registersHL<<1&65024|(a.FCarry?256:0)|a.registersHL&255;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=256>a.registersHL},function(a){var b=128==(a.registersHL&128);a.registersHL=a.registersHL&65280|a.registersHL<<1&255|(a.FCarry?1:0);a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==(a.registersHL&255)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL),c=127<b;b=b<<1&255|(a.FCarry?1:0);a.FCarry=c;a.memoryWriter[a.registersHL](a,
a.registersHL,b);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==b},function(a){var b=127<a.registerA;a.registerA=a.registerA<<1&255|(a.FCarry?1:0);a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerA},function(a){var b=1==(a.registerB&1);a.registerB=(a.FCarry?128:0)|a.registerB>>1;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerB},function(a){var b=1==(a.registerC&1);a.registerC=(a.FCarry?128:0)|a.registerC>>1;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerC},function(a){var b=
1==(a.registerD&1);a.registerD=(a.FCarry?128:0)|a.registerD>>1;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerD},function(a){var b=1==(a.registerE&1);a.registerE=(a.FCarry?128:0)|a.registerE>>1;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerE},function(a){var b=256==(a.registersHL&256);a.registersHL=(a.FCarry?32768:0)|a.registersHL>>1&65280|a.registersHL&255;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=256>a.registersHL},function(a){var b=1==(a.registersHL&1);a.registersHL=
a.registersHL&65280|(a.FCarry?128:0)|(a.registersHL&255)>>1;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==(a.registersHL&255)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL),c=1==(b&1);b=(a.FCarry?128:0)|b>>1;a.FCarry=c;a.memoryWriter[a.registersHL](a,a.registersHL,b);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==b},function(a){var b=1==(a.registerA&1);a.registerA=(a.FCarry?128:0)|a.registerA>>1;a.FCarry=b;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerA},function(a){a.FCarry=127<
a.registerB;a.registerB=a.registerB<<1&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerB},function(a){a.FCarry=127<a.registerC;a.registerC=a.registerC<<1&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerC},function(a){a.FCarry=127<a.registerD;a.registerD=a.registerD<<1&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerD},function(a){a.FCarry=127<a.registerE;a.registerE=a.registerE<<1&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerE},function(a){a.FCarry=32767<a.registersHL;a.registersHL=
a.registersHL<<1&65024|a.registersHL&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=256>a.registersHL},function(a){a.FCarry=128==(a.registersHL&128);a.registersHL=a.registersHL&65280|a.registersHL<<1&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==(a.registersHL&255)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL);a.FCarry=127<b;b=b<<1&255;a.memoryWriter[a.registersHL](a,a.registersHL,b);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==b},function(a){a.FCarry=127<a.registerA;a.registerA=a.registerA<<
1&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerA},function(a){a.FCarry=1==(a.registerB&1);a.registerB=a.registerB&128|a.registerB>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerB},function(a){a.FCarry=1==(a.registerC&1);a.registerC=a.registerC&128|a.registerC>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerC},function(a){a.FCarry=1==(a.registerD&1);a.registerD=a.registerD&128|a.registerD>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerD},function(a){a.FCarry=1==(a.registerE&1);
a.registerE=a.registerE&128|a.registerE>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerE},function(a){a.FCarry=256==(a.registersHL&256);a.registersHL=a.registersHL>>1&65280|a.registersHL&33023;a.FHalfCarry=a.FSubtract=!1;a.FZero=256>a.registersHL},function(a){a.FCarry=1==(a.registersHL&1);a.registersHL=a.registersHL&65408|(a.registersHL&255)>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==(a.registersHL&255)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL);a.FCarry=1==(b&1);b=b&128|
b>>1;a.memoryWriter[a.registersHL](a,a.registersHL,b);a.FHalfCarry=a.FSubtract=!1;a.FZero=0==b},function(a){a.FCarry=1==(a.registerA&1);a.registerA=a.registerA&128|a.registerA>>1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerA},function(a){a.registerB=(a.registerB&15)<<4|a.registerB>>4;a.FZero=0==a.registerB;a.FCarry=a.FHalfCarry=a.FSubtract=!1},function(a){a.registerC=(a.registerC&15)<<4|a.registerC>>4;a.FZero=0==a.registerC;a.FCarry=a.FHalfCarry=a.FSubtract=!1},function(a){a.registerD=(a.registerD&
15)<<4|a.registerD>>4;a.FZero=0==a.registerD;a.FCarry=a.FHalfCarry=a.FSubtract=!1},function(a){a.registerE=(a.registerE&15)<<4|a.registerE>>4;a.FZero=0==a.registerE;a.FCarry=a.FHalfCarry=a.FSubtract=!1},function(a){a.registersHL=(a.registersHL&3840)<<4|(a.registersHL&61440)>>4|a.registersHL&255;a.FZero=256>a.registersHL;a.FCarry=a.FHalfCarry=a.FSubtract=!1},function(a){a.registersHL=a.registersHL&65280|(a.registersHL&15)<<4|(a.registersHL&240)>>4;a.FZero=0==(a.registersHL&255);a.FCarry=a.FHalfCarry=
a.FSubtract=!1},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL);b=(b&15)<<4|b>>4;a.memoryWriter[a.registersHL](a,a.registersHL,b);a.FZero=0==b;a.FCarry=a.FHalfCarry=a.FSubtract=!1},function(a){a.registerA=(a.registerA&15)<<4|a.registerA>>4;a.FZero=0==a.registerA;a.FCarry=a.FHalfCarry=a.FSubtract=!1},function(a){a.FCarry=1==(a.registerB&1);a.registerB>>=1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerB},function(a){a.FCarry=1==(a.registerC&1);a.registerC>>=1;a.FHalfCarry=a.FSubtract=
!1;a.FZero=0==a.registerC},function(a){a.FCarry=1==(a.registerD&1);a.registerD>>=1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerD},function(a){a.FCarry=1==(a.registerE&1);a.registerE>>=1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerE},function(a){a.FCarry=256==(a.registersHL&256);a.registersHL=a.registersHL>>1&65280|a.registersHL&255;a.FHalfCarry=a.FSubtract=!1;a.FZero=256>a.registersHL},function(a){a.FCarry=1==(a.registersHL&1);a.registersHL=a.registersHL&65280|(a.registersHL&255)>>1;a.FHalfCarry=
a.FSubtract=!1;a.FZero=0==(a.registersHL&255)},function(a){var b=a.memoryReader[a.registersHL](a,a.registersHL);a.FCarry=1==(b&1);a.memoryWriter[a.registersHL](a,a.registersHL,b>>1);a.FHalfCarry=a.FSubtract=!1;a.FZero=2>b},function(a){a.FCarry=1==(a.registerA&1);a.registerA>>=1;a.FHalfCarry=a.FSubtract=!1;a.FZero=0==a.registerA},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerB&1)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&1)},function(a){a.FHalfCarry=!0;
a.FSubtract=!1;a.FZero=0==(a.registerD&1)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&1)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&256)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&1)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&1)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerA&1)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerB&
2)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&2)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerD&2)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&2)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&512)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&2)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&2)},function(a){a.FHalfCarry=!0;a.FSubtract=
!1;a.FZero=0==(a.registerA&2)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerB&4)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&4)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerD&4)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&4)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&1024)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&4)},function(a){a.FHalfCarry=!0;a.FSubtract=
!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&4)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerA&4)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerB&8)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&8)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerD&8)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&8)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&2048)},function(a){a.FHalfCarry=
!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&8)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&8)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerA&8)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerB&16)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&16)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerD&16)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&
16)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&4096)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&16)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&16)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerA&16)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerB&32)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&32)},function(a){a.FHalfCarry=
!0;a.FSubtract=!1;a.FZero=0==(a.registerD&32)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&32)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&8192)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&32)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&32)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerA&32)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==
(a.registerB&64)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&64)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerD&64)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&64)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&16384)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&64)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&64)},function(a){a.FHalfCarry=
!0;a.FSubtract=!1;a.FZero=0==(a.registerA&64)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerB&128)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerC&128)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerD&128)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerE&128)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&32768)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registersHL&128)},function(a){a.FHalfCarry=
!0;a.FSubtract=!1;a.FZero=0==(a.memoryReader[a.registersHL](a,a.registersHL)&128)},function(a){a.FHalfCarry=!0;a.FSubtract=!1;a.FZero=0==(a.registerA&128)},function(a){a.registerB&=254},function(a){a.registerC&=254},function(a){a.registerD&=254},function(a){a.registerE&=254},function(a){a.registersHL&=65279},function(a){a.registersHL&=65534},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)&254)},function(a){a.registerA&=254},function(a){a.registerB&=
253},function(a){a.registerC&=253},function(a){a.registerD&=253},function(a){a.registerE&=253},function(a){a.registersHL&=65023},function(a){a.registersHL&=65533},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)&253)},function(a){a.registerA&=253},function(a){a.registerB&=251},function(a){a.registerC&=251},function(a){a.registerD&=251},function(a){a.registerE&=251},function(a){a.registersHL&=64511},function(a){a.registersHL&=65531},function(a){a.memoryWriter[a.registersHL](a,
a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)&251)},function(a){a.registerA&=251},function(a){a.registerB&=247},function(a){a.registerC&=247},function(a){a.registerD&=247},function(a){a.registerE&=247},function(a){a.registersHL&=63487},function(a){a.registersHL&=65527},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)&247)},function(a){a.registerA&=247},function(a){a.registerB&=239},function(a){a.registerC&=239},function(a){a.registerD&=
239},function(a){a.registerE&=239},function(a){a.registersHL&=61439},function(a){a.registersHL&=65519},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)&239)},function(a){a.registerA&=239},function(a){a.registerB&=223},function(a){a.registerC&=223},function(a){a.registerD&=223},function(a){a.registerE&=223},function(a){a.registersHL&=57343},function(a){a.registersHL&=65503},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,
a.registersHL)&223)},function(a){a.registerA&=223},function(a){a.registerB&=191},function(a){a.registerC&=191},function(a){a.registerD&=191},function(a){a.registerE&=191},function(a){a.registersHL&=49151},function(a){a.registersHL&=65471},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)&191)},function(a){a.registerA&=191},function(a){a.registerB&=127},function(a){a.registerC&=127},function(a){a.registerD&=127},function(a){a.registerE&=127},function(a){a.registersHL&=
32767},function(a){a.registersHL&=65407},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)&127)},function(a){a.registerA&=127},function(a){a.registerB|=1},function(a){a.registerC|=1},function(a){a.registerD|=1},function(a){a.registerE|=1},function(a){a.registersHL|=256},function(a){a.registersHL|=1},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|1)},function(a){a.registerA|=1},function(a){a.registerB|=
2},function(a){a.registerC|=2},function(a){a.registerD|=2},function(a){a.registerE|=2},function(a){a.registersHL|=512},function(a){a.registersHL|=2},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|2)},function(a){a.registerA|=2},function(a){a.registerB|=4},function(a){a.registerC|=4},function(a){a.registerD|=4},function(a){a.registerE|=4},function(a){a.registersHL|=1024},function(a){a.registersHL|=4},function(a){a.memoryWriter[a.registersHL](a,
a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|4)},function(a){a.registerA|=4},function(a){a.registerB|=8},function(a){a.registerC|=8},function(a){a.registerD|=8},function(a){a.registerE|=8},function(a){a.registersHL|=2048},function(a){a.registersHL|=8},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|8)},function(a){a.registerA|=8},function(a){a.registerB|=16},function(a){a.registerC|=16},function(a){a.registerD|=16},function(a){a.registerE|=
16},function(a){a.registersHL|=4096},function(a){a.registersHL|=16},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|16)},function(a){a.registerA|=16},function(a){a.registerB|=32},function(a){a.registerC|=32},function(a){a.registerD|=32},function(a){a.registerE|=32},function(a){a.registersHL|=8192},function(a){a.registersHL|=32},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|32)},function(a){a.registerA|=
32},function(a){a.registerB|=64},function(a){a.registerC|=64},function(a){a.registerD|=64},function(a){a.registerE|=64},function(a){a.registersHL|=16384},function(a){a.registersHL|=64},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|64)},function(a){a.registerA|=64},function(a){a.registerB|=128},function(a){a.registerC|=128},function(a){a.registerD|=128},function(a){a.registerE|=128},function(a){a.registersHL|=32768},function(a){a.registersHL|=
128},function(a){a.memoryWriter[a.registersHL](a,a.registersHL,a.memoryReader[a.registersHL](a,a.registersHL)|128)},function(a){a.registerA|=128}];
GameBoyCore.prototype.TICKTable=[4,12,8,8,4,4,8,4,20,8,8,8,4,4,8,4,4,12,8,8,4,4,8,4,12,8,8,8,4,4,8,4,8,12,8,8,4,4,8,4,8,8,8,8,4,4,8,4,8,12,8,8,12,12,12,4,8,8,8,8,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,8,8,8,8,8,8,4,8,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,8,12,12,16,12,16,8,16,8,16,12,0,12,24,8,16,8,12,12,4,12,16,8,16,8,16,12,4,12,
4,8,16,12,12,8,4,4,16,8,16,16,4,16,4,4,4,8,16,12,12,8,4,4,16,8,16,12,8,16,4,0,4,8,16];
GameBoyCore.prototype.SecondaryTICKTable=[8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,
8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8];GameBoyCore.prototype.saveSRAMState=function(){return this.cBATT&&0!=this.MBCRam.length?this.fromTypedArray(this.MBCRam):[]};
GameBoyCore.prototype.saveRTCState=function(){return this.cTIMER?[this.lastIteration,this.RTCisLatched,this.latchedSeconds,this.latchedMinutes,this.latchedHours,this.latchedLDays,this.latchedHDays,this.RTCSeconds,this.RTCMinutes,this.RTCHours,this.RTCDays,this.RTCDayOverFlow,this.RTCHALT]:[]};
GameBoyCore.prototype.saveState=function(){return[this.fromTypedArray(this.ROM),this.inBootstrap,this.registerA,this.FZero,this.FSubtract,this.FHalfCarry,this.FCarry,this.registerB,this.registerC,this.registerD,this.registerE,this.registersHL,this.stackPointer,this.programCounter,this.halt,this.IME,this.hdmaRunning,this.CPUTicks,this.doubleSpeedShifter,this.fromTypedArray(this.memory),this.fromTypedArray(this.MBCRam),this.fromTypedArray(this.VRAM),this.currVRAMBank,this.fromTypedArray(this.GBCMemory),
this.MBC1Mode,this.MBCRAMBanksEnabled,this.currMBCRAMBank,this.currMBCRAMBankPosition,this.cGBC,this.gbcRamBank,this.gbcRamBankPosition,this.ROMBank1offs,this.currentROMBank,this.cartridgeType,this.name,this.gameCode,this.modeSTAT,this.LYCMatchTriggerSTAT,this.mode2TriggerSTAT,this.mode1TriggerSTAT,this.mode0TriggerSTAT,this.LCDisOn,this.gfxWindowCHRBankPosition,this.gfxWindowDisplay,this.gfxSpriteShow,this.gfxSpriteNormalHeight,this.gfxBackgroundCHRBankPosition,this.gfxBackgroundBankOffset,this.TIMAEnabled,
this.DIVTicks,this.LCDTicks,this.timerTicks,this.TACClocker,this.serialTimer,this.serialShiftTimer,this.serialShiftTimerAllocated,this.IRQEnableDelay,this.lastIteration,this.cMBC1,this.cMBC2,this.cMBC3,this.cMBC5,this.cMBC7,this.cSRAM,this.cMMMO1,this.cRUMBLE,this.cCamera,this.cTAMA5,this.cHuC3,this.cHuC1,this.drewBlank,this.fromTypedArray(this.frameBuffer),this.bgEnabled,this.BGPriorityEnabled,this.channel1FrequencyTracker,this.channel1FrequencyCounter,this.channel1totalLength,this.channel1envelopeVolume,
this.channel1envelopeType,this.channel1envelopeSweeps,this.channel1envelopeSweepsLast,this.channel1consecutive,this.channel1frequency,this.channel1SweepFault,this.channel1ShadowFrequency,this.channel1timeSweep,this.channel1lastTimeSweep,this.channel1Swept,this.channel1frequencySweepDivider,this.channel1decreaseSweep,this.channel2FrequencyTracker,this.channel2FrequencyCounter,this.channel2totalLength,this.channel2envelopeVolume,this.channel2envelopeType,this.channel2envelopeSweeps,this.channel2envelopeSweepsLast,
this.channel2consecutive,this.channel2frequency,this.channel3canPlay,this.channel3totalLength,this.channel3patternType,this.channel3frequency,this.channel3consecutive,this.fromTypedArray(this.channel3PCM),this.channel4FrequencyPeriod,this.channel4lastSampleLookup,this.channel4totalLength,this.channel4envelopeVolume,this.channel4currentVolume,this.channel4envelopeType,this.channel4envelopeSweeps,this.channel4envelopeSweepsLast,this.channel4consecutive,this.channel4BitRange,this.soundMasterEnabled,
this.VinLeftChannelMasterVolume,this.VinRightChannelMasterVolume,this.leftChannel1,this.leftChannel2,this.leftChannel3,this.leftChannel4,this.rightChannel1,this.rightChannel2,this.rightChannel3,this.rightChannel4,this.channel1currentSampleLeft,this.channel1currentSampleRight,this.channel2currentSampleLeft,this.channel2currentSampleRight,this.channel3currentSampleLeft,this.channel3currentSampleRight,this.channel4currentSampleLeft,this.channel4currentSampleRight,this.channel1currentSampleLeftSecondary,
this.channel1currentSampleRightSecondary,this.channel2currentSampleLeftSecondary,this.channel2currentSampleRightSecondary,this.channel3currentSampleLeftSecondary,this.channel3currentSampleRightSecondary,this.channel4currentSampleLeftSecondary,this.channel4currentSampleRightSecondary,this.channel1currentSampleLeftTrimary,this.channel1currentSampleRightTrimary,this.channel2currentSampleLeftTrimary,this.channel2currentSampleRightTrimary,this.mixerOutputCache,this.channel1DutyTracker,this.channel1CachedDuty,
this.channel2DutyTracker,this.channel2CachedDuty,this.channel1Enabled,this.channel2Enabled,this.channel3Enabled,this.channel4Enabled,this.sequencerClocks,this.sequencePosition,this.channel3Counter,this.channel4Counter,this.cachedChannel3Sample,this.cachedChannel4Sample,this.channel3FrequencyPeriod,this.channel3lastSampleLookup,this.actualScanLine,this.lastUnrenderedLine,this.queuedScanLines,this.RTCisLatched,this.latchedSeconds,this.latchedMinutes,this.latchedHours,this.latchedLDays,this.latchedHDays,
this.RTCSeconds,this.RTCMinutes,this.RTCHours,this.RTCDays,this.RTCDayOverFlow,this.RTCHALT,this.usedBootROM,this.skipPCIncrement,this.STATTracker,this.gbcRamBankPositionECHO,this.numRAMBanks,this.windowY,this.windowX,this.fromTypedArray(this.gbcOBJRawPalette),this.fromTypedArray(this.gbcBGRawPalette),this.fromTypedArray(this.gbOBJPalette),this.fromTypedArray(this.gbBGPalette),this.fromTypedArray(this.gbcOBJPalette),this.fromTypedArray(this.gbcBGPalette),this.fromTypedArray(this.gbBGColorizedPalette),
this.fromTypedArray(this.gbOBJColorizedPalette),this.fromTypedArray(this.cachedBGPaletteConversion),this.fromTypedArray(this.cachedOBJPaletteConversion),this.fromTypedArray(this.BGCHRBank1),this.fromTypedArray(this.BGCHRBank2),this.haltPostClocks,this.interruptsRequested,this.interruptsEnabled,this.remainingClocks,this.colorizedGBPalettes,this.backgroundY,this.backgroundX,this.CPUStopped,this.audioClocksUntilNextEvent,this.audioClocksUntilNextEventCounter]};
GameBoyCore.prototype.returnFromState=function(a){var b=0;a=a.slice(0);this.ROM=this.toTypedArray(a[b++],"uint8");this.ROMBankEdge=Math.floor(this.ROM.length/16384);this.inBootstrap=a[b++];this.registerA=a[b++];this.FZero=a[b++];this.FSubtract=a[b++];this.FHalfCarry=a[b++];this.FCarry=a[b++];this.registerB=a[b++];this.registerC=a[b++];this.registerD=a[b++];this.registerE=a[b++];this.registersHL=a[b++];this.stackPointer=a[b++];this.programCounter=a[b++];this.halt=a[b++];this.IME=a[b++];this.hdmaRunning=
a[b++];this.CPUTicks=a[b++];this.doubleSpeedShifter=a[b++];this.memory=this.toTypedArray(a[b++],"uint8");this.MBCRam=this.toTypedArray(a[b++],"uint8");this.VRAM=this.toTypedArray(a[b++],"uint8");this.currVRAMBank=a[b++];this.GBCMemory=this.toTypedArray(a[b++],"uint8");this.MBC1Mode=a[b++];this.MBCRAMBanksEnabled=a[b++];this.currMBCRAMBank=a[b++];this.currMBCRAMBankPosition=a[b++];this.cGBC=a[b++];this.gbcRamBank=a[b++];this.gbcRamBankPosition=a[b++];this.ROMBank1offs=a[b++];this.currentROMBank=a[b++];
this.cartridgeType=a[b++];this.name=a[b++];this.gameCode=a[b++];this.modeSTAT=a[b++];this.LYCMatchTriggerSTAT=a[b++];this.mode2TriggerSTAT=a[b++];this.mode1TriggerSTAT=a[b++];this.mode0TriggerSTAT=a[b++];this.LCDisOn=a[b++];this.gfxWindowCHRBankPosition=a[b++];this.gfxWindowDisplay=a[b++];this.gfxSpriteShow=a[b++];this.gfxSpriteNormalHeight=a[b++];this.gfxBackgroundCHRBankPosition=a[b++];this.gfxBackgroundBankOffset=a[b++];this.TIMAEnabled=a[b++];this.DIVTicks=a[b++];this.LCDTicks=a[b++];this.timerTicks=
a[b++];this.TACClocker=a[b++];this.serialTimer=a[b++];this.serialShiftTimer=a[b++];this.serialShiftTimerAllocated=a[b++];this.IRQEnableDelay=a[b++];this.lastIteration=a[b++];this.cMBC1=a[b++];this.cMBC2=a[b++];this.cMBC3=a[b++];this.cMBC5=a[b++];this.cMBC7=a[b++];this.cSRAM=a[b++];this.cMMMO1=a[b++];this.cRUMBLE=a[b++];this.cCamera=a[b++];this.cTAMA5=a[b++];this.cHuC3=a[b++];this.cHuC1=a[b++];this.drewBlank=a[b++];this.frameBuffer=this.toTypedArray(a[b++],"int32");this.bgEnabled=a[b++];this.BGPriorityEnabled=
a[b++];this.channel1FrequencyTracker=a[b++];this.channel1FrequencyCounter=a[b++];this.channel1totalLength=a[b++];this.channel1envelopeVolume=a[b++];this.channel1envelopeType=a[b++];this.channel1envelopeSweeps=a[b++];this.channel1envelopeSweepsLast=a[b++];this.channel1consecutive=a[b++];this.channel1frequency=a[b++];this.channel1SweepFault=a[b++];this.channel1ShadowFrequency=a[b++];this.channel1timeSweep=a[b++];this.channel1lastTimeSweep=a[b++];this.channel1Swept=a[b++];this.channel1frequencySweepDivider=
a[b++];this.channel1decreaseSweep=a[b++];this.channel2FrequencyTracker=a[b++];this.channel2FrequencyCounter=a[b++];this.channel2totalLength=a[b++];this.channel2envelopeVolume=a[b++];this.channel2envelopeType=a[b++];this.channel2envelopeSweeps=a[b++];this.channel2envelopeSweepsLast=a[b++];this.channel2consecutive=a[b++];this.channel2frequency=a[b++];this.channel3canPlay=a[b++];this.channel3totalLength=a[b++];this.channel3patternType=a[b++];this.channel3frequency=a[b++];this.channel3consecutive=a[b++];
this.channel3PCM=this.toTypedArray(a[b++],"int8");this.channel4FrequencyPeriod=a[b++];this.channel4lastSampleLookup=a[b++];this.channel4totalLength=a[b++];this.channel4envelopeVolume=a[b++];this.channel4currentVolume=a[b++];this.channel4envelopeType=a[b++];this.channel4envelopeSweeps=a[b++];this.channel4envelopeSweepsLast=a[b++];this.channel4consecutive=a[b++];this.channel4BitRange=a[b++];this.soundMasterEnabled=a[b++];this.VinLeftChannelMasterVolume=a[b++];this.VinRightChannelMasterVolume=a[b++];
this.leftChannel1=a[b++];this.leftChannel2=a[b++];this.leftChannel3=a[b++];this.leftChannel4=a[b++];this.rightChannel1=a[b++];this.rightChannel2=a[b++];this.rightChannel3=a[b++];this.rightChannel4=a[b++];this.channel1currentSampleLeft=a[b++];this.channel1currentSampleRight=a[b++];this.channel2currentSampleLeft=a[b++];this.channel2currentSampleRight=a[b++];this.channel3currentSampleLeft=a[b++];this.channel3currentSampleRight=a[b++];this.channel4currentSampleLeft=a[b++];this.channel4currentSampleRight=
a[b++];this.channel1currentSampleLeftSecondary=a[b++];this.channel1currentSampleRightSecondary=a[b++];this.channel2currentSampleLeftSecondary=a[b++];this.channel2currentSampleRightSecondary=a[b++];this.channel3currentSampleLeftSecondary=a[b++];this.channel3currentSampleRightSecondary=a[b++];this.channel4currentSampleLeftSecondary=a[b++];this.channel4currentSampleRightSecondary=a[b++];this.channel1currentSampleLeftTrimary=a[b++];this.channel1currentSampleRightTrimary=a[b++];this.channel2currentSampleLeftTrimary=
a[b++];this.channel2currentSampleRightTrimary=a[b++];this.mixerOutputCache=a[b++];this.channel1DutyTracker=a[b++];this.channel1CachedDuty=a[b++];this.channel2DutyTracker=a[b++];this.channel2CachedDuty=a[b++];this.channel1Enabled=a[b++];this.channel2Enabled=a[b++];this.channel3Enabled=a[b++];this.channel4Enabled=a[b++];this.sequencerClocks=a[b++];this.sequencePosition=a[b++];this.channel3Counter=a[b++];this.channel4Counter=a[b++];this.cachedChannel3Sample=a[b++];this.cachedChannel4Sample=a[b++];this.channel3FrequencyPeriod=
a[b++];this.channel3lastSampleLookup=a[b++];this.actualScanLine=a[b++];this.lastUnrenderedLine=a[b++];this.queuedScanLines=a[b++];this.RTCisLatched=a[b++];this.latchedSeconds=a[b++];this.latchedMinutes=a[b++];this.latchedHours=a[b++];this.latchedLDays=a[b++];this.latchedHDays=a[b++];this.RTCSeconds=a[b++];this.RTCMinutes=a[b++];this.RTCHours=a[b++];this.RTCDays=a[b++];this.RTCDayOverFlow=a[b++];this.RTCHALT=a[b++];this.usedBootROM=a[b++];this.skipPCIncrement=a[b++];this.STATTracker=a[b++];this.gbcRamBankPositionECHO=
a[b++];this.numRAMBanks=a[b++];this.windowY=a[b++];this.windowX=a[b++];this.gbcOBJRawPalette=this.toTypedArray(a[b++],"uint8");this.gbcBGRawPalette=this.toTypedArray(a[b++],"uint8");this.gbOBJPalette=this.toTypedArray(a[b++],"int32");this.gbBGPalette=this.toTypedArray(a[b++],"int32");this.gbcOBJPalette=this.toTypedArray(a[b++],"int32");this.gbcBGPalette=this.toTypedArray(a[b++],"int32");this.gbBGColorizedPalette=this.toTypedArray(a[b++],"int32");this.gbOBJColorizedPalette=this.toTypedArray(a[b++],
"int32");this.cachedBGPaletteConversion=this.toTypedArray(a[b++],"int32");this.cachedOBJPaletteConversion=this.toTypedArray(a[b++],"int32");this.BGCHRBank1=this.toTypedArray(a[b++],"uint8");this.BGCHRBank2=this.toTypedArray(a[b++],"uint8");this.haltPostClocks=a[b++];this.interruptsRequested=a[b++];this.interruptsEnabled=a[b++];this.checkIRQMatching();this.remainingClocks=a[b++];this.colorizedGBPalettes=a[b++];this.backgroundY=a[b++];this.backgroundX=a[b++];this.CPUStopped=a[b++];this.audioClocksUntilNextEvent=
a[b++];this.audioClocksUntilNextEventCounter=a[b];this.fromSaveState=!0;this.TICKTable=this.toTypedArray(this.TICKTable,"uint8");this.SecondaryTICKTable=this.toTypedArray(this.SecondaryTICKTable,"uint8");this.initializeReferencesFromSaveState();this.memoryReadJumpCompile();this.memoryWriteJumpCompile();this.initLCD();this.initSound();this.noiseSampleTable=32767==this.channel4BitRange?this.LSFR15Table:this.LSFR7Table;this.channel4VolumeShifter=32767==this.channel4BitRange?15:7};
GameBoyCore.prototype.returnFromRTCState=function(){if("function"==typeof this.openRTC&&this.cTIMER){var a=this.openRTC(this.name),b=0;this.lastIteration=a[b++];this.RTCisLatched=a[b++];this.latchedSeconds=a[b++];this.latchedMinutes=a[b++];this.latchedHours=a[b++];this.latchedLDays=a[b++];this.latchedHDays=a[b++];this.RTCSeconds=a[b++];this.RTCMinutes=a[b++];this.RTCHours=a[b++];this.RTCDays=a[b++];this.RTCDayOverFlow=a[b++];this.RTCHALT=a[b]}};
GameBoyCore.prototype.start=function(){this.initMemory();this.ROMLoad();this.initLCD();this.initSound();this.run()};GameBoyCore.prototype.initMemory=function(){this.memory=this.getTypedArray(65536,0,"uint8");this.frameBuffer=this.getTypedArray(23040,16316664,"int32");this.BGCHRBank1=this.getTypedArray(2048,0,"uint8");this.TICKTable=this.toTypedArray(this.TICKTable,"uint8");this.SecondaryTICKTable=this.toTypedArray(this.SecondaryTICKTable,"uint8");this.channel3PCM=this.getTypedArray(32,0,"int8")};
GameBoyCore.prototype.generateCacheArray=function(a){for(var b=[],c=0;c<a;)b[c++]=this.getTypedArray(64,0,"uint8");return b};
GameBoyCore.prototype.initSkipBootstrap=function(){for(var a=255;0<=a;){if(48<=a&&64>a)this.memoryWrite(65280|a,this.ffxxDump[a]);else switch(a){case 0:case 1:case 2:case 5:case 7:case 15:case 255:this.memoryWrite(65280|a,this.ffxxDump[a]);break;default:this.memory[65280|a]=this.ffxxDump[a]}--a}this.cGBC?(this.memory[65388]=254,this.memory[65396]=254):(this.memory[65352]=255,this.memory[65353]=255,this.memory[65388]=255,this.memory[65396]=255);cout("Starting without the GBC boot ROM.",0);this.registerA=
this.cGBC?17:1;this.registerB=0;this.registerC=19;this.registerD=0;this.registerE=216;this.FZero=!0;this.FSubtract=!1;this.FCarry=this.FHalfCarry=!0;this.registersHL=333;this.LCDCONTROL=this.LINECONTROL;this.IME=!1;this.IRQLineMatched=0;this.interruptsRequested=225;this.interruptsEnabled=0;this.hdmaRunning=!1;this.CPUTicks=12;this.STATTracker=0;this.modeSTAT=1;this.spriteCount=252;this.mode0TriggerSTAT=this.mode1TriggerSTAT=this.mode2TriggerSTAT=this.LYCMatchTriggerSTAT=!1;this.LCDisOn=!0;this.channel1FrequencyTracker=
8192;this.channel1DutyTracker=0;this.channel1CachedDuty=this.dutyLookup[2];this.channel1envelopeVolume=this.channel1totalLength=0;this.channel1envelopeType=!1;this.channel1envelopeSweepsLast=this.channel1envelopeSweeps=0;this.channel1consecutive=!0;this.channel1frequency=1985;this.channel1SweepFault=!0;this.channel1ShadowFrequency=1985;this.channel1timeSweep=1;this.channel1lastTimeSweep=0;this.channel1Swept=!1;this.channel1frequencySweepDivider=0;this.channel1decreaseSweep=!1;this.channel2FrequencyTracker=
8192;this.channel2DutyTracker=0;this.channel2CachedDuty=this.dutyLookup[2];this.channel2envelopeVolume=this.channel2totalLength=0;this.channel2envelopeType=!1;this.channel2envelopeSweepsLast=this.channel2envelopeSweeps=0;this.channel2consecutive=!0;this.channel2frequency=0;this.channel3canPlay=!1;this.channel3totalLength=0;this.channel3patternType=4;this.channel3frequency=0;this.channel3consecutive=!0;this.channel4FrequencyPeriod=8;this.channel4currentVolume=this.channel4envelopeVolume=this.channel4totalLength=
0;this.channel4envelopeType=!1;this.channel4envelopeSweepsLast=this.channel4envelopeSweeps=0;this.channel4consecutive=!0;this.channel4BitRange=32767;this.channel4VolumeShifter=15;this.channel2FrequencyCounter=this.channel1FrequencyCounter=512;this.channel3FrequencyPeriod=this.channel3Counter=2048;this.channel4lastSampleLookup=this.channel3lastSampleLookup=0;this.VinRightChannelMasterVolume=this.VinLeftChannelMasterVolume=8;this.rightChannel2=this.rightChannel1=this.leftChannel4=this.leftChannel3=
this.leftChannel2=this.leftChannel1=this.soundMasterEnabled=!0;this.rightChannel4=this.rightChannel3=!1;this.DIVTicks=27044;this.LCDTicks=160;this.timerTicks=0;this.TIMAEnabled=!1;this.TACClocker=1024;this.IRQEnableDelay=this.serialShiftTimerAllocated=this.serialShiftTimer=this.serialTimer=0;this.actualScanLine=144;this.lastUnrenderedLine=0;this.gfxSpriteShow=this.gfxWindowDisplay=!1;this.BGPriorityEnabled=this.bgEnabled=this.gfxSpriteNormalHeight=!0;this.drewBlank=this.windowX=this.windowY=this.gfxBackgroundBankOffset=
this.gfxBackgroundCHRBankPosition=this.gfxWindowCHRBankPosition=0;this.midScanlineOffset=-1;this.currentX=0};
GameBoyCore.prototype.initBootstrap=function(){cout("Starting the selected boot ROM.",0);this.stackPointer=this.programCounter=0;this.IME=!1;this.registerE=this.registerD=this.registerC=this.registerB=this.registerA=this.DIVTicks=this.LCDTicks=0;this.FZero=this.FSubtract=this.FHalfCarry=this.FCarry=!1;this.registersHL=0;this.rightChannel4=this.rightChannel3=this.rightChannel2=this.rightChannel1=this.leftChannel4=this.leftChannel3=this.leftChannel2=this.leftChannel1=!1;this.channel2frequency=this.channel1frequency=
0;this.channel4consecutive=this.channel2consecutive=this.channel1consecutive=!1;this.VinRightChannelMasterVolume=this.VinLeftChannelMasterVolume=8;this.memory[65280]=15};
GameBoyCore.prototype.ROMLoad=function(){this.ROM=[];this.usedBootROM=settings[1]&&(!settings[11]&&2048==this.GBCBOOTROM.length||settings[11]&&256==this.GBBOOTROM.length);var a=this.ROMImage.length;if(16384>a)throw Error("ROM image size too small.");this.ROM=this.getTypedArray(a,0,"uint8");var b=0;if(this.usedBootROM)if(settings[11])for(;256>b;++b)this.memory[b]=this.GBBOOTROM[b],this.ROM[b]=this.ROMImage.charCodeAt(b)&255;else{for(;256>b;++b)this.memory[b]=this.GBCBOOTROM[b],this.ROM[b]=this.ROMImage.charCodeAt(b)&
255;for(;512>b;++b)this.memory[b]=this.ROM[b]=this.ROMImage.charCodeAt(b)&255;for(;2304>b;++b)this.memory[b]=this.GBCBOOTROM[b-256],this.ROM[b]=this.ROMImage.charCodeAt(b)&255;this.usedGBCBootROM=!0}for(;16384>b;++b)this.memory[b]=this.ROM[b]=this.ROMImage.charCodeAt(b)&255;for(;b<a;++b)this.ROM[b]=this.ROMImage.charCodeAt(b)&255;this.ROMBankEdge=Math.floor(this.ROM.length/16384);this.interpretCartridge();this.checkIRQMatching()};
GameBoyCore.prototype.getROMImage=function(){if(0<this.ROMImage.length)return this.ROMImage.length;for(var a=this.ROM.length,b=0;b<a;b++)this.ROMImage+=String.fromCharCode(this.ROM[b]);return this.ROMImage};
GameBoyCore.prototype.interpretCartridge=function(){for(var a=308;319>a;a++)0<this.ROMImage.charCodeAt(a)&&(this.name+=this.ROMImage[a]);for(a=319;323>a;a++)0<this.ROMImage.charCodeAt(a)&&(this.gameCode+=this.ROMImage[a]);cout("Game Title: "+this.name+"["+this.gameCode+"]["+this.ROMImage[323]+"]",0);cout("Game Code: "+this.gameCode,0);this.cartridgeType=this.ROM[327];cout("Cartridge type #"+this.cartridgeType,0);switch(this.cartridgeType){case 0:if(!settings[9]){a="ROM";break}case 1:this.cMBC1=!0;
a="MBC1";break;case 2:this.cSRAM=this.cMBC1=!0;a="MBC1 + SRAM";break;case 3:this.cBATT=this.cSRAM=this.cMBC1=!0;a="MBC1 + SRAM + BATT";break;case 5:this.cMBC2=!0;a="MBC2";break;case 6:this.cBATT=this.cMBC2=!0;a="MBC2 + BATT";break;case 8:this.cSRAM=!0;a="ROM + SRAM";break;case 9:this.cBATT=this.cSRAM=!0;a="ROM + SRAM + BATT";break;case 11:this.cMMMO1=!0;a="MMMO1";break;case 12:this.cSRAM=this.cMMMO1=!0;a="MMMO1 + SRAM";break;case 13:this.cBATT=this.cSRAM=this.cMMMO1=!0;a="MMMO1 + SRAM + BATT";break;
case 15:this.cBATT=this.cTIMER=this.cMBC3=!0;a="MBC3 + TIMER + BATT";break;case 16:this.cSRAM=this.cBATT=this.cTIMER=this.cMBC3=!0;a="MBC3 + TIMER + BATT + SRAM";break;case 17:this.cMBC3=!0;a="MBC3";break;case 18:this.cSRAM=this.cMBC3=!0;a="MBC3 + SRAM";break;case 19:this.cBATT=this.cSRAM=this.cMBC3=!0;a="MBC3 + SRAM + BATT";break;case 25:this.cMBC5=!0;a="MBC5";break;case 26:this.cSRAM=this.cMBC5=!0;a="MBC5 + SRAM";break;case 27:this.cBATT=this.cSRAM=this.cMBC5=!0;a="MBC5 + SRAM + BATT";break;case 28:this.cRUMBLE=
!0;a="RUMBLE";break;case 29:this.cSRAM=this.cRUMBLE=!0;a="RUMBLE + SRAM";break;case 30:this.cBATT=this.cSRAM=this.cRUMBLE=!0;a="RUMBLE + SRAM + BATT";break;case 31:this.cCamera=!0;a="GameBoy Camera";break;case 34:this.cBATT=this.cSRAM=this.cMBC7=!0;a="MBC7 + SRAM + BATT";break;case 253:this.cTAMA5=!0;a="TAMA5";break;case 254:this.cHuC3=!0;a="HuC3";break;case 255:this.cHuC1=!0;a="HuC1";break;default:a="Unknown",cout("Cartridge type is unknown.",2),pause()}cout("Cartridge Type: "+a+".",0);this.numROMBanks=
this.ROMBanks[this.ROM[328]];cout(this.numROMBanks+" ROM banks.",0);switch(this.RAMBanks[this.ROM[329]]){case 0:cout("No RAM banking requested for allocation or MBC is of type 2.",0);break;case 2:cout("1 RAM bank requested for allocation.",0);break;case 3:cout("4 RAM banks requested for allocation.",0);break;case 4:cout("16 RAM banks requested for allocation.",0);break;default:cout("RAM bank amount requested is unknown, will use maximum allowed by specified MBC type.",0)}if(this.usedBootROM)this.cGBC=
this.usedGBCBootROM,this.setupRAM(),this.initBootstrap();else{switch(this.ROM[323]){case 0:this.cGBC=!1;cout("Only GB mode detected.",0);break;case 50:settings[2]||"Game and Watch 50"!=this.name+this.gameCode+this.ROM[323]?this.cGBC=!1:(this.cGBC=!0,cout("Created a boot exception for Game and Watch Gallery 2 (GBC ID byte is wrong on the cartridge).",1));break;case 128:this.cGBC=!settings[2];cout("GB and GBC mode detected.",0);break;case 192:this.cGBC=!0;cout("Only GBC mode detected.",0);break;default:this.cGBC=
!1,cout("Unknown GameBoy game type code #"+this.ROM[323]+", defaulting to GB mode (Old games don't have a type code).",1)}this.inBootstrap=!1;this.setupRAM();this.initSkipBootstrap()}this.initializeModeSpecificArrays();a=this.ROM[331];var b=this.ROM[324]&65280|this.ROM[325]&255;51!=a?cout("Old style license code: "+a,0):cout("New style license code: "+b,0);this.ROMImage=""};
GameBoyCore.prototype.disableBootROM=function(){for(var a=0;256>a;++a)this.memory[a]=this.ROM[a];if(this.usedGBCBootROM){for(a=512;2304>a;++a)this.memory[a]=this.ROM[a];this.cGBC?this.recompileBootIOWriteHandling():this.GBCtoGBModeAdjust()}else this.recompileBootIOWriteHandling()};
GameBoyCore.prototype.initializeTiming=function(){this.clocksPerSecond=4194304*this.emulatorSpeed;this.baseCPUCyclesPerIteration=this.clocksPerSecond/1E3*settings[6];this.CPUCyclesTotalRoundoff=this.baseCPUCyclesPerIteration%4;this.CPUCyclesTotalBase=this.CPUCyclesTotal=this.baseCPUCyclesPerIteration-this.CPUCyclesTotalRoundoff|0;this.CPUCyclesTotalCurrent=0};GameBoyCore.prototype.setSpeed=function(a){this.emulatorSpeed=a;this.initializeTiming();this.audioHandle&&this.initSound()};
GameBoyCore.prototype.setupRAM=function(){this.cMBC2?this.numRAMBanks=.0625:this.cMBC1||this.cRUMBLE||this.cMBC3||this.cHuC3?this.numRAMBanks=4:this.cMBC5?this.numRAMBanks=16:this.cSRAM&&(this.numRAMBanks=1);if(0<this.numRAMBanks){this.MBCRAMUtilized()||(this.MBCRAMBanksEnabled=!0);var a="function"==typeof this.openMBC?this.openMBC(this.name):[];this.MBCRam=0<a.length?this.toTypedArray(a,"uint8"):this.getTypedArray(8192*this.numRAMBanks,0,"uint8")}cout("Actual bytes of MBC RAM allocated: "+8192*this.numRAMBanks,
0);this.returnFromRTCState();this.cGBC&&(this.VRAM=this.getTypedArray(8192,0,"uint8"),this.GBCMemory=this.getTypedArray(28672,0,"uint8"));this.memoryReadJumpCompile();this.memoryWriteJumpCompile()};GameBoyCore.prototype.MBCRAMUtilized=function(){return this.cMBC1||this.cMBC2||this.cMBC3||this.cMBC5||this.cMBC7||this.cRUMBLE};
GameBoyCore.prototype.recomputeDimension=function(){initNewCanvas();this.onscreenWidth=this.canvas.width;this.onscreenHeight=this.canvas.height;window&&window.mozRequestAnimationFrame||-1!=navigator.userAgent.toLowerCase().indexOf("gecko")&&-1==navigator.userAgent.toLowerCase().indexOf("like gecko")?(this.canvas.width=this.onscreenWidth=settings[12]?this.canvas.width:160,this.canvas.height=this.onscreenHeight=settings[12]?this.canvas.height:144):(this.onscreenWidth=this.canvas.width,this.onscreenHeight=
this.canvas.height);this.offscreenWidth=settings[12]?this.canvas.width:160;this.offscreenHeight=settings[12]?this.canvas.height:144;this.offscreenRGBCount=this.offscreenWidth*this.offscreenHeight*4};
GameBoyCore.prototype.initLCD=function(){this.recomputeDimension();92160!=this.offscreenRGBCount?this.compileResizeFrameBufferFunction():this.resizer=null;try{this.canvasOffscreen=document.createElement("canvas");this.canvasOffscreen.width=this.offscreenWidth;this.canvasOffscreen.height=this.offscreenHeight;this.drawContextOffscreen=this.canvasOffscreen.getContext("2d");this.drawContextOnscreen=this.canvas.getContext("2d");this.canvas.setAttribute("style",(this.canvas.getAttribute("style")||"")+"; image-rendering: "+
(settings[13]?"auto":"-webkit-optimize-contrast")+";image-rendering: "+(settings[13]?"optimizeQuality":"-o-crisp-edges")+";image-rendering: "+(settings[13]?"optimizeQuality":"-moz-crisp-edges")+";-ms-interpolation-mode: "+(settings[13]?"bicubic":"nearest-neighbor")+";");this.drawContextOffscreen.webkitImageSmoothingEnabled=settings[13];this.drawContextOffscreen.mozImageSmoothingEnabled=settings[13];this.drawContextOnscreen.webkitImageSmoothingEnabled=settings[13];this.drawContextOnscreen.mozImageSmoothingEnabled=
settings[13];try{this.canvasBuffer=this.drawContextOffscreen.createImageData(this.offscreenWidth,this.offscreenHeight)}catch(b){cout('Falling back to the getImageData initialization (Error "'+b.message+'").',1),this.canvasBuffer=this.drawContextOffscreen.getImageData(0,0,this.offscreenWidth,this.offscreenHeight)}for(var a=this.offscreenRGBCount;0<a;)this.canvasBuffer.data[a-=4]=248,this.canvasBuffer.data[a+1]=248,this.canvasBuffer.data[a+2]=248,this.canvasBuffer.data[a+3]=255;this.graphicsBlit();
this.canvas.style.visibility="visible";null==this.swizzledFrame&&(this.swizzledFrame=this.getTypedArray(69120,255,"uint8"));this.drewFrame=!0;this.requestDraw()}catch(b){throw Error("HTML5 Canvas support required: "+b.message+"file: "+b.fileName+", line: "+b.lineNumber);}};
GameBoyCore.prototype.graphicsBlit=function(){this.offscreenWidth==this.onscreenWidth&&this.offscreenHeight==this.onscreenHeight?this.drawContextOnscreen.putImageData(this.canvasBuffer,0,0):(this.drawContextOffscreen.putImageData(this.canvasBuffer,0,0),this.drawContextOnscreen.drawImage(this.canvasOffscreen,0,0,this.onscreenWidth,this.onscreenHeight))};
GameBoyCore.prototype.JoyPadEvent=function(a,b){b?(this.JoyPad&=255^1<<a,this.cGBC||this.usedBootROM&&this.usedGBCBootROM||(this.interruptsRequested|=16,this.remainingClocks=0,this.checkIRQMatching())):this.JoyPad|=1<<a;this.memory[65280]=(this.memory[65280]&48)+((0==(this.memory[65280]&32)?this.JoyPad>>4:15)&(0==(this.memory[65280]&16)?this.JoyPad&15:15));this.CPUStopped=!1};
GameBoyCore.prototype.GyroEvent=function(a,b){a=-100*a+2047;this.highX=a>>8;this.lowX=a&255;b=-100*b+2047;this.highY=b>>8;this.lowY=b&255};
GameBoyCore.prototype.initSound=function(){this.audioResamplerFirstPassFactor=Math.max(Math.min(Math.floor(this.clocksPerSecond/44100),Math.floor(136.53125)),1);this.downSampleInputDivider=1/(240*this.audioResamplerFirstPassFactor);settings[0]?(this.audioHandle=new XAudioServer(2,this.clocksPerSecond/this.audioResamplerFirstPassFactor,0,Math.max(this.baseCPUCyclesPerIteration*settings[8]/this.audioResamplerFirstPassFactor,8192)<<1,null,settings[3],function(){settings[0]=!1}),this.initAudioBuffer()):
this.audioHandle&&this.audioHandle.changeVolume(0)};GameBoyCore.prototype.changeVolume=function(){settings[0]&&this.audioHandle&&this.audioHandle.changeVolume(settings[3])};
GameBoyCore.prototype.initAudioBuffer=function(){this.downsampleInput=this.audioDestinationPosition=this.audioIndex=0;this.bufferContainAmount=Math.max(this.baseCPUCyclesPerIteration*settings[7]/this.audioResamplerFirstPassFactor,4096)<<1;this.numSamplesTotal=this.baseCPUCyclesPerIteration/this.audioResamplerFirstPassFactor<<1;this.audioBuffer=this.getTypedArray(this.numSamplesTotal,0,"float32")};
GameBoyCore.prototype.intializeWhiteNoise=function(){this.LSFR15Table=this.getTypedArray(524288,0,"int8");for(var a=32767,b=0;32768>b;++b){var c=1-(a&1);this.LSFR15Table[32768|b]=c;this.LSFR15Table[65536|b]=2*c;this.LSFR15Table[98304|b]=3*c;this.LSFR15Table[131072|b]=4*c;this.LSFR15Table[163840|b]=5*c;this.LSFR15Table[196608|b]=6*c;this.LSFR15Table[229376|b]=7*c;this.LSFR15Table[262144|b]=8*c;this.LSFR15Table[294912|b]=9*c;this.LSFR15Table[327680|b]=10*c;this.LSFR15Table[360448|b]=11*c;this.LSFR15Table[393216|
b]=12*c;this.LSFR15Table[425984|b]=13*c;this.LSFR15Table[458752|b]=14*c;this.LSFR15Table[491520|b]=15*c;c=a>>1;a=c|((c^a)&1)<<14}this.LSFR7Table=this.getTypedArray(2048,0,"int8");a=127;for(b=0;128>b;++b)c=1-(a&1),this.LSFR7Table[128|b]=c,this.LSFR7Table[256|b]=2*c,this.LSFR7Table[384|b]=3*c,this.LSFR7Table[512|b]=4*c,this.LSFR7Table[640|b]=5*c,this.LSFR7Table[768|b]=6*c,this.LSFR7Table[896|b]=7*c,this.LSFR7Table[1024|b]=8*c,this.LSFR7Table[1152|b]=9*c,this.LSFR7Table[1280|b]=10*c,this.LSFR7Table[1408|
b]=11*c,this.LSFR7Table[1536|b]=12*c,this.LSFR7Table[1664|b]=13*c,this.LSFR7Table[1792|b]=14*c,this.LSFR7Table[1920|b]=15*c,c=a>>1,a=c|((c^a)&1)<<6;this.noiseSampleTable=this.LSFR15Table};GameBoyCore.prototype.audioUnderrunAdjustment=function(){if(settings[0]){var a=this.audioHandle.remainingBuffer();"number"==typeof a&&(a=this.bufferContainAmount-Math.max(a,0),0<a&&this.recalculateIterationClockLimitForAudio((a>>1)*this.audioResamplerFirstPassFactor))}};
GameBoyCore.prototype.initializeAudioStartState=function(){this.channel1FrequencyTracker=8192;this.channel1DutyTracker=0;this.channel1CachedDuty=this.dutyLookup[2];this.channel1envelopeVolume=this.channel1totalLength=0;this.channel1envelopeType=!1;this.channel1envelopeSweepsLast=this.channel1envelopeSweeps=0;this.channel1consecutive=!0;this.channel1frequency=0;this.channel1SweepFault=!1;this.channel1ShadowFrequency=0;this.channel1timeSweep=1;this.channel1lastTimeSweep=0;this.channel1Swept=!1;this.channel1frequencySweepDivider=
0;this.channel1decreaseSweep=!1;this.channel2FrequencyTracker=8192;this.channel2DutyTracker=0;this.channel2CachedDuty=this.dutyLookup[2];this.channel2envelopeVolume=this.channel2totalLength=0;this.channel2envelopeType=!1;this.channel2envelopeSweepsLast=this.channel2envelopeSweeps=0;this.channel2consecutive=!0;this.channel2frequency=0;this.channel3canPlay=!1;this.channel3totalLength=0;this.channel3patternType=4;this.channel3frequency=0;this.channel3consecutive=!0;this.channel4currentVolume=this.channel4envelopeVolume=
this.channel4totalLength=0;this.channel4envelopeType=!1;this.channel4envelopeSweepsLast=this.channel4envelopeSweeps=0;this.channel4consecutive=!0;this.channel4BitRange=32767;this.noiseSampleTable=this.LSFR15Table;this.channel4VolumeShifter=15;this.channel2FrequencyCounter=this.channel1FrequencyCounter=8192;this.channel3FrequencyPeriod=this.channel3Counter=2048;this.channel4lastSampleLookup=this.channel3lastSampleLookup=0;this.VinRightChannelMasterVolume=this.VinLeftChannelMasterVolume=8;this.mixerOutputCache=
0;this.sequencerClocks=8192;this.sequencePosition=0;this.channel4Counter=this.channel4FrequencyPeriod=8;this.cachedChannel4Sample=this.cachedChannel3Sample=0;this.channel4canPlay=this.channel2canPlay=this.channel1canPlay=this.channel4Enabled=this.channel3Enabled=this.channel2Enabled=this.channel1Enabled=!1;this.audioClocksUntilNextEventCounter=this.audioClocksUntilNextEvent=1;this.channel1OutputLevelCache();this.channel2OutputLevelCache();this.channel3OutputLevelCache();this.channel4OutputLevelCache();
this.noiseSampleTable=this.LSFR15Table};GameBoyCore.prototype.outputAudio=function(){this.audioBuffer[this.audioDestinationPosition++]=(this.downsampleInput>>>16)*this.downSampleInputDivider-1;this.audioBuffer[this.audioDestinationPosition++]=(this.downsampleInput&65535)*this.downSampleInputDivider-1;this.audioDestinationPosition==this.numSamplesTotal&&(this.audioHandle.writeAudioNoCallback(this.audioBuffer),this.audioDestinationPosition=0);this.downsampleInput=0};
GameBoyCore.prototype.generateAudio=function(a){if(this.soundMasterEnabled&&!this.CPUStopped)for(var b;0<a;){b=Math.min(this.audioClocksUntilNextEventCounter,this.sequencerClocks,a);this.audioClocksUntilNextEventCounter-=b;this.sequencerClocks-=b;for(a-=b;0<b;){var c=Math.min(b,this.audioResamplerFirstPassFactor-this.audioIndex);b-=c;this.audioIndex+=c;this.downsampleInput+=this.mixerOutputCache*c;this.audioIndex==this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.outputAudio())}0==this.sequencerClocks&&
(this.audioComputeSequencer(),this.sequencerClocks=8192);0==this.audioClocksUntilNextEventCounter&&this.computeAudioChannels()}else for(;0<a;)c=Math.min(a,this.audioResamplerFirstPassFactor-this.audioIndex),a-=c,this.audioIndex+=c,this.audioIndex==this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.outputAudio())};
GameBoyCore.prototype.generateAudioFake=function(a){if(this.soundMasterEnabled&&!this.CPUStopped)for(var b;0<a;)b=Math.min(this.audioClocksUntilNextEventCounter,this.sequencerClocks,a),this.audioClocksUntilNextEventCounter-=b,this.sequencerClocks-=b,a-=b,0==this.sequencerClocks&&(this.audioComputeSequencer(),this.sequencerClocks=8192),0==this.audioClocksUntilNextEventCounter&&this.computeAudioChannels()};
GameBoyCore.prototype.audioJIT=function(){settings[0]?this.generateAudio(this.audioTicks):this.generateAudioFake(this.audioTicks);this.audioTicks=0};GameBoyCore.prototype.audioComputeSequencer=function(){switch(this.sequencePosition++){case 0:this.clockAudioLength();break;case 2:this.clockAudioLength();this.clockAudioSweep();break;case 4:this.clockAudioLength();break;case 6:this.clockAudioLength();this.clockAudioSweep();break;case 7:this.clockAudioEnvelope(),this.sequencePosition=0}};
GameBoyCore.prototype.clockAudioLength=function(){1<this.channel1totalLength?--this.channel1totalLength:1==this.channel1totalLength&&(this.channel1totalLength=0,this.channel1EnableCheck(),this.memory[65318]&=254);1<this.channel2totalLength?--this.channel2totalLength:1==this.channel2totalLength&&(this.channel2totalLength=0,this.channel2EnableCheck(),this.memory[65318]&=253);1<this.channel3totalLength?--this.channel3totalLength:1==this.channel3totalLength&&(this.channel3totalLength=0,this.channel3EnableCheck(),
this.memory[65318]&=251);1<this.channel4totalLength?--this.channel4totalLength:1==this.channel4totalLength&&(this.channel4totalLength=0,this.channel4EnableCheck(),this.memory[65318]&=247)};GameBoyCore.prototype.clockAudioSweep=function(){!this.channel1SweepFault&&0<this.channel1timeSweep&&0==--this.channel1timeSweep&&this.runAudioSweep()};
GameBoyCore.prototype.runAudioSweep=function(){0<this.channel1lastTimeSweep&&(0<this.channel1frequencySweepDivider?(this.channel1Swept=!0,this.channel1decreaseSweep?(this.channel1ShadowFrequency-=this.channel1ShadowFrequency>>this.channel1frequencySweepDivider,this.channel1frequency=this.channel1ShadowFrequency&2047,this.channel1FrequencyTracker=2048-this.channel1frequency<<2):(this.channel1frequency=this.channel1ShadowFrequency+=this.channel1ShadowFrequency>>this.channel1frequencySweepDivider,2047>=
this.channel1ShadowFrequency?(this.channel1FrequencyTracker=2048-this.channel1frequency<<2,2047<this.channel1ShadowFrequency+(this.channel1ShadowFrequency>>this.channel1frequencySweepDivider)&&(this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254)):(this.channel1frequency&=2047,this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254)),this.channel1timeSweep=this.channel1lastTimeSweep):(this.channel1SweepFault=!0,this.channel1EnableCheck()))};
GameBoyCore.prototype.channel1AudioSweepPerformDummy=function(){if(0<this.channel1frequencySweepDivider&&!this.channel1decreaseSweep){var a=this.channel1ShadowFrequency+(this.channel1ShadowFrequency>>this.channel1frequencySweepDivider);2047>=a?2047<a+(a>>this.channel1frequencySweepDivider)&&(this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254):(this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254)}};
GameBoyCore.prototype.clockAudioEnvelope=function(){-1<this.channel1envelopeSweepsLast&&(0<this.channel1envelopeSweeps?--this.channel1envelopeSweeps:this.channel1envelopeType?15>this.channel1envelopeVolume?(++this.channel1envelopeVolume,this.channel1envelopeSweeps=this.channel1envelopeSweepsLast,this.channel1OutputLevelCache()):this.channel1envelopeSweepsLast=-1:0<this.channel1envelopeVolume?(--this.channel1envelopeVolume,this.channel1envelopeSweeps=this.channel1envelopeSweepsLast,this.channel1OutputLevelCache()):
this.channel1envelopeSweepsLast=-1);-1<this.channel2envelopeSweepsLast&&(0<this.channel2envelopeSweeps?--this.channel2envelopeSweeps:this.channel2envelopeType?15>this.channel2envelopeVolume?(++this.channel2envelopeVolume,this.channel2envelopeSweeps=this.channel2envelopeSweepsLast,this.channel2OutputLevelCache()):this.channel2envelopeSweepsLast=-1:0<this.channel2envelopeVolume?(--this.channel2envelopeVolume,this.channel2envelopeSweeps=this.channel2envelopeSweepsLast,this.channel2OutputLevelCache()):
this.channel2envelopeSweepsLast=-1);-1<this.channel4envelopeSweepsLast&&(0<this.channel4envelopeSweeps?--this.channel4envelopeSweeps:this.channel4envelopeType?15>this.channel4envelopeVolume?(this.channel4currentVolume=++this.channel4envelopeVolume<<this.channel4VolumeShifter,this.channel4envelopeSweeps=this.channel4envelopeSweepsLast,this.channel4UpdateCache()):this.channel4envelopeSweepsLast=-1:0<this.channel4envelopeVolume?(this.channel4currentVolume=--this.channel4envelopeVolume<<this.channel4VolumeShifter,
this.channel4envelopeSweeps=this.channel4envelopeSweepsLast,this.channel4UpdateCache()):this.channel4envelopeSweepsLast=-1)};
GameBoyCore.prototype.computeAudioChannels=function(){this.channel1FrequencyCounter-=this.audioClocksUntilNextEvent;this.channel2FrequencyCounter-=this.audioClocksUntilNextEvent;this.channel3Counter-=this.audioClocksUntilNextEvent;this.channel4Counter-=this.audioClocksUntilNextEvent;0==this.channel1FrequencyCounter&&(this.channel1FrequencyCounter=this.channel1FrequencyTracker,this.channel1DutyTracker=this.channel1DutyTracker+1&7,this.channel1OutputLevelTrimaryCache());0==this.channel2FrequencyCounter&&
(this.channel2FrequencyCounter=this.channel2FrequencyTracker,this.channel2DutyTracker=this.channel2DutyTracker+1&7,this.channel2OutputLevelTrimaryCache());0==this.channel3Counter&&(this.channel3canPlay&&(this.channel3lastSampleLookup=this.channel3lastSampleLookup+1&31),this.channel3Counter=this.channel3FrequencyPeriod,this.channel3UpdateCache());0==this.channel4Counter&&(this.channel4lastSampleLookup=this.channel4lastSampleLookup+1&this.channel4BitRange,this.channel4Counter=this.channel4FrequencyPeriod,
this.channel4UpdateCache());this.audioClocksUntilNextEventCounter=this.audioClocksUntilNextEvent=Math.min(this.channel1FrequencyCounter,this.channel2FrequencyCounter,this.channel3Counter,this.channel4Counter)};GameBoyCore.prototype.channel1EnableCheck=function(){this.channel1Enabled=(this.channel1consecutive||0<this.channel1totalLength)&&!this.channel1SweepFault&&this.channel1canPlay;this.channel1OutputLevelSecondaryCache()};
GameBoyCore.prototype.channel1VolumeEnableCheck=function(){this.channel1canPlay=7<this.memory[65298];this.channel1EnableCheck();this.channel1OutputLevelSecondaryCache()};GameBoyCore.prototype.channel1OutputLevelCache=function(){this.channel1currentSampleLeft=this.leftChannel1?this.channel1envelopeVolume:0;this.channel1currentSampleRight=this.rightChannel1?this.channel1envelopeVolume:0;this.channel1OutputLevelSecondaryCache()};
GameBoyCore.prototype.channel1OutputLevelSecondaryCache=function(){this.channel1Enabled?(this.channel1currentSampleLeftSecondary=this.channel1currentSampleLeft,this.channel1currentSampleRightSecondary=this.channel1currentSampleRight):this.channel1currentSampleRightSecondary=this.channel1currentSampleLeftSecondary=0;this.channel1OutputLevelTrimaryCache()};
GameBoyCore.prototype.channel1OutputLevelTrimaryCache=function(){this.channel1CachedDuty[this.channel1DutyTracker]&&settings[14][0]?(this.channel1currentSampleLeftTrimary=this.channel1currentSampleLeftSecondary,this.channel1currentSampleRightTrimary=this.channel1currentSampleRightSecondary):this.channel1currentSampleRightTrimary=this.channel1currentSampleLeftTrimary=0;this.mixerOutputLevelCache()};
GameBoyCore.prototype.channel2EnableCheck=function(){this.channel2Enabled=(this.channel2consecutive||0<this.channel2totalLength)&&this.channel2canPlay;this.channel2OutputLevelSecondaryCache()};GameBoyCore.prototype.channel2VolumeEnableCheck=function(){this.channel2canPlay=7<this.memory[65303];this.channel2EnableCheck();this.channel2OutputLevelSecondaryCache()};
GameBoyCore.prototype.channel2OutputLevelCache=function(){this.channel2currentSampleLeft=this.leftChannel2?this.channel2envelopeVolume:0;this.channel2currentSampleRight=this.rightChannel2?this.channel2envelopeVolume:0;this.channel2OutputLevelSecondaryCache()};
GameBoyCore.prototype.channel2OutputLevelSecondaryCache=function(){this.channel2Enabled?(this.channel2currentSampleLeftSecondary=this.channel2currentSampleLeft,this.channel2currentSampleRightSecondary=this.channel2currentSampleRight):this.channel2currentSampleRightSecondary=this.channel2currentSampleLeftSecondary=0;this.channel2OutputLevelTrimaryCache()};
GameBoyCore.prototype.channel2OutputLevelTrimaryCache=function(){this.channel2CachedDuty[this.channel2DutyTracker]&&settings[14][1]?(this.channel2currentSampleLeftTrimary=this.channel2currentSampleLeftSecondary,this.channel2currentSampleRightTrimary=this.channel2currentSampleRightSecondary):this.channel2currentSampleRightTrimary=this.channel2currentSampleLeftTrimary=0;this.mixerOutputLevelCache()};
GameBoyCore.prototype.channel3EnableCheck=function(){this.channel3Enabled=this.channel3consecutive||0<this.channel3totalLength;this.channel3OutputLevelSecondaryCache()};GameBoyCore.prototype.channel3OutputLevelCache=function(){this.channel3currentSampleLeft=this.leftChannel3?this.cachedChannel3Sample:0;this.channel3currentSampleRight=this.rightChannel3?this.cachedChannel3Sample:0;this.channel3OutputLevelSecondaryCache()};
GameBoyCore.prototype.channel3OutputLevelSecondaryCache=function(){this.channel3Enabled&&settings[14][2]?(this.channel3currentSampleLeftSecondary=this.channel3currentSampleLeft,this.channel3currentSampleRightSecondary=this.channel3currentSampleRight):this.channel3currentSampleRightSecondary=this.channel3currentSampleLeftSecondary=0;this.mixerOutputLevelCache()};
GameBoyCore.prototype.channel4EnableCheck=function(){this.channel4Enabled=(this.channel4consecutive||0<this.channel4totalLength)&&this.channel4canPlay;this.channel4OutputLevelSecondaryCache()};GameBoyCore.prototype.channel4VolumeEnableCheck=function(){this.channel4canPlay=7<this.memory[65313];this.channel4EnableCheck();this.channel4OutputLevelSecondaryCache()};
GameBoyCore.prototype.channel4OutputLevelCache=function(){this.channel4currentSampleLeft=this.leftChannel4?this.cachedChannel4Sample:0;this.channel4currentSampleRight=this.rightChannel4?this.cachedChannel4Sample:0;this.channel4OutputLevelSecondaryCache()};
GameBoyCore.prototype.channel4OutputLevelSecondaryCache=function(){this.channel4Enabled&&settings[14][3]?(this.channel4currentSampleLeftSecondary=this.channel4currentSampleLeft,this.channel4currentSampleRightSecondary=this.channel4currentSampleRight):this.channel4currentSampleRightSecondary=this.channel4currentSampleLeftSecondary=0;this.mixerOutputLevelCache()};
GameBoyCore.prototype.mixerOutputLevelCache=function(){this.mixerOutputCache=(this.channel1currentSampleLeftTrimary+this.channel2currentSampleLeftTrimary+this.channel3currentSampleLeftSecondary+this.channel4currentSampleLeftSecondary)*this.VinLeftChannelMasterVolume<<16|(this.channel1currentSampleRightTrimary+this.channel2currentSampleRightTrimary+this.channel3currentSampleRightSecondary+this.channel4currentSampleRightSecondary)*this.VinRightChannelMasterVolume};
GameBoyCore.prototype.channel3UpdateCache=function(){this.cachedChannel3Sample=this.channel3PCM[this.channel3lastSampleLookup]>>this.channel3patternType;this.channel3OutputLevelCache()};GameBoyCore.prototype.channel3WriteRAM=function(a,b){this.channel3canPlay&&this.audioJIT();this.memory[65328|a]=b;a<<=1;this.channel3PCM[a]=b>>4;this.channel3PCM[a|1]=b&15};
GameBoyCore.prototype.channel4UpdateCache=function(){this.cachedChannel4Sample=this.noiseSampleTable[this.channel4currentVolume|this.channel4lastSampleLookup];this.channel4OutputLevelCache()};
GameBoyCore.prototype.run=function(){0==(this.stopEmulator&2)&&(1==(this.stopEmulator&1)?this.CPUStopped?(this.audioUnderrunAdjustment(),this.audioTicks+=this.CPUCyclesTotal,this.audioJIT(),this.stopEmulator|=1):(this.stopEmulator=0,this.audioUnderrunAdjustment(),this.clockUpdate(),this.halt?(this.CPUTicks=0,this.calculateHALTPeriod(),this.halt?(this.updateCore(),this.iterationEndRoutine()):this.executeIteration()):this.executeIteration(),this.requestDraw()):(cout("Iterator restarted a faulted core.",
2),pause()))};
GameBoyCore.prototype.executeIteration=function(){for(var a;0==this.stopEmulator;){switch(this.IRQEnableDelay){case 1:this.IME=!0,this.checkIRQMatching();case 2:--this.IRQEnableDelay}0<this.IRQLineMatched&&this.launchIRQ();a=this.memoryReader[this.programCounter](this,this.programCounter);this.programCounter=this.programCounter+1&65535;this.skipPCIncrement&&(this.programCounter=this.programCounter-1&65535,this.skipPCIncrement=!1);this.CPUTicks=this.TICKTable[a];this.OPCODE[a](this);this.LCDTicks+=
this.CPUTicks>>this.doubleSpeedShifter;this.LCDCONTROL[this.actualScanLine](this);a=this.CPUTicks>>this.doubleSpeedShifter;this.audioTicks+=a;this.emulatorTicks+=a;this.DIVTicks+=this.CPUTicks;if(this.TIMAEnabled)for(this.timerTicks+=this.CPUTicks;this.timerTicks>=this.TACClocker;)this.timerTicks-=this.TACClocker,256==++this.memory[65285]&&(this.memory[65285]=this.memory[65286],this.interruptsRequested|=4,this.checkIRQMatching());0<this.serialTimer&&(this.serialTimer-=this.CPUTicks,0>=this.serialTimer&&
(this.interruptsRequested|=8,this.checkIRQMatching()),this.serialShiftTimer-=this.CPUTicks,0>=this.serialShiftTimer&&(this.serialShiftTimer=this.serialShiftTimerAllocated,this.memory[65281]=this.memory[65281]<<1&254|1));this.emulatorTicks>=this.CPUCyclesTotal&&this.iterationEndRoutine()}};
GameBoyCore.prototype.iterationEndRoutine=function(){0==(this.stopEmulator&1)&&(this.audioJIT(),this.memory[65284]=this.memory[65284]+(this.DIVTicks>>8)&255,this.DIVTicks&=255,this.stopEmulator|=1,this.emulatorTicks-=this.CPUCyclesTotal,this.CPUCyclesTotalCurrent+=this.CPUCyclesTotalRoundoff,this.recalculateIterationClockLimit())};GameBoyCore.prototype.handleSTOP=function(){this.CPUStopped=!0;this.iterationEndRoutine();0>this.emulatorTicks&&(this.audioTicks-=this.emulatorTicks,this.audioJIT())};
GameBoyCore.prototype.recalculateIterationClockLimit=function(){var a=this.CPUCyclesTotalCurrent%4;this.CPUCyclesTotal=this.CPUCyclesTotalBase+this.CPUCyclesTotalCurrent-a;this.CPUCyclesTotalCurrent=a};GameBoyCore.prototype.recalculateIterationClockLimitForAudio=function(a){this.CPUCyclesTotal+=Math.min(a>>2<<2,this.CPUCyclesTotalBase<<1)};
GameBoyCore.prototype.scanLineMode2=function(){1!=this.STATTracker&&(this.mode2TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.STATTracker=1,this.modeSTAT=2)};GameBoyCore.prototype.scanLineMode3=function(){3!=this.modeSTAT&&(0==this.STATTracker&&this.mode2TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.STATTracker=1,this.modeSTAT=3)};
GameBoyCore.prototype.scanLineMode0=function(){0!=this.modeSTAT&&(2!=this.STATTracker&&(0==this.STATTracker&&(this.mode2TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.modeSTAT=3),this.incrementScanLineQueue(),this.updateSpriteCount(this.actualScanLine),this.STATTracker=2),this.LCDTicks>=this.spriteCount&&(this.hdmaRunning&&this.executeHDMA(),this.mode0TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.STATTracker=3,this.modeSTAT=0))};
GameBoyCore.prototype.clocksUntilLYCMatch=function(){return 0!=this.memory[65349]?this.memory[65349]>this.actualScanLine?456*(this.memory[65349]-this.actualScanLine):456*(154-this.actualScanLine+this.memory[65349]):456*(153==this.actualScanLine&&0==this.memory[65348]?154:153-this.actualScanLine)+8};
GameBoyCore.prototype.clocksUntilMode0=function(){switch(this.modeSTAT){case 0:if(143==this.actualScanLine)return this.updateSpriteCount(0),this.spriteCount+5016;this.updateSpriteCount(this.actualScanLine+1);return this.spriteCount+456;case 2:case 3:return this.updateSpriteCount(this.actualScanLine),this.spriteCount;case 1:return this.updateSpriteCount(0),this.spriteCount+456*(154-this.actualScanLine)}};
GameBoyCore.prototype.updateSpriteCount=function(a){this.spriteCount=252;if(this.cGBC&&this.gfxSpriteShow){a+=16;for(var b,c=this.gfxSpriteNormalHeight?8:16,g=65024;65184>g&&312>this.spriteCount;g+=4)b=a-this.memory[g],-1<b&&b<c&&(this.spriteCount+=6)}};GameBoyCore.prototype.matchLYC=function(){this.memory[65348]==this.memory[65349]?(this.memory[65345]|=4,this.LYCMatchTriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching())):this.memory[65345]&=123};
GameBoyCore.prototype.updateCore=function(){this.LCDTicks+=this.CPUTicks>>this.doubleSpeedShifter;this.LCDCONTROL[this.actualScanLine](this);var a=this.CPUTicks>>this.doubleSpeedShifter;this.audioTicks+=a;this.emulatorTicks+=a;this.DIVTicks+=this.CPUTicks;if(this.TIMAEnabled)for(this.timerTicks+=this.CPUTicks;this.timerTicks>=this.TACClocker;)this.timerTicks-=this.TACClocker,256==++this.memory[65285]&&(this.memory[65285]=this.memory[65286],this.interruptsRequested|=4,this.checkIRQMatching());0<this.serialTimer&&
(this.serialTimer-=this.CPUTicks,0>=this.serialTimer&&(this.interruptsRequested|=8,this.checkIRQMatching()),this.serialShiftTimer-=this.CPUTicks,0>=this.serialShiftTimer&&(this.serialShiftTimer=this.serialShiftTimerAllocated,this.memory[65281]=this.memory[65281]<<1&254|1))};GameBoyCore.prototype.updateCoreFull=function(){this.updateCore();this.emulatorTicks>=this.CPUCyclesTotal&&this.iterationEndRoutine()};
GameBoyCore.prototype.initializeLCDController=function(){for(var a=0;154>a;)143>a?this.LINECONTROL[a]=function(a){80>a.LCDTicks?a.scanLineMode2():252>a.LCDTicks?a.scanLineMode3():456>a.LCDTicks?a.scanLineMode0():(a.LCDTicks-=456,3!=a.STATTracker&&(2!=a.STATTracker&&(0==a.STATTracker&&a.mode2TriggerSTAT&&(a.interruptsRequested|=2),a.incrementScanLineQueue()),a.hdmaRunning&&a.executeHDMA(),a.mode0TriggerSTAT&&(a.interruptsRequested|=2)),a.actualScanLine=++a.memory[65348],a.actualScanLine==a.memory[65349]?
(a.memory[65345]|=4,a.LYCMatchTriggerSTAT&&(a.interruptsRequested|=2)):a.memory[65345]&=123,a.checkIRQMatching(),a.STATTracker=0,a.modeSTAT=2,a.LINECONTROL[a.actualScanLine](a))}:143==a?this.LINECONTROL[143]=function(a){if(80>a.LCDTicks)a.scanLineMode2();else if(252>a.LCDTicks)a.scanLineMode3();else if(456>a.LCDTicks)a.scanLineMode0();else{a.LCDTicks-=456;3!=a.STATTracker&&(2!=a.STATTracker&&(0==a.STATTracker&&a.mode2TriggerSTAT&&(a.interruptsRequested|=2),a.incrementScanLineQueue()),a.hdmaRunning&&
a.executeHDMA(),a.mode0TriggerSTAT&&(a.interruptsRequested|=2));a.actualScanLine=a.memory[65348]=144;144==a.memory[65349]?(a.memory[65345]|=4,a.LYCMatchTriggerSTAT&&(a.interruptsRequested|=2)):a.memory[65345]&=123;a.STATTracker=0;a.modeSTAT=1;a.interruptsRequested|=a.mode1TriggerSTAT?3:1;a.checkIRQMatching();if(0==a.drewBlank){if(144>a.totalLinesPassed||144==a.totalLinesPassed&&-1<a.midScanlineOffset)a.graphicsJITVBlank(),a.prepareFrame()}else--a.drewBlank;a.LINECONTROL[144](a)}}:153>a?this.LINECONTROL[a]=
function(a){456<=a.LCDTicks&&(a.LCDTicks-=456,a.actualScanLine=++a.memory[65348],a.actualScanLine==a.memory[65349]?(a.memory[65345]|=4,a.LYCMatchTriggerSTAT&&(a.interruptsRequested|=2,a.checkIRQMatching())):a.memory[65345]&=123,a.LINECONTROL[a.actualScanLine](a))}:this.LINECONTROL[153]=function(a){8<=a.LCDTicks&&(4!=a.STATTracker&&153==a.memory[65348]&&(a.memory[65348]=0,0==a.memory[65349]?(a.memory[65345]|=4,a.LYCMatchTriggerSTAT&&(a.interruptsRequested|=2,a.checkIRQMatching())):a.memory[65345]&=
123,a.STATTracker=4),456<=a.LCDTicks&&(a.LCDTicks-=456,a.STATTracker=a.actualScanLine=0,a.LINECONTROL[0](a)))},++a};GameBoyCore.prototype.DisplayShowOff=function(){0==this.drewBlank&&(this.clearFrameBuffer(),this.drewFrame=!0);this.drewBlank=2};
GameBoyCore.prototype.executeHDMA=function(){this.DMAWrite(1);this.halt?this.LCDTicks-this.spriteCount<(4>>this.doubleSpeedShifter|32)&&(this.CPUTicks=4+(32+this.spriteCount<<this.doubleSpeedShifter),this.LCDTicks=this.spriteCount+(4>>this.doubleSpeedShifter|32)):this.LCDTicks+=4>>this.doubleSpeedShifter|32;0==this.memory[65365]?(this.hdmaRunning=!1,this.memory[65365]=255):--this.memory[65365]};
GameBoyCore.prototype.clockUpdate=function(){if(this.cTIMER){var a=(new Date).getTime(),b=a-this.lastIteration;this.lastIteration=a;if(this.cTIMER&&!this.RTCHALT)for(this.RTCSeconds+=b/1E3;60<=this.RTCSeconds;)this.RTCSeconds-=60,++this.RTCMinutes,60<=this.RTCMinutes&&(this.RTCMinutes-=60,++this.RTCHours,24<=this.RTCHours&&(this.RTCHours-=24,++this.RTCDays,512<=this.RTCDays&&(this.RTCDays-=512,this.RTCDayOverFlow=!0)))}};
GameBoyCore.prototype.prepareFrame=function(){this.swizzleFrameBuffer();this.drewFrame=!0};GameBoyCore.prototype.requestDraw=function(){this.drewFrame&&this.dispatchDraw()};GameBoyCore.prototype.dispatchDraw=function(){0<this.offscreenRGBCount&&(92160==this.offscreenRGBCount?this.processDraw(this.swizzledFrame):this.resizeFrameBuffer())};
GameBoyCore.prototype.processDraw=function(a){for(var b=this.offscreenRGBCount,c=this.canvasBuffer.data,g=0,e=0;e<b;++e)c[e++]=a[g++],c[e++]=a[g++],c[e++]=a[g++];this.graphicsBlit();this.drewFrame=!1};GameBoyCore.prototype.swizzleFrameBuffer=function(){for(var a=this.frameBuffer,b=this.swizzledFrame,c=0,g=0;69120>g;)b[g++]=a[c]>>16&255,b[g++]=a[c]>>8&255,b[g++]=a[c++]&255};
GameBoyCore.prototype.clearFrameBuffer=function(){var a=0,b=this.swizzledFrame;if(this.cGBC||this.colorizedGBPalettes)for(;69120>a;)b[a++]=248;else for(;69120>a;)b[a++]=239,b[a++]=255,b[a++]=222};GameBoyCore.prototype.resizeFrameBuffer=function(){this.resizePathClear&&(this.resizePathClear=!1,this.resizer.resize(this.swizzledFrame))};
GameBoyCore.prototype.compileResizeFrameBufferFunction=function(){if(0<this.offscreenRGBCount){var a=this;this.resizer=new Resize(160,144,this.offscreenWidth,this.offscreenHeight,!1,settings[13],!1,function(b){b.length/3*4==a.offscreenRGBCount&&a.processDraw(b);a.resizePathClear=!0})}};
GameBoyCore.prototype.renderScanLine=function(a){this.pixelStart=160*a;if(this.bgEnabled)this.pixelEnd=160,this.BGLayerRender(a),this.WindowLayerRender(a);else for(var b=160*(a+1),c=this.cGBC||this.colorizedGBPalettes?16316664:15728606,g=160*a+this.currentX;g<b;g++)this.frameBuffer[g]=c;this.SpriteLayerRender(a);this.currentX=0;this.midScanlineOffset=-1};
GameBoyCore.prototype.renderMidScanLine=function(){if(144>this.actualScanLine&&3==this.modeSTAT&&(-1==this.midScanlineOffset&&(this.midScanlineOffset=this.backgroundX&7),82<=this.LCDTicks)){this.pixelEnd=this.LCDTicks-74;this.pixelEnd=Math.min(this.pixelEnd-this.midScanlineOffset-this.pixelEnd%8,160);if(this.bgEnabled)this.pixelStart=160*this.lastUnrenderedLine,this.BGLayerRender(this.lastUnrenderedLine),this.WindowLayerRender(this.lastUnrenderedLine);else for(var a=160*this.lastUnrenderedLine+this.pixelEnd,
b=this.cGBC||this.colorizedGBPalettes?16316664:15728606,c=160*this.lastUnrenderedLine+this.currentX;c<a;c++)this.frameBuffer[c]=b;this.currentX=this.pixelEnd}};
GameBoyCore.prototype.initializeModeSpecificArrays=function(){this.LCDCONTROL=this.LCDisOn?this.LINECONTROL:this.DISPLAYOFFCONTROL;this.cGBC?(this.gbcOBJRawPalette=this.getTypedArray(64,0,"uint8"),this.gbcBGRawPalette=this.getTypedArray(64,0,"uint8"),this.gbcOBJPalette=this.getTypedArray(32,16777216,"int32"),this.gbcBGPalette=this.getTypedArray(64,0,"int32"),this.BGCHRBank2=this.getTypedArray(2048,0,"uint8"),this.BGCHRCurrentBank=0<this.currVRAMBank?this.BGCHRBank2:this.BGCHRBank1,this.tileCache=
this.generateCacheArray(3968)):(this.gbOBJPalette=this.getTypedArray(8,0,"int32"),this.BGPalette=this.gbBGPalette=this.getTypedArray(4,0,"int32"),this.OBJPalette=this.gbOBJPalette,this.tileCache=this.generateCacheArray(1792),this.sortBuffer=this.getTypedArray(256,0,"uint8"),this.OAMAddressCache=this.getTypedArray(10,0,"int32"));this.renderPathBuild()};
GameBoyCore.prototype.GBCtoGBModeAdjust=function(){cout("Stepping down from GBC mode.",0);this.VRAM=this.GBCMemory=this.BGCHRCurrentBank=this.BGCHRBank2=null;this.tileCache.length=1792;settings[4]?(this.gbBGColorizedPalette=this.getTypedArray(4,0,"int32"),this.gbOBJColorizedPalette=this.getTypedArray(8,0,"int32"),this.cachedBGPaletteConversion=this.getTypedArray(4,0,"int32"),this.cachedOBJPaletteConversion=this.getTypedArray(8,0,"int32"),this.BGPalette=this.gbBGColorizedPalette,this.OBJPalette=this.gbOBJColorizedPalette,
this.gbOBJPalette=this.gbBGPalette=null,this.getGBCColor()):(this.gbOBJPalette=this.getTypedArray(8,0,"int32"),this.BGPalette=this.gbBGPalette=this.getTypedArray(4,0,"int32"),this.OBJPalette=this.gbOBJPalette);this.sortBuffer=this.getTypedArray(256,0,"uint8");this.OAMAddressCache=this.getTypedArray(10,0,"int32");this.renderPathBuild();this.memoryReadJumpCompile();this.memoryWriteJumpCompile()};
GameBoyCore.prototype.renderPathBuild=function(){this.cGBC?(this.priorityFlaggingPathRebuild(),this.SpriteLayerRender=this.SpriteGBCLayerRender):(this.BGLayerRender=this.BGGBLayerRender,this.WindowLayerRender=this.WindowGBLayerRender,this.SpriteLayerRender=this.SpriteGBLayerRender)};
GameBoyCore.prototype.priorityFlaggingPathRebuild=function(){this.BGPriorityEnabled?(this.BGLayerRender=this.BGGBCLayerRender,this.WindowLayerRender=this.WindowGBCLayerRender):(this.BGLayerRender=this.BGGBCLayerRenderNoPriorityFlagging,this.WindowLayerRender=this.WindowGBCLayerRenderNoPriorityFlagging)};
GameBoyCore.prototype.initializeReferencesFromSaveState=function(){this.LCDCONTROL=this.LCDisOn?this.LINECONTROL:this.DISPLAYOFFCONTROL;var a=0;if(this.cGBC)for(this.BGCHRCurrentBank=0<this.currVRAMBank?this.BGCHRBank2:this.BGCHRBank1,this.tileCache=this.generateCacheArray(3968);6144>a;a+=16)this.generateGBCTileBank1(a),this.generateGBCTileBank2(a);else{this.colorizedGBPalettes?(this.BGPalette=this.gbBGColorizedPalette,this.OBJPalette=this.gbOBJColorizedPalette,this.updateGBBGPalette=this.updateGBColorizedBGPalette,
this.updateGBOBJPalette=this.updateGBColorizedOBJPalette):(this.BGPalette=this.gbBGPalette,this.OBJPalette=this.gbOBJPalette);this.tileCache=this.generateCacheArray(1792);for(a=32768;36864>a;a+=2)this.generateGBOAMTileLine(a);for(a=36864;38912>a;a+=2)this.generateGBTileLine(a);this.sortBuffer=this.getTypedArray(256,0,"uint8");this.OAMAddressCache=this.getTypedArray(10,0,"int32")}this.renderPathBuild()};
GameBoyCore.prototype.RGBTint=function(a){var b=a&31,c=a>>5&31;a=a>>10&31;return 13*b+2*c+a>>1<<16|3*c+a<<9|3*b+2*c+11*a>>1};
GameBoyCore.prototype.getGBCColor=function(){for(var a,b=0;4>b;b++)a=b<<1,this.cachedBGPaletteConversion[b]=this.RGBTint(this.gbcBGRawPalette[a|1]<<8|this.gbcBGRawPalette[a]),this.cachedOBJPaletteConversion[b]=this.RGBTint(this.gbcOBJRawPalette[a|1]<<8|this.gbcOBJRawPalette[a]);for(b=4;8>b;b++)a=b<<1,this.cachedOBJPaletteConversion[b]=this.RGBTint(this.gbcOBJRawPalette[a|1]<<8|this.gbcOBJRawPalette[a]);this.updateGBBGPalette=this.updateGBColorizedBGPalette;this.updateGBOBJPalette=this.updateGBColorizedOBJPalette;
this.updateGBBGPalette(this.memory[65351]);this.updateGBOBJPalette(0,this.memory[65352]);this.updateGBOBJPalette(1,this.memory[65353]);this.colorizedGBPalettes=!0};GameBoyCore.prototype.updateGBRegularBGPalette=function(a){this.gbBGPalette[0]=this.colors[a&3]|33554432;this.gbBGPalette[1]=this.colors[a>>2&3];this.gbBGPalette[2]=this.colors[a>>4&3];this.gbBGPalette[3]=this.colors[a>>6]};
GameBoyCore.prototype.updateGBColorizedBGPalette=function(a){this.gbBGColorizedPalette[0]=this.cachedBGPaletteConversion[a&3]|33554432;this.gbBGColorizedPalette[1]=this.cachedBGPaletteConversion[a>>2&3];this.gbBGColorizedPalette[2]=this.cachedBGPaletteConversion[a>>4&3];this.gbBGColorizedPalette[3]=this.cachedBGPaletteConversion[a>>6]};
GameBoyCore.prototype.updateGBRegularOBJPalette=function(a,b){this.gbOBJPalette[a|1]=this.colors[b>>2&3];this.gbOBJPalette[a|2]=this.colors[b>>4&3];this.gbOBJPalette[a|3]=this.colors[b>>6]};GameBoyCore.prototype.updateGBColorizedOBJPalette=function(a,b){this.gbOBJColorizedPalette[a|1]=this.cachedOBJPaletteConversion[a|b>>2&3];this.gbOBJColorizedPalette[a|2]=this.cachedOBJPaletteConversion[a|b>>4&3];this.gbOBJColorizedPalette[a|3]=this.cachedOBJPaletteConversion[a|b>>6]};
GameBoyCore.prototype.updateGBCBGPalette=function(a,b){this.gbcBGRawPalette[a]!=b&&(this.midScanLineJIT(),this.gbcBGRawPalette[a]=b,b=0==(a&6)?33554432|this.RGBTint(this.gbcBGRawPalette[a|1]<<8|this.gbcBGRawPalette[a&62]):this.RGBTint(this.gbcBGRawPalette[a|1]<<8|this.gbcBGRawPalette[a&62]),a>>=1,this.gbcBGPalette[a]=b,this.gbcBGPalette[32|a]=16777216|b)};
GameBoyCore.prototype.updateGBCOBJPalette=function(a,b){this.gbcOBJRawPalette[a]!=b&&(this.gbcOBJRawPalette[a]=b,0<(a&6)&&(this.midScanLineJIT(),this.gbcOBJPalette[a>>1]=16777216|this.RGBTint(this.gbcOBJRawPalette[a|1]<<8|this.gbcOBJRawPalette[a&62])))};
GameBoyCore.prototype.BGGBLayerRender=function(a){var b=this.backgroundY+a&255,c=(b&7)<<3;b=this.gfxBackgroundCHRBankPosition|(b&248)<<2;var g=this.backgroundX+this.currentX&255,e=this.pixelStart+this.currentX;a=this.pixelStart+(this.gfxWindowDisplay&&0<=a-this.windowY?Math.min(Math.max(this.windowX,0)+this.currentX,this.pixelEnd):this.pixelEnd);var d=b+(g>>3),f=this.BGCHRBank1[d];f<this.gfxBackgroundBankOffset&&(f|=256);f=this.tileCache[f];for(var l=g&7;8>l&&e<a&&256>g;++g)this.frameBuffer[e++]=
this.BGPalette[f[c|l++]];var m=Math.min(a-e,256-g)>>3;g+=m<<3;for(m+=d;d<m;)f=this.BGCHRBank1[++d],f<this.gfxBackgroundBankOffset&&(f|=256),f=this.tileCache[f],l=c,this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=
this.BGPalette[f[l]];if(e<a){if(256>g)for(f=this.BGCHRBank1[++d],f<this.gfxBackgroundBankOffset&&(f|=256),f=this.tileCache[f],l=c-1;e<a&&256>g;++g)this.frameBuffer[e++]=this.BGPalette[f[++l]];for(m=(a-e>>3)+b;b<m;)f=this.BGCHRBank1[b++],f<this.gfxBackgroundBankOffset&&(f|=256),f=this.tileCache[f],l=c,this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=
this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l++]],this.frameBuffer[e++]=this.BGPalette[f[l]];if(e<a)switch(f=this.BGCHRBank1[b],f<this.gfxBackgroundBankOffset&&(f|=256),f=this.tileCache[f],a-e){case 7:this.frameBuffer[e+6]=this.BGPalette[f[c|6]];case 6:this.frameBuffer[e+5]=this.BGPalette[f[c|5]];case 5:this.frameBuffer[e+4]=this.BGPalette[f[c|4]];case 4:this.frameBuffer[e+3]=this.BGPalette[f[c|3]];case 3:this.frameBuffer[e+2]=this.BGPalette[f[c|
2]];case 2:this.frameBuffer[e+1]=this.BGPalette[f[c|1]];case 1:this.frameBuffer[e]=this.BGPalette[f[c]]}}};
GameBoyCore.prototype.BGGBCLayerRender=function(a){var b=this.backgroundY+a&255,c=(b&7)<<3;b=this.gfxBackgroundCHRBankPosition|(b&248)<<2;var g=this.backgroundX+this.currentX&255,e=this.pixelStart+this.currentX;a=this.pixelStart+(this.gfxWindowDisplay&&0<=a-this.windowY?Math.min(Math.max(this.windowX,0)+this.currentX,this.pixelEnd):this.pixelEnd);var d=b+(g>>3),f=this.BGCHRBank1[d];f<this.gfxBackgroundBankOffset&&(f|=256);var l=this.BGCHRBank2[d];f=this.tileCache[(l&8)<<8|(l&96)<<4|f];l=(l&7)<<2|
(l&128)>>2;for(var m=g&7;8>m&&e<a&&256>g;++g)this.frameBuffer[e++]=this.gbcBGPalette[l|f[c|m++]];var n=Math.min(a-e,256-g)>>3;g+=n<<3;for(n+=d;d<n;)f=this.BGCHRBank1[++d],f<this.gfxBackgroundBankOffset&&(f|=256),l=this.BGCHRBank2[d],f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2|(l&128)>>2,m=c,this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=
this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m]];if(e<a){if(256>g)for(f=this.BGCHRBank1[++d],f<this.gfxBackgroundBankOffset&&(f|=256),l=this.BGCHRBank2[d],f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2|(l&128)>>2,m=c-1;e<a&&256>g;++g)this.frameBuffer[e++]=this.gbcBGPalette[l|f[++m]];for(n=(a-e>>3)+b;b<n;)f=this.BGCHRBank1[b],f<this.gfxBackgroundBankOffset&&(f|=256),l=this.BGCHRBank2[b++],
f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2|(l&128)>>2,m=c,this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m]];if(e<a)switch(f=this.BGCHRBank1[b],f<this.gfxBackgroundBankOffset&&
(f|=256),l=this.BGCHRBank2[b],f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2|(l&128)>>2,a-e){case 7:this.frameBuffer[e+6]=this.gbcBGPalette[l|f[c|6]];case 6:this.frameBuffer[e+5]=this.gbcBGPalette[l|f[c|5]];case 5:this.frameBuffer[e+4]=this.gbcBGPalette[l|f[c|4]];case 4:this.frameBuffer[e+3]=this.gbcBGPalette[l|f[c|3]];case 3:this.frameBuffer[e+2]=this.gbcBGPalette[l|f[c|2]];case 2:this.frameBuffer[e+1]=this.gbcBGPalette[l|f[c|1]];case 1:this.frameBuffer[e]=this.gbcBGPalette[l|f[c]]}}};
GameBoyCore.prototype.BGGBCLayerRenderNoPriorityFlagging=function(a){var b=this.backgroundY+a&255,c=(b&7)<<3;b=this.gfxBackgroundCHRBankPosition|(b&248)<<2;var g=this.backgroundX+this.currentX&255,e=this.pixelStart+this.currentX;a=this.pixelStart+(this.gfxWindowDisplay&&0<=a-this.windowY?Math.min(Math.max(this.windowX,0)+this.currentX,this.pixelEnd):this.pixelEnd);var d=b+(g>>3),f=this.BGCHRBank1[d];f<this.gfxBackgroundBankOffset&&(f|=256);var l=this.BGCHRBank2[d];f=this.tileCache[(l&8)<<8|(l&96)<<
4|f];l=(l&7)<<2;for(var m=g&7;8>m&&e<a&&256>g;++g)this.frameBuffer[e++]=this.gbcBGPalette[l|f[c|m++]];var n=Math.min(a-e,256-g)>>3;g+=n<<3;for(n+=d;d<n;)f=this.BGCHRBank1[++d],f<this.gfxBackgroundBankOffset&&(f|=256),l=this.BGCHRBank2[d],f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2,m=c,this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=
this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m]];if(e<a){if(256>g)for(f=this.BGCHRBank1[++d],f<this.gfxBackgroundBankOffset&&(f|=256),l=this.BGCHRBank2[d],f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2,m=c-1;e<a&&256>g;++g)this.frameBuffer[e++]=this.gbcBGPalette[l|f[++m]];for(n=(a-e>>3)+b;b<n;)f=this.BGCHRBank1[b],f<this.gfxBackgroundBankOffset&&(f|=256),l=this.BGCHRBank2[b++],
f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2,m=c,this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m++]],this.frameBuffer[e++]=this.gbcBGPalette[l|f[m]];if(e<a)switch(f=this.BGCHRBank1[b],f<this.gfxBackgroundBankOffset&&
(f|=256),l=this.BGCHRBank2[b],f=this.tileCache[(l&8)<<8|(l&96)<<4|f],l=(l&7)<<2,a-e){case 7:this.frameBuffer[e+6]=this.gbcBGPalette[l|f[c|6]];case 6:this.frameBuffer[e+5]=this.gbcBGPalette[l|f[c|5]];case 5:this.frameBuffer[e+4]=this.gbcBGPalette[l|f[c|4]];case 4:this.frameBuffer[e+3]=this.gbcBGPalette[l|f[c|3]];case 3:this.frameBuffer[e+2]=this.gbcBGPalette[l|f[c|2]];case 2:this.frameBuffer[e+1]=this.gbcBGPalette[l|f[c|1]];case 1:this.frameBuffer[e]=this.gbcBGPalette[l|f[c]]}}};
GameBoyCore.prototype.WindowGBLayerRender=function(a){if(this.gfxWindowDisplay){var b=a-this.windowY;if(0<=b){a=0<this.windowX?this.windowX+this.currentX:this.currentX;var c=this.pixelStart+a,g=this.pixelStart+this.pixelEnd;if(c<g){var e=(b&7)<<3;b=(this.gfxWindowCHRBankPosition|(b&248)<<2)+(this.currentX>>3);var d=this.BGCHRBank1[b];d<this.gfxBackgroundBankOffset&&(d|=256);d=this.tileCache[d];var f=a-this.windowX&7;for(a=Math.min(8,f+g-c);f<a;)this.frameBuffer[c++]=this.BGPalette[d[e|f++]];for(a=
b+(g-c>>3);b<a;)d=this.BGCHRBank1[++b],d<this.gfxBackgroundBankOffset&&(d|=256),d=this.tileCache[d],f=e,this.frameBuffer[c++]=this.BGPalette[d[f++]],this.frameBuffer[c++]=this.BGPalette[d[f++]],this.frameBuffer[c++]=this.BGPalette[d[f++]],this.frameBuffer[c++]=this.BGPalette[d[f++]],this.frameBuffer[c++]=this.BGPalette[d[f++]],this.frameBuffer[c++]=this.BGPalette[d[f++]],this.frameBuffer[c++]=this.BGPalette[d[f++]],this.frameBuffer[c++]=this.BGPalette[d[f]];if(c<g)switch(d=this.BGCHRBank1[++b],d<
this.gfxBackgroundBankOffset&&(d|=256),d=this.tileCache[d],g-c){case 7:this.frameBuffer[c+6]=this.BGPalette[d[e|6]];case 6:this.frameBuffer[c+5]=this.BGPalette[d[e|5]];case 5:this.frameBuffer[c+4]=this.BGPalette[d[e|4]];case 4:this.frameBuffer[c+3]=this.BGPalette[d[e|3]];case 3:this.frameBuffer[c+2]=this.BGPalette[d[e|2]];case 2:this.frameBuffer[c+1]=this.BGPalette[d[e|1]];case 1:this.frameBuffer[c]=this.BGPalette[d[e]]}}}}};
GameBoyCore.prototype.WindowGBCLayerRender=function(a){if(this.gfxWindowDisplay){var b=a-this.windowY;if(0<=b){a=0<this.windowX?this.windowX+this.currentX:this.currentX;var c=this.pixelStart+a,g=this.pixelStart+this.pixelEnd;if(c<g){var e=(b&7)<<3;b=(this.gfxWindowCHRBankPosition|(b&248)<<2)+(this.currentX>>3);var d=this.BGCHRBank1[b];d<this.gfxBackgroundBankOffset&&(d|=256);var f=this.BGCHRBank2[b];d=this.tileCache[(f&8)<<8|(f&96)<<4|d];f=(f&7)<<2|(f&128)>>2;var l=a-this.windowX&7;for(a=Math.min(8,
l+g-c);l<a;)this.frameBuffer[c++]=this.gbcBGPalette[f|d[e|l++]];for(a=b+(g-c>>3);b<a;)d=this.BGCHRBank1[++b],d<this.gfxBackgroundBankOffset&&(d|=256),f=this.BGCHRBank2[b],d=this.tileCache[(f&8)<<8|(f&96)<<4|d],f=(f&7)<<2|(f&128)>>2,l=e,this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=
this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l]];if(c<g)switch(d=this.BGCHRBank1[++b],d<this.gfxBackgroundBankOffset&&(d|=256),f=this.BGCHRBank2[b],d=this.tileCache[(f&8)<<8|(f&96)<<4|d],f=(f&7)<<2|(f&128)>>2,g-c){case 7:this.frameBuffer[c+6]=this.gbcBGPalette[f|d[e|6]];case 6:this.frameBuffer[c+5]=this.gbcBGPalette[f|d[e|5]];case 5:this.frameBuffer[c+4]=this.gbcBGPalette[f|d[e|4]];case 4:this.frameBuffer[c+3]=this.gbcBGPalette[f|
d[e|3]];case 3:this.frameBuffer[c+2]=this.gbcBGPalette[f|d[e|2]];case 2:this.frameBuffer[c+1]=this.gbcBGPalette[f|d[e|1]];case 1:this.frameBuffer[c]=this.gbcBGPalette[f|d[e]]}}}}};
GameBoyCore.prototype.WindowGBCLayerRenderNoPriorityFlagging=function(a){if(this.gfxWindowDisplay){var b=a-this.windowY;if(0<=b){a=0<this.windowX?this.windowX+this.currentX:this.currentX;var c=this.pixelStart+a,g=this.pixelStart+this.pixelEnd;if(c<g){var e=(b&7)<<3;b=(this.gfxWindowCHRBankPosition|(b&248)<<2)+(this.currentX>>3);var d=this.BGCHRBank1[b];d<this.gfxBackgroundBankOffset&&(d|=256);var f=this.BGCHRBank2[b];d=this.tileCache[(f&8)<<8|(f&96)<<4|d];f=(f&7)<<2;var l=a-this.windowX&7;for(a=Math.min(8,
l+g-c);l<a;)this.frameBuffer[c++]=this.gbcBGPalette[f|d[e|l++]];for(a=b+(g-c>>3);b<a;)d=this.BGCHRBank1[++b],d<this.gfxBackgroundBankOffset&&(d|=256),f=this.BGCHRBank2[b],d=this.tileCache[(f&8)<<8|(f&96)<<4|d],f=(f&7)<<2,l=e,this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|
d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l++]],this.frameBuffer[c++]=this.gbcBGPalette[f|d[l]];if(c<g)switch(d=this.BGCHRBank1[++b],d<this.gfxBackgroundBankOffset&&(d|=256),f=this.BGCHRBank2[b],d=this.tileCache[(f&8)<<8|(f&96)<<4|d],f=(f&7)<<2,g-c){case 7:this.frameBuffer[c+6]=this.gbcBGPalette[f|d[e|6]];case 6:this.frameBuffer[c+5]=this.gbcBGPalette[f|d[e|5]];case 5:this.frameBuffer[c+4]=this.gbcBGPalette[f|d[e|4]];case 4:this.frameBuffer[c+3]=this.gbcBGPalette[f|d[e|3]];case 3:this.frameBuffer[c+
2]=this.gbcBGPalette[f|d[e|2]];case 2:this.frameBuffer[c+1]=this.gbcBGPalette[f|d[e|1]];case 1:this.frameBuffer[c]=this.gbcBGPalette[f|d[e]]}}}}};
GameBoyCore.prototype.SpriteGBLayerRender=function(a){if(this.gfxSpriteShow){a+=16;var b=1;for(var c,g,e,d,f,l,m=0,n,r,t;168>b;)this.sortBuffer[b++]=255;if(this.gfxSpriteNormalHeight)for(n=this.findLowestSpriteDrawable(a,7);m<n;++m){b=this.OAMAddressCache[m];var v=a-this.memory[b]<<3;e=this.memory[b|3];d=(e&16)>>2;f=this.tileCache[(e&96)<<4|this.memory[b|2]];t=c=this.memory[b|1];g=Math.min(168-t,8);b=7<t?0:8-t;for(r=this.pixelStart+(8<t?t-8:0);b<g;++b,++r,++t)this.sortBuffer[t]>c&&(33554432<=this.frameBuffer[r]?
(l=f[v|b],0<l&&(this.frameBuffer[r]=this.OBJPalette[d|l],this.sortBuffer[t]=c)):16777216>this.frameBuffer[r]&&(l=f[v|b],0<l&&128>e&&(this.frameBuffer[r]=this.OBJPalette[d|l],this.sortBuffer[t]=c)))}else for(n=this.findLowestSpriteDrawable(a,15);m<n;++m)for(b=this.OAMAddressCache[m],v=a-this.memory[b]<<3,e=this.memory[b|3],d=(e&16)>>2,f=(e&64)==(64&v)?this.tileCache[(e&96)<<4|this.memory[b|2]&254]:this.tileCache[(e&96)<<4|this.memory[b|2]|1],v&=63,t=c=this.memory[b|1],g=Math.min(168-t,8),b=7<t?0:8-
t,r=this.pixelStart+(8<t?t-8:0);b<g;++b,++r,++t)this.sortBuffer[t]>c&&(33554432<=this.frameBuffer[r]?(l=f[v|b],0<l&&(this.frameBuffer[r]=this.OBJPalette[d|l],this.sortBuffer[t]=c)):16777216>this.frameBuffer[r]&&(l=f[v|b],0<l&&128>e&&(this.frameBuffer[r]=this.OBJPalette[d|l],this.sortBuffer[t]=c)))}};GameBoyCore.prototype.findLowestSpriteDrawable=function(a,b){for(var c=65024,g=0,e;65184>c&&10>g;)e=a-this.memory[c],(e&b)==e&&(this.OAMAddressCache[g++]=c),c+=4;return g};
GameBoyCore.prototype.SpriteGBCLayerRender=function(a){if(this.gfxSpriteShow){var b=65024;a+=16;var c,g=0;if(this.gfxSpriteNormalHeight)for(;65184>b&&10>g;b+=4){var e=a-this.memory[b];if((e&7)==e){var d=this.memory[b|1]-8;var f=Math.min(160,d+8);var l=this.memory[b|3];var m=(l&7)<<2;var n=this.tileCache[(l&8)<<8|(l&96)<<4|this.memory[b|2]];var r=0<d?d:0;d-=e<<3;for(c=this.pixelStart+r;r<f;++r,++c)33554432<=this.frameBuffer[c]?(e=n[r-d],0<e&&(this.frameBuffer[c]=this.gbcOBJPalette[m|e])):16777216>
this.frameBuffer[c]&&(e=n[r-d],0<e&&128>l&&(this.frameBuffer[c]=this.gbcOBJPalette[m|e]));++g}}else for(;65184>b&&10>g;b+=4)if(e=a-this.memory[b],(e&15)==e){d=this.memory[b|1]-8;f=Math.min(160,d+8);l=this.memory[b|3];m=(l&7)<<2;n=(l&64)==(64&e<<3)?this.tileCache[(l&8)<<8|(l&96)<<4|this.memory[b|2]&254]:this.tileCache[(l&8)<<8|(l&96)<<4|this.memory[b|2]|1];r=0<d?d:0;d-=(e&7)<<3;for(c=this.pixelStart+r;r<f;++r,++c)33554432<=this.frameBuffer[c]?(e=n[r-d],0<e&&(this.frameBuffer[c]=this.gbcOBJPalette[m|
e])):16777216>this.frameBuffer[c]&&(e=n[r-d],0<e&&128>l&&(this.frameBuffer[c]=this.gbcOBJPalette[m|e]));++g}}};GameBoyCore.prototype.generateGBTileLine=function(a){var b=this.memory[1|a]<<8|this.memory[40958&a],c=this.tileCache[(a&8176)>>4];a=(a&14)<<2;c[a|7]=(b&256)>>7|b&1;c[a|6]=(b&512)>>8|(b&2)>>1;c[a|5]=(b&1024)>>9|(b&4)>>2;c[a|4]=(b&2048)>>10|(b&8)>>3;c[a|3]=(b&4096)>>11|(b&16)>>4;c[a|2]=(b&8192)>>12|(b&32)>>5;c[a|1]=(b&16384)>>13|(b&64)>>6;c[a]=(b&32768)>>14|(b&128)>>7};
GameBoyCore.prototype.generateGBCTileLineBank1=function(a){var b=this.memory[1|a]<<8|this.memory[40958&a];a&=8190;var c=this.tileCache[a>>4],g=this.tileCache[512|a>>4],e=this.tileCache[1024|a>>4],d=this.tileCache[1536|a>>4];a=(a&14)<<2;var f=56-a;d[f]=g[a]=e[f|7]=c[a|7]=(b&256)>>7|b&1;d[f|1]=g[a|1]=e[f|6]=c[a|6]=(b&512)>>8|(b&2)>>1;d[f|2]=g[a|2]=e[f|5]=c[a|5]=(b&1024)>>9|(b&4)>>2;d[f|3]=g[a|3]=e[f|4]=c[a|4]=(b&2048)>>10|(b&8)>>3;d[f|4]=g[a|4]=e[f|3]=c[a|3]=(b&4096)>>11|(b&16)>>4;d[f|5]=g[a|5]=e[f|
2]=c[a|2]=(b&8192)>>12|(b&32)>>5;d[f|6]=g[a|6]=e[f|1]=c[a|1]=(b&16384)>>13|(b&64)>>6;d[f|7]=g[a|7]=e[f]=c[a]=(b&32768)>>14|(b&128)>>7};
GameBoyCore.prototype.generateGBCTileBank1=function(a){var b=a>>4,c=this.tileCache[b],g=this.tileCache[512|b],e=this.tileCache[1024|b],d=this.tileCache[1536|b];a|=32768;b=0;var f=56;do{var l=this.memory[1|a]<<8|this.memory[a];d[f]=g[b]=e[f|7]=c[b|7]=(l&256)>>7|l&1;d[f|1]=g[b|1]=e[f|6]=c[b|6]=(l&512)>>8|(l&2)>>1;d[f|2]=g[b|2]=e[f|5]=c[b|5]=(l&1024)>>9|(l&4)>>2;d[f|3]=g[b|3]=e[f|4]=c[b|4]=(l&2048)>>10|(l&8)>>3;d[f|4]=g[b|4]=e[f|3]=c[b|3]=(l&4096)>>11|(l&16)>>4;d[f|5]=g[b|5]=e[f|2]=c[b|2]=(l&8192)>>
12|(l&32)>>5;d[f|6]=g[b|6]=e[f|1]=c[b|1]=(l&16384)>>13|(l&64)>>6;d[f|7]=g[b|7]=e[f]=c[b]=(l&32768)>>14|(l&128)>>7;b+=8;f-=8;a+=2}while(-1<f)};
GameBoyCore.prototype.generateGBCTileLineBank2=function(a){var b=this.VRAM[1|a]<<8|this.VRAM[8190&a],c=this.tileCache[2048|a>>4],g=this.tileCache[2560|a>>4],e=this.tileCache[3072|a>>4],d=this.tileCache[3584|a>>4];a=(a&14)<<2;var f=56-a;d[f]=g[a]=e[f|7]=c[a|7]=(b&256)>>7|b&1;d[f|1]=g[a|1]=e[f|6]=c[a|6]=(b&512)>>8|(b&2)>>1;d[f|2]=g[a|2]=e[f|5]=c[a|5]=(b&1024)>>9|(b&4)>>2;d[f|3]=g[a|3]=e[f|4]=c[a|4]=(b&2048)>>10|(b&8)>>3;d[f|4]=g[a|4]=e[f|3]=c[a|3]=(b&4096)>>11|(b&16)>>4;d[f|5]=g[a|5]=e[f|2]=c[a|2]=
(b&8192)>>12|(b&32)>>5;d[f|6]=g[a|6]=e[f|1]=c[a|1]=(b&16384)>>13|(b&64)>>6;d[f|7]=g[a|7]=e[f]=c[a]=(b&32768)>>14|(b&128)>>7};
GameBoyCore.prototype.generateGBCTileBank2=function(a){var b=a>>4,c=this.tileCache[2048|b],g=this.tileCache[2560|b],e=this.tileCache[3072|b],d=this.tileCache[3584|b];b=0;var f=56;do{var l=this.VRAM[1|a]<<8|this.VRAM[a];d[f]=g[b]=e[f|7]=c[b|7]=(l&256)>>7|l&1;d[f|1]=g[b|1]=e[f|6]=c[b|6]=(l&512)>>8|(l&2)>>1;d[f|2]=g[b|2]=e[f|5]=c[b|5]=(l&1024)>>9|(l&4)>>2;d[f|3]=g[b|3]=e[f|4]=c[b|4]=(l&2048)>>10|(l&8)>>3;d[f|4]=g[b|4]=e[f|3]=c[b|3]=(l&4096)>>11|(l&16)>>4;d[f|5]=g[b|5]=e[f|2]=c[b|2]=(l&8192)>>12|(l&32)>>
5;d[f|6]=g[b|6]=e[f|1]=c[b|1]=(l&16384)>>13|(l&64)>>6;d[f|7]=g[b|7]=e[f]=c[b]=(l&32768)>>14|(l&128)>>7;b+=8;f-=8;a+=2}while(-1<f)};
GameBoyCore.prototype.generateGBOAMTileLine=function(a){var b=this.memory[1|a]<<8|this.memory[40958&a];a&=8190;var c=this.tileCache[a>>4],g=this.tileCache[512|a>>4],e=this.tileCache[1024|a>>4],d=this.tileCache[1536|a>>4];a=(a&14)<<2;var f=56-a;d[f]=g[a]=e[f|7]=c[a|7]=(b&256)>>7|b&1;d[f|1]=g[a|1]=e[f|6]=c[a|6]=(b&512)>>8|(b&2)>>1;d[f|2]=g[a|2]=e[f|5]=c[a|5]=(b&1024)>>9|(b&4)>>2;d[f|3]=g[a|3]=e[f|4]=c[a|4]=(b&2048)>>10|(b&8)>>3;d[f|4]=g[a|4]=e[f|3]=c[a|3]=(b&4096)>>11|(b&16)>>4;d[f|5]=g[a|5]=e[f|2]=
c[a|2]=(b&8192)>>12|(b&32)>>5;d[f|6]=g[a|6]=e[f|1]=c[a|1]=(b&16384)>>13|(b&64)>>6;d[f|7]=g[a|7]=e[f]=c[a]=(b&32768)>>14|(b&128)>>7};GameBoyCore.prototype.graphicsJIT=function(){this.LCDisOn&&(this.totalLinesPassed=0,this.graphicsJITScanlineGroup())};GameBoyCore.prototype.graphicsJITVBlank=function(){this.totalLinesPassed+=this.queuedScanLines;this.graphicsJITScanlineGroup()};
GameBoyCore.prototype.graphicsJITScanlineGroup=function(){for(;0<this.queuedScanLines;)this.renderScanLine(this.lastUnrenderedLine),143>this.lastUnrenderedLine?++this.lastUnrenderedLine:this.lastUnrenderedLine=0,--this.queuedScanLines};GameBoyCore.prototype.incrementScanLineQueue=function(){144>this.queuedScanLines?++this.queuedScanLines:(this.currentX=0,this.midScanlineOffset=-1,143>this.lastUnrenderedLine?++this.lastUnrenderedLine:this.lastUnrenderedLine=0)};
GameBoyCore.prototype.midScanLineJIT=function(){this.graphicsJIT();this.renderMidScanLine()};
GameBoyCore.prototype.launchIRQ=function(){var a=0,b=1;do{if((b&this.IRQLineMatched)==b){this.IME=!1;this.interruptsRequested-=b;this.IRQLineMatched=0;this.CPUTicks=20;this.stackPointer=this.stackPointer-1&65535;this.memoryWriter[this.stackPointer](this,this.stackPointer,this.programCounter>>8);this.stackPointer=this.stackPointer-1&65535;this.memoryWriter[this.stackPointer](this,this.stackPointer,this.programCounter&255);this.programCounter=64|a<<3;this.updateCore();break}b=1<<++a}while(5>a)};
GameBoyCore.prototype.checkIRQMatching=function(){this.IME&&(this.IRQLineMatched=this.interruptsEnabled&this.interruptsRequested&31)};
GameBoyCore.prototype.calculateHALTPeriod=function(){if(this.halt)var a=this.remainingClocks;else{this.halt=!0;a=-1;if(this.LCDisOn&&(1==(this.interruptsEnabled&1)&&(a=456*((1==this.modeSTAT?298:144)-this.actualScanLine)-this.LCDTicks<<this.doubleSpeedShifter),2==(this.interruptsEnabled&2))){if(this.mode0TriggerSTAT){var b=this.clocksUntilMode0()-this.LCDTicks<<this.doubleSpeedShifter;if(b<=a||-1==a)a=b}this.mode1TriggerSTAT&&0==(this.interruptsEnabled&1)&&(b=456*((1==this.modeSTAT?298:144)-this.actualScanLine)-
this.LCDTicks<<this.doubleSpeedShifter,b<=a||-1==a)&&(a=b);this.mode2TriggerSTAT&&(b=(143<=this.actualScanLine?456*(154-this.actualScanLine):456)-this.LCDTicks<<this.doubleSpeedShifter,b<=a||-1==a)&&(a=b);this.LYCMatchTriggerSTAT&&153>=this.memory[65349]&&(b=this.clocksUntilLYCMatch()-this.LCDTicks<<this.doubleSpeedShifter,b<=a||-1==a)&&(a=b)}this.TIMAEnabled&&4==(this.interruptsEnabled&4)&&(b=(256-this.memory[65285])*this.TACClocker-this.timerTicks,b<=a||-1==a)&&(a=b);0<this.serialTimer&&8==(this.interruptsEnabled&
8)&&(this.serialTimer<=a||-1==a)&&(a=this.serialTimer)}b=this.CPUCyclesTotal-this.emulatorTicks<<this.doubleSpeedShifter;0<=a?a<=b?(this.CPUTicks=Math.max(a,this.CPUTicks),this.updateCoreFull(),this.halt=!1,this.CPUTicks=0):(this.CPUTicks=Math.max(b,this.CPUTicks),this.remainingClocks=a-this.CPUTicks):this.CPUTicks+=b};GameBoyCore.prototype.memoryRead=function(a){return this.memoryReader[a](this,a)};GameBoyCore.prototype.memoryHighRead=function(a){return this.memoryHighReader[a](this,a)};
GameBoyCore.prototype.memoryReadJumpCompile=function(){for(var a=0;65535>=a;a++)if(16384>a)this.memoryReader[a]=this.memoryReadNormal;else if(32768>a)this.memoryReader[a]=this.memoryReadROM;else if(38912>a)this.memoryReader[a]=this.cGBC?this.VRAMDATAReadCGBCPU:this.VRAMDATAReadDMGCPU;else if(40960>a)this.memoryReader[a]=this.cGBC?this.VRAMCHRReadCGBCPU:this.VRAMCHRReadDMGCPU;else if(40960<=a&&49152>a)this.memoryReader[a]=.0625==this.numRAMBanks&&41472>a||1<=this.numRAMBanks?this.cMBC7?this.memoryReadMBC7:
this.cMBC3?this.memoryReadMBC3:this.memoryReadMBC:this.memoryReadBAD;else if(49152<=a&&57344>a)this.memoryReader[a]=!this.cGBC||53248>a?this.memoryReadNormal:this.memoryReadGBCMemory;else if(57344<=a&&65024>a)this.memoryReader[a]=!this.cGBC||61440>a?this.memoryReadECHONormal:this.memoryReadECHOGBCMemory;else if(65184>a)this.memoryReader[a]=this.memoryReadOAM;else if(this.cGBC&&65184<=a&&65280>a)this.memoryReader[a]=this.memoryReadNormal;else if(65280<=a)switch(a){case 65280:this.memoryHighReader[0]=
this.memoryReader[65280]=function(a,c){return 192|a.memory[65280]};break;case 65281:this.memoryHighReader[1]=this.memoryReader[65281]=function(a,c){return 128>a.memory[65282]?a.memory[65281]:255};break;case 65282:this.memoryHighReader[2]=this.cGBC?this.memoryReader[65282]=function(a,c){return(0>=a.serialTimer?124:252)|a.memory[65282]}:this.memoryReader[65282]=function(a,c){return(0>=a.serialTimer?126:254)|a.memory[65282]};break;case 65283:this.memoryHighReader[3]=this.memoryReader[65283]=this.memoryReadBAD;
break;case 65284:this.memoryHighReader[4]=this.memoryReader[65284]=function(a,c){a.memory[65284]=a.memory[65284]+(a.DIVTicks>>8)&255;a.DIVTicks&=255;return a.memory[65284]};break;case 65285:case 65286:this.memoryHighReader[a&255]=this.memoryHighReadNormal;this.memoryReader[a]=this.memoryReadNormal;break;case 65287:this.memoryHighReader[7]=this.memoryReader[65287]=function(a,c){return 248|a.memory[65287]};break;case 65288:case 65289:case 65290:case 65291:case 65292:case 65293:case 65294:this.memoryHighReader[a&
255]=this.memoryReader[a]=this.memoryReadBAD;break;case 65295:this.memoryHighReader[15]=this.memoryReader[65295]=function(a,c){return 224|a.interruptsRequested};break;case 65296:this.memoryHighReader[16]=this.memoryReader[65296]=function(a,c){return 128|a.memory[65296]};break;case 65297:this.memoryHighReader[17]=this.memoryReader[65297]=function(a,c){return 63|a.memory[65297]};break;case 65298:this.memoryHighReader[18]=this.memoryHighReadNormal;this.memoryReader[65298]=this.memoryReadNormal;break;
case 65299:this.memoryHighReader[19]=this.memoryReader[65299]=this.memoryReadBAD;break;case 65300:this.memoryHighReader[20]=this.memoryReader[65300]=function(a,c){return 191|a.memory[65300]};break;case 65301:this.memoryHighReader[21]=this.memoryReadBAD;this.memoryReader[65301]=this.memoryReadBAD;break;case 65302:this.memoryHighReader[22]=this.memoryReader[65302]=function(a,c){return 63|a.memory[65302]};break;case 65303:this.memoryHighReader[23]=this.memoryHighReadNormal;this.memoryReader[65303]=this.memoryReadNormal;
break;case 65304:this.memoryHighReader[24]=this.memoryReader[65304]=this.memoryReadBAD;break;case 65305:this.memoryHighReader[25]=this.memoryReader[65305]=function(a,c){return 191|a.memory[65305]};break;case 65306:this.memoryHighReader[26]=this.memoryReader[65306]=function(a,c){return 127|a.memory[65306]};break;case 65307:this.memoryHighReader[27]=this.memoryReader[65307]=this.memoryReadBAD;break;case 65308:this.memoryHighReader[28]=this.memoryReader[65308]=function(a,c){return 159|a.memory[65308]};
break;case 65309:this.memoryHighReader[29]=this.memoryReader[65309]=this.memoryReadBAD;break;case 65310:this.memoryHighReader[30]=this.memoryReader[65310]=function(a,c){return 191|a.memory[65310]};break;case 65311:case 65312:this.memoryHighReader[a&255]=this.memoryReader[a]=this.memoryReadBAD;break;case 65313:case 65314:this.memoryHighReader[a&255]=this.memoryHighReadNormal;this.memoryReader[a]=this.memoryReadNormal;break;case 65315:this.memoryHighReader[35]=this.memoryReader[65315]=function(a,c){return 191|
a.memory[65315]};break;case 65316:case 65317:this.memoryHighReader[a&255]=this.memoryHighReadNormal;this.memoryReader[a]=this.memoryReadNormal;break;case 65318:this.memoryHighReader[38]=this.memoryReader[65318]=function(a,c){a.audioJIT();return 112|a.memory[65318]};break;case 65319:case 65320:case 65321:case 65322:case 65323:case 65324:case 65325:case 65326:case 65327:this.memoryHighReader[a&255]=this.memoryReader[a]=this.memoryReadBAD;break;case 65328:case 65329:case 65330:case 65331:case 65332:case 65333:case 65334:case 65335:case 65336:case 65337:case 65338:case 65339:case 65340:case 65341:case 65342:case 65343:this.memoryReader[a]=
function(a,c){return a.channel3canPlay?a.memory[65280|a.channel3lastSampleLookup>>1]:a.memory[c]};this.memoryHighReader[a&255]=function(a,c){return a.channel3canPlay?a.memory[65280|a.channel3lastSampleLookup>>1]:a.memory[65280|c]};break;case 65344:this.memoryHighReader[64]=this.memoryHighReadNormal;this.memoryReader[65344]=this.memoryReadNormal;break;case 65345:this.memoryHighReader[65]=this.memoryReader[65345]=function(a,c){return 128|a.memory[65345]|a.modeSTAT};break;case 65346:this.memoryHighReader[66]=
this.memoryReader[65346]=function(a,c){return a.backgroundY};break;case 65347:this.memoryHighReader[67]=this.memoryReader[65347]=function(a,c){return a.backgroundX};break;case 65348:this.memoryHighReader[68]=this.memoryReader[65348]=function(a,c){return a.LCDisOn?a.memory[65348]:0};break;case 65349:case 65350:case 65351:case 65352:case 65353:this.memoryHighReader[a&255]=this.memoryHighReadNormal;this.memoryReader[a]=this.memoryReadNormal;break;case 65354:this.memoryHighReader[74]=this.memoryReader[65354]=
function(a,c){return a.windowY};break;case 65355:this.memoryHighReader[75]=this.memoryHighReadNormal;this.memoryReader[65355]=this.memoryReadNormal;break;case 65356:this.memoryHighReader[76]=this.memoryReader[65356]=this.memoryReadBAD;break;case 65357:this.memoryHighReader[77]=this.memoryHighReadNormal;this.memoryReader[65357]=this.memoryReadNormal;break;case 65358:this.memoryHighReader[78]=this.memoryReader[65358]=this.memoryReadBAD;break;case 65359:this.memoryHighReader[79]=this.memoryReader[65359]=
function(a,c){return a.currVRAMBank};break;case 65360:case 65361:case 65362:case 65363:case 65364:this.memoryHighReader[a&255]=this.memoryHighReadNormal;this.memoryReader[a]=this.memoryReadNormal;break;case 65365:this.cGBC?this.memoryHighReader[85]=this.memoryReader[65365]=function(a,c){!a.LCDisOn&&a.hdmaRunning&&(a.DMAWrite((a.memory[65365]&127)+1),a.memory[65365]=255,a.hdmaRunning=!1);return a.memory[65365]}:(this.memoryReader[65365]=this.memoryReadNormal,this.memoryHighReader[85]=this.memoryHighReadNormal);
break;case 65366:this.cGBC?this.memoryHighReader[86]=this.memoryReader[65366]=function(a,c){return 60|(192<=a.memory[65366]?2|a.memory[65366]&193:a.memory[65366]&195)}:(this.memoryReader[65366]=this.memoryReadNormal,this.memoryHighReader[86]=this.memoryHighReadNormal);break;case 65367:case 65368:case 65369:case 65370:case 65371:case 65372:case 65373:case 65374:case 65375:case 65376:case 65377:case 65378:case 65379:case 65380:case 65381:case 65382:case 65383:this.memoryHighReader[a&255]=this.memoryReader[a]=
this.memoryReadBAD;break;case 65384:case 65385:case 65386:case 65387:this.memoryHighReader[a&255]=this.memoryHighReadNormal;this.memoryReader[a]=this.memoryReadNormal;break;case 65388:this.memoryHighReader[108]=this.cGBC?this.memoryReader[65388]=function(a,c){return 254|a.memory[65388]}:this.memoryReader[65388]=this.memoryReadBAD;break;case 65389:case 65390:case 65391:this.memoryHighReader[a&255]=this.memoryReader[a]=this.memoryReadBAD;break;case 65392:this.memoryHighReader[112]=this.cGBC?this.memoryReader[65392]=
function(a,c){return 64|a.memory[65392]}:this.memoryReader[65392]=this.memoryReadBAD;break;case 65393:this.memoryHighReader[113]=this.memoryReader[65393]=this.memoryReadBAD;break;case 65394:case 65395:this.memoryHighReader[a&255]=this.memoryReader[a]=this.memoryReadNormal;break;case 65396:this.memoryHighReader[116]=this.cGBC?this.memoryReader[65396]=this.memoryReadNormal:this.memoryReader[65396]=this.memoryReadBAD;break;case 65397:this.memoryHighReader[117]=this.memoryReader[65397]=function(a,c){return 143|
a.memory[65397]};break;case 65398:this.memoryHighReader[118]=this.memoryReader[65398]=function(a,c){a.audioJIT();return a.channel2envelopeVolume<<4|a.channel1envelopeVolume};break;case 65399:this.memoryHighReader[119]=this.memoryReader[65399]=function(a,c){a.audioJIT();return a.channel4envelopeVolume<<4|a.channel3envelopeVolume};break;case 65400:case 65401:case 65402:case 65403:case 65404:case 65405:case 65406:case 65407:this.memoryHighReader[a&255]=this.memoryReader[a]=this.memoryReadBAD;break;case 65535:this.memoryHighReader[255]=
this.memoryReader[65535]=function(a,c){return a.interruptsEnabled};break;default:this.memoryReader[a]=this.memoryReadNormal,this.memoryHighReader[a&255]=this.memoryHighReadNormal}else this.memoryReader[a]=this.memoryReadBAD};GameBoyCore.prototype.memoryReadNormal=function(a,b){return a.memory[b]};GameBoyCore.prototype.memoryHighReadNormal=function(a,b){return a.memory[65280|b]};GameBoyCore.prototype.memoryReadROM=function(a,b){return a.ROM[a.currentROMBank+b]};
GameBoyCore.prototype.memoryReadMBC=function(a,b){return a.MBCRAMBanksEnabled||settings[10]?a.MBCRam[b+a.currMBCRAMBankPosition]:255};GameBoyCore.prototype.memoryReadMBC7=function(a,b){if(a.MBCRAMBanksEnabled||settings[10])switch(b){case 40960:case 41056:case 41072:return 0;case 41088:return 0;case 41040:return a.highY;case 41024:return a.lowY;case 41008:return a.highX;case 40992:return a.lowX;default:return a.MBCRam[b+a.currMBCRAMBankPosition]}return 255};
GameBoyCore.prototype.memoryReadMBC3=function(a,b){if(a.MBCRAMBanksEnabled||settings[10])switch(a.currMBCRAMBank){case 0:case 1:case 2:case 3:return a.MBCRam[b+a.currMBCRAMBankPosition];case 8:return a.latchedSeconds;case 9:return a.latchedMinutes;case 10:return a.latchedHours;case 11:return a.latchedLDays;case 12:return(a.RTCDayOverFlow?128:0)+(a.RTCHALT?64:0)+a.latchedHDays}return 255};GameBoyCore.prototype.memoryReadGBCMemory=function(a,b){return a.GBCMemory[b+a.gbcRamBankPosition]};
GameBoyCore.prototype.memoryReadOAM=function(a,b){return 1<a.modeSTAT?255:a.memory[b]};GameBoyCore.prototype.memoryReadECHOGBCMemory=function(a,b){return a.GBCMemory[b+a.gbcRamBankPositionECHO]};GameBoyCore.prototype.memoryReadECHONormal=function(a,b){return a.memory[b-8192]};GameBoyCore.prototype.memoryReadBAD=function(a,b){return 255};GameBoyCore.prototype.VRAMDATAReadCGBCPU=function(a,b){return 2<a.modeSTAT?255:0==a.currVRAMBank?a.memory[b]:a.VRAM[b&8191]};
GameBoyCore.prototype.VRAMDATAReadDMGCPU=function(a,b){return 2<a.modeSTAT?255:a.memory[b]};GameBoyCore.prototype.VRAMCHRReadCGBCPU=function(a,b){return 2<a.modeSTAT?255:a.BGCHRCurrentBank[b&2047]};GameBoyCore.prototype.VRAMCHRReadDMGCPU=function(a,b){return 2<a.modeSTAT?255:a.BGCHRBank1[b&2047]};
GameBoyCore.prototype.setCurrentMBC1ROMBank=function(){switch(this.ROMBank1offs){case 0:case 32:case 64:case 96:this.currentROMBank=this.ROMBank1offs%this.ROMBankEdge<<14;break;default:this.currentROMBank=this.ROMBank1offs%this.ROMBankEdge-1<<14}};GameBoyCore.prototype.setCurrentMBC2AND3ROMBank=function(){this.currentROMBank=Math.max(this.ROMBank1offs%this.ROMBankEdge-1,0)<<14};GameBoyCore.prototype.setCurrentMBC5ROMBank=function(){this.currentROMBank=this.ROMBank1offs%this.ROMBankEdge-1<<14};
GameBoyCore.prototype.memoryWrite=function(a,b){this.memoryWriter[a](this,a,b)};GameBoyCore.prototype.memoryHighWrite=function(a,b){this.memoryHighWriter[a](this,a,b)};
GameBoyCore.prototype.memoryWriteJumpCompile=function(){for(var a=0;65535>=a;a++)32768>a?this.memoryWriter[a]=this.cMBC1?8192>a?this.MBCWriteEnable:16384>a?this.MBC1WriteROMBank:24576>a?this.MBC1WriteRAMBank:this.MBC1WriteType:this.cMBC2?4096>a?this.MBCWriteEnable:8448<=a&&8704>a?this.MBC2WriteROMBank:this.cartIgnoreWrite:this.cMBC3?8192>a?this.MBCWriteEnable:16384>a?this.MBC3WriteROMBank:24576>a?this.MBC3WriteRAMBank:this.MBC3WriteRTCLatch:this.cMBC5||this.cRUMBLE||this.cMBC7?8192>a?this.MBCWriteEnable:
12288>a?this.MBC5WriteROMBankLow:16384>a?this.MBC5WriteROMBankHigh:24576>a?this.cRUMBLE?this.RUMBLEWriteRAMBank:this.MBC5WriteRAMBank:this.cartIgnoreWrite:this.cHuC3?8192>a?this.MBCWriteEnable:16384>a?this.MBC3WriteROMBank:24576>a?this.HuC3WriteRAMBank:this.cartIgnoreWrite:this.cartIgnoreWrite:36864>a?this.memoryWriter[a]=this.cGBC?this.VRAMGBCDATAWrite:this.VRAMGBDATAWrite:38912>a?this.memoryWriter[a]=this.cGBC?this.VRAMGBCDATAWrite:this.VRAMGBDATAUpperWrite:40960>a?this.memoryWriter[a]=this.cGBC?
this.VRAMGBCCHRMAPWrite:this.VRAMGBCHRMAPWrite:49152>a?this.memoryWriter[a]=.0625==this.numRAMBanks&&41472>a||1<=this.numRAMBanks?this.cMBC3?this.memoryWriteMBC3RAM:this.memoryWriteMBCRAM:this.cartIgnoreWrite:57344>a?this.memoryWriter[a]=this.cGBC&&53248<=a?this.memoryWriteGBCRAM:this.memoryWriteNormal:65024>a?this.memoryWriter[a]=this.cGBC&&61440<=a?this.memoryWriteECHOGBCRAM:this.memoryWriteECHONormal:65184>=a?this.memoryWriter[a]=this.memoryWriteOAMRAM:65280>a?this.memoryWriter[a]=this.cGBC?this.memoryWriteNormal:
this.cartIgnoreWrite:(this.memoryWriter[a]=this.memoryWriteNormal,this.memoryHighWriter[a&255]=this.memoryHighWriteNormal);this.registerWriteJumpCompile()};GameBoyCore.prototype.MBCWriteEnable=function(a,b,c){a.MBCRAMBanksEnabled=10==(c&15)};GameBoyCore.prototype.MBC1WriteROMBank=function(a,b,c){a.ROMBank1offs=a.ROMBank1offs&96|c&31;a.setCurrentMBC1ROMBank()};
GameBoyCore.prototype.MBC1WriteRAMBank=function(a,b,c){a.MBC1Mode?(a.currMBCRAMBank=c&3,a.currMBCRAMBankPosition=(a.currMBCRAMBank<<13)-40960):(a.ROMBank1offs=(c&3)<<5|a.ROMBank1offs&31,a.setCurrentMBC1ROMBank())};GameBoyCore.prototype.MBC1WriteType=function(a,b,c){a.MBC1Mode=1==(c&1);a.MBC1Mode?(a.ROMBank1offs&=31,a.setCurrentMBC1ROMBank()):(a.currMBCRAMBank=0,a.currMBCRAMBankPosition=-40960)};GameBoyCore.prototype.MBC2WriteROMBank=function(a,b,c){a.ROMBank1offs=c&15;a.setCurrentMBC2AND3ROMBank()};
GameBoyCore.prototype.MBC3WriteROMBank=function(a,b,c){a.ROMBank1offs=c&127;a.setCurrentMBC2AND3ROMBank()};GameBoyCore.prototype.MBC3WriteRAMBank=function(a,b,c){a.currMBCRAMBank=c;4>c&&(a.currMBCRAMBankPosition=(a.currMBCRAMBank<<13)-40960)};GameBoyCore.prototype.MBC3WriteRTCLatch=function(a,b,c){0==c?a.RTCisLatched=!1:a.RTCisLatched||(a.RTCisLatched=!0,a.latchedSeconds=a.RTCSeconds|0,a.latchedMinutes=a.RTCMinutes,a.latchedHours=a.RTCHours,a.latchedLDays=a.RTCDays&255,a.latchedHDays=a.RTCDays>>8)};
GameBoyCore.prototype.MBC5WriteROMBankLow=function(a,b,c){a.ROMBank1offs=a.ROMBank1offs&256|c;a.setCurrentMBC5ROMBank()};GameBoyCore.prototype.MBC5WriteROMBankHigh=function(a,b,c){a.ROMBank1offs=(c&1)<<8|a.ROMBank1offs&255;a.setCurrentMBC5ROMBank()};GameBoyCore.prototype.MBC5WriteRAMBank=function(a,b,c){a.currMBCRAMBank=c&15;a.currMBCRAMBankPosition=(a.currMBCRAMBank<<13)-40960};
GameBoyCore.prototype.RUMBLEWriteRAMBank=function(a,b,c){a.currMBCRAMBank=c&3;a.currMBCRAMBankPosition=(a.currMBCRAMBank<<13)-40960};GameBoyCore.prototype.HuC3WriteRAMBank=function(a,b,c){a.currMBCRAMBank=c&3;a.currMBCRAMBankPosition=(a.currMBCRAMBank<<13)-40960};GameBoyCore.prototype.cartIgnoreWrite=function(a,b,c){};GameBoyCore.prototype.memoryWriteNormal=function(a,b,c){a.memory[b]=c};GameBoyCore.prototype.memoryHighWriteNormal=function(a,b,c){a.memory[65280|b]=c};
GameBoyCore.prototype.memoryWriteMBCRAM=function(a,b,c){if(a.MBCRAMBanksEnabled||settings[10])a.MBCRam[b+a.currMBCRAMBankPosition]=c};
GameBoyCore.prototype.memoryWriteMBC3RAM=function(a,b,c){if(a.MBCRAMBanksEnabled||settings[10])switch(a.currMBCRAMBank){case 0:case 1:case 2:case 3:a.MBCRam[b+a.currMBCRAMBankPosition]=c;break;case 8:60>c?a.RTCSeconds=c:cout("(Bank #"+a.currMBCRAMBank+") RTC write out of range: "+c,1);break;case 9:60>c?a.RTCMinutes=c:cout("(Bank #"+a.currMBCRAMBank+") RTC write out of range: "+c,1);break;case 10:24>c?a.RTCHours=c:cout("(Bank #"+a.currMBCRAMBank+") RTC write out of range: "+c,1);break;case 11:a.RTCDays=
c&255|a.RTCDays&256;break;case 12:a.RTCDayOverFlow=127<c;a.RTCHalt=64==(c&64);a.RTCDays=(c&1)<<8|a.RTCDays&255;break;default:cout("Invalid MBC3 bank address selected: "+a.currMBCRAMBank,0)}};GameBoyCore.prototype.memoryWriteGBCRAM=function(a,b,c){a.GBCMemory[b+a.gbcRamBankPosition]=c};GameBoyCore.prototype.memoryWriteOAMRAM=function(a,b,c){2>a.modeSTAT&&a.memory[b]!=c&&(a.graphicsJIT(),a.memory[b]=c)};
GameBoyCore.prototype.memoryWriteECHOGBCRAM=function(a,b,c){a.GBCMemory[b+a.gbcRamBankPositionECHO]=c};GameBoyCore.prototype.memoryWriteECHONormal=function(a,b,c){a.memory[b-8192]=c};GameBoyCore.prototype.VRAMGBDATAWrite=function(a,b,c){3>a.modeSTAT&&a.memory[b]!=c&&(a.graphicsJIT(),a.memory[b]=c,a.generateGBOAMTileLine(b))};GameBoyCore.prototype.VRAMGBDATAUpperWrite=function(a,b,c){3>a.modeSTAT&&a.memory[b]!=c&&(a.graphicsJIT(),a.memory[b]=c,a.generateGBTileLine(b))};
GameBoyCore.prototype.VRAMGBCDATAWrite=function(a,b,c){3>a.modeSTAT&&(0==a.currVRAMBank?a.memory[b]!=c&&(a.graphicsJIT(),a.memory[b]=c,a.generateGBCTileLineBank1(b)):(b&=8191,a.VRAM[b]!=c&&(a.graphicsJIT(),a.VRAM[b]=c,a.generateGBCTileLineBank2(b))))};GameBoyCore.prototype.VRAMGBCHRMAPWrite=function(a,b,c){3>a.modeSTAT&&(b&=2047,a.BGCHRBank1[b]!=c&&(a.graphicsJIT(),a.BGCHRBank1[b]=c))};
GameBoyCore.prototype.VRAMGBCCHRMAPWrite=function(a,b,c){3>a.modeSTAT&&(b&=2047,a.BGCHRCurrentBank[b]!=c&&(a.graphicsJIT(),a.BGCHRCurrentBank[b]=c))};
GameBoyCore.prototype.DMAWrite=function(a){this.halt||(this.CPUTicks+=4|a<<5<<this.doubleSpeedShifter);var b=this.memory[65361]<<8|this.memory[65362],c=this.memory[65363]<<8|this.memory[65364],g=this.memoryReader;this.graphicsJIT();var e=this.memory;if(0==this.currVRAMBank){do 6144>c?(e[32768|c]=g[b](this,b++),e[32769|c]=g[b](this,b++),e[32770|c]=g[b](this,b++),e[32771|c]=g[b](this,b++),e[32772|c]=g[b](this,b++),e[32773|c]=g[b](this,b++),e[32774|c]=g[b](this,b++),e[32775|c]=g[b](this,b++),e[32776|
c]=g[b](this,b++),e[32777|c]=g[b](this,b++),e[32778|c]=g[b](this,b++),e[32779|c]=g[b](this,b++),e[32780|c]=g[b](this,b++),e[32781|c]=g[b](this,b++),e[32782|c]=g[b](this,b++),e[32783|c]=g[b](this,b++),this.generateGBCTileBank1(c),c+=16):(c&=2032,this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=
g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),this.BGCHRBank1[c++]=g[b](this,b++),c=c+6144&8176),b&=65520,--a;while(0<a)}else{var d=this.VRAM;do 6144>c?(d[c]=g[b](this,b++),d[c|1]=g[b](this,b++),d[c|2]=g[b](this,b++),d[c|3]=g[b](this,b++),d[c|4]=g[b](this,b++),d[c|5]=g[b](this,b++),
d[c|6]=g[b](this,b++),d[c|7]=g[b](this,b++),d[c|8]=g[b](this,b++),d[c|9]=g[b](this,b++),d[c|10]=g[b](this,b++),d[c|11]=g[b](this,b++),d[c|12]=g[b](this,b++),d[c|13]=g[b](this,b++),d[c|14]=g[b](this,b++),d[c|15]=g[b](this,b++),this.generateGBCTileBank2(c),c+=16):(c&=2032,this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=
g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),this.BGCHRBank2[c++]=g[b](this,b++),c=c+6144&8176),b&=65520,--a;while(0<a)}e[65361]=b>>8;e[65362]=b&240;e[65363]=c>>8;e[65364]=c&240};
GameBoyCore.prototype.registerWriteJumpCompile=function(){this.memoryHighWriter[0]=this.memoryWriter[65280]=function(a,b,c){a.memory[65280]=c&48|(0==(c&32)?a.JoyPad>>4:15)&(0==(c&16)?a.JoyPad&15:15)};this.memoryHighWriter[1]=this.memoryWriter[65281]=function(a,b,c){128>a.memory[65282]&&(a.memory[65281]=c)};this.memoryHighWriter[2]=this.memoryHighWriteNormal;this.memoryWriter[65282]=this.memoryWriteNormal;this.memoryHighWriter[3]=this.memoryWriter[65283]=this.cartIgnoreWrite;this.memoryHighWriter[4]=
this.memoryWriter[65284]=function(a,b,c){a.DIVTicks&=255;a.memory[65284]=0};this.memoryHighWriter[5]=this.memoryWriter[65285]=function(a,b,c){a.memory[65285]=c};this.memoryHighWriter[6]=this.memoryWriter[65286]=function(a,b,c){a.memory[65286]=c};this.memoryHighWriter[7]=this.memoryWriter[65287]=function(a,b,c){a.memory[65287]=c&7;a.TIMAEnabled=4==(c&4);a.TACClocker=Math.pow(4,0!=(c&3)?c&3:4)<<2};this.memoryHighWriter[8]=this.memoryWriter[65288]=this.cartIgnoreWrite;this.memoryHighWriter[9]=this.memoryWriter[65289]=
this.cartIgnoreWrite;this.memoryHighWriter[10]=this.memoryWriter[65290]=this.cartIgnoreWrite;this.memoryHighWriter[11]=this.memoryWriter[65291]=this.cartIgnoreWrite;this.memoryHighWriter[12]=this.memoryWriter[65292]=this.cartIgnoreWrite;this.memoryHighWriter[13]=this.memoryWriter[65293]=this.cartIgnoreWrite;this.memoryHighWriter[14]=this.memoryWriter[65294]=this.cartIgnoreWrite;this.memoryHighWriter[15]=this.memoryWriter[65295]=function(a,b,c){a.interruptsRequested=c;a.checkIRQMatching()};this.memoryHighWriter[16]=
this.memoryWriter[65296]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel1decreaseSweep&&0==(c&8)&&a.channel1Swept&&(a.channel1SweepFault=!0),a.channel1lastTimeSweep=(c&112)>>4,a.channel1frequencySweepDivider=c&7,a.channel1decreaseSweep=8==(c&8),a.memory[65296]=c,a.channel1EnableCheck())};this.memoryHighWriter[17]=this.memoryWriter[65297]=function(a,b,c){if(a.soundMasterEnabled||!a.cGBC)a.soundMasterEnabled?a.audioJIT():c&=63,a.channel1CachedDuty=a.dutyLookup[c>>6],a.channel1totalLength=
64-(c&63),a.memory[65297]=c,a.channel1EnableCheck()};this.memoryHighWriter[18]=this.memoryWriter[65298]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel1Enabled&&0==a.channel1envelopeSweeps&&(8==((a.memory[65298]^c)&8)?(0==(a.memory[65298]&8)&&(7==(a.memory[65298]&7)?a.channel1envelopeVolume+=2:++a.channel1envelopeVolume),a.channel1envelopeVolume=16-a.channel1envelopeVolume&15):8==(a.memory[65298]&15)&&(a.channel1envelopeVolume=1+a.channel1envelopeVolume&15),a.channel1OutputLevelCache()),
a.channel1envelopeType=8==(c&8),a.memory[65298]=c,a.channel1VolumeEnableCheck())};this.memoryHighWriter[19]=this.memoryWriter[65299]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel1frequency=a.channel1frequency&1792|c,a.channel1FrequencyTracker=2048-a.channel1frequency<<2)};this.memoryHighWriter[20]=this.memoryWriter[65300]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel1consecutive=0==(c&64),a.channel1frequency=(c&7)<<8|a.channel1frequency&255,a.channel1FrequencyTracker=
2048-a.channel1frequency<<2,127<c&&(a.channel1timeSweep=a.channel1lastTimeSweep,a.channel1Swept=!1,b=a.memory[65298],a.channel1envelopeVolume=b>>4,a.channel1OutputLevelCache(),a.channel1envelopeSweepsLast=(b&7)-1,0==a.channel1totalLength&&(a.channel1totalLength=64),a.memory[65318]=0<a.channel1lastTimeSweep||0<a.channel1frequencySweepDivider?a.memory[65318]|1:a.memory[65318]&254,64==(c&64)&&(a.memory[65318]|=1),a.channel1ShadowFrequency=a.channel1frequency,a.channel1SweepFault=!1,a.channel1AudioSweepPerformDummy()),
a.channel1EnableCheck(),a.memory[65300]=c)};this.memoryHighWriter[21]=this.memoryWriter[65301]=this.cartIgnoreWrite;this.memoryHighWriter[22]=this.memoryWriter[65302]=function(a,b,c){if(a.soundMasterEnabled||!a.cGBC)a.soundMasterEnabled?a.audioJIT():c&=63,a.channel2CachedDuty=a.dutyLookup[c>>6],a.channel2totalLength=64-(c&63),a.memory[65302]=c,a.channel2EnableCheck()};this.memoryHighWriter[23]=this.memoryWriter[65303]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel2Enabled&&0==a.channel2envelopeSweeps&&
(8==((a.memory[65303]^c)&8)?(0==(a.memory[65303]&8)&&(7==(a.memory[65303]&7)?a.channel2envelopeVolume+=2:++a.channel2envelopeVolume),a.channel2envelopeVolume=16-a.channel2envelopeVolume&15):8==(a.memory[65303]&15)&&(a.channel2envelopeVolume=1+a.channel2envelopeVolume&15),a.channel2OutputLevelCache()),a.channel2envelopeType=8==(c&8),a.memory[65303]=c,a.channel2VolumeEnableCheck())};this.memoryHighWriter[24]=this.memoryWriter[65304]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel2frequency=
a.channel2frequency&1792|c,a.channel2FrequencyTracker=2048-a.channel2frequency<<2)};this.memoryHighWriter[25]=this.memoryWriter[65305]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),127<c&&(b=a.memory[65303],a.channel2envelopeVolume=b>>4,a.channel2OutputLevelCache(),a.channel2envelopeSweepsLast=(b&7)-1,0==a.channel2totalLength&&(a.channel2totalLength=64),64==(c&64)&&(a.memory[65318]|=2)),a.channel2consecutive=0==(c&64),a.channel2frequency=(c&7)<<8|a.channel2frequency&255,a.channel2FrequencyTracker=
2048-a.channel2frequency<<2,a.memory[65305]=c,a.channel2EnableCheck())};this.memoryHighWriter[26]=this.memoryWriter[65306]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),!a.channel3canPlay&&128<=c&&(a.channel3lastSampleLookup=0,a.channel3UpdateCache()),a.channel3canPlay=127<c,a.channel3canPlay&&127<a.memory[65306]&&!a.channel3consecutive&&(a.memory[65318]|=4),a.memory[65306]=c)};this.memoryHighWriter[27]=this.memoryWriter[65307]=function(a,b,c){if(a.soundMasterEnabled||!a.cGBC)a.soundMasterEnabled&&
a.audioJIT(),a.channel3totalLength=256-c,a.channel3EnableCheck()};this.memoryHighWriter[28]=this.memoryWriter[65308]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),c&=96,a.memory[65308]=c,a.channel3patternType=0==c?4:(c>>5)-1)};this.memoryHighWriter[29]=this.memoryWriter[65309]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel3frequency=a.channel3frequency&1792|c,a.channel3FrequencyPeriod=2048-a.channel3frequency<<1)};this.memoryHighWriter[30]=this.memoryWriter[65310]=function(a,
b,c){a.soundMasterEnabled&&(a.audioJIT(),127<c&&(0==a.channel3totalLength&&(a.channel3totalLength=256),a.channel3lastSampleLookup=0,64==(c&64)&&(a.memory[65318]|=4)),a.channel3consecutive=0==(c&64),a.channel3frequency=(c&7)<<8|a.channel3frequency&255,a.channel3FrequencyPeriod=2048-a.channel3frequency<<1,a.memory[65310]=c,a.channel3EnableCheck())};this.memoryHighWriter[31]=this.memoryWriter[65311]=this.cartIgnoreWrite;this.memoryHighWriter[32]=this.memoryWriter[65312]=function(a,b,c){if(a.soundMasterEnabled||
!a.cGBC)a.soundMasterEnabled&&a.audioJIT(),a.channel4totalLength=64-(c&63),a.channel4EnableCheck()};this.memoryHighWriter[33]=this.memoryWriter[65313]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.channel4Enabled&&0==a.channel4envelopeSweeps&&(8==((a.memory[65313]^c)&8)?(0==(a.memory[65313]&8)&&(7==(a.memory[65313]&7)?a.channel4envelopeVolume+=2:++a.channel4envelopeVolume),a.channel4envelopeVolume=16-a.channel4envelopeVolume&15):8==(a.memory[65313]&15)&&(a.channel4envelopeVolume=1+a.channel4envelopeVolume&
15),a.channel4currentVolume=a.channel4envelopeVolume<<a.channel4VolumeShifter),a.channel4envelopeType=8==(c&8),a.memory[65313]=c,a.channel4UpdateCache(),a.channel4VolumeEnableCheck())};this.memoryHighWriter[34]=this.memoryWriter[65314]=function(a,b,c){if(a.soundMasterEnabled){a.audioJIT();a.channel4FrequencyPeriod=Math.max((c&7)<<4,8)<<(c>>4);b=c&8;if(8==b&&32767==a.channel4BitRange||0==b&&127==a.channel4BitRange)a.channel4lastSampleLookup=0,a.channel4BitRange=8==b?127:32767,a.channel4VolumeShifter=
8==b?7:15,a.channel4currentVolume=a.channel4envelopeVolume<<a.channel4VolumeShifter,a.noiseSampleTable=8==b?a.LSFR7Table:a.LSFR15Table;a.memory[65314]=c;a.channel4UpdateCache()}};this.memoryHighWriter[35]=this.memoryWriter[65315]=function(a,b,c){a.soundMasterEnabled&&(a.audioJIT(),a.memory[65315]=c,a.channel4consecutive=0==(c&64),127<c&&(b=a.memory[65313],a.channel4envelopeVolume=b>>4,a.channel4currentVolume=a.channel4envelopeVolume<<a.channel4VolumeShifter,a.channel4envelopeSweepsLast=(b&7)-1,0==
a.channel4totalLength&&(a.channel4totalLength=64),64==(c&64)&&(a.memory[65318]|=8)),a.channel4EnableCheck())};this.memoryHighWriter[36]=this.memoryWriter[65316]=function(a,b,c){a.soundMasterEnabled&&a.memory[65316]!=c&&(a.audioJIT(),a.memory[65316]=c,a.VinLeftChannelMasterVolume=(c>>4&7)+1,a.VinRightChannelMasterVolume=(c&7)+1,a.mixerOutputLevelCache())};this.memoryHighWriter[37]=this.memoryWriter[65317]=function(a,b,c){a.soundMasterEnabled&&a.memory[65317]!=c&&(a.audioJIT(),a.memory[65317]=c,a.rightChannel1=
1==(c&1),a.rightChannel2=2==(c&2),a.rightChannel3=4==(c&4),a.rightChannel4=8==(c&8),a.leftChannel1=16==(c&16),a.leftChannel2=32==(c&32),a.leftChannel3=64==(c&64),a.leftChannel4=127<c,a.channel1OutputLevelCache(),a.channel2OutputLevelCache(),a.channel3OutputLevelCache(),a.channel4OutputLevelCache())};this.memoryHighWriter[38]=this.memoryWriter[65318]=function(a,b,c){a.audioJIT();if(!a.soundMasterEnabled&&127<c)a.memory[65318]=128,a.soundMasterEnabled=!0,a.initializeAudioStartState();else if(a.soundMasterEnabled&&
128>c)for(a.memory[65318]=0,a.soundMasterEnabled=!1,b=65296;65318>b;b++)a.memoryWriter[b](a,b,0)};this.memoryHighWriter[39]=this.memoryWriter[65319]=this.cartIgnoreWrite;this.memoryHighWriter[40]=this.memoryWriter[65320]=this.cartIgnoreWrite;this.memoryHighWriter[41]=this.memoryWriter[65321]=this.cartIgnoreWrite;this.memoryHighWriter[42]=this.memoryWriter[65322]=this.cartIgnoreWrite;this.memoryHighWriter[43]=this.memoryWriter[65323]=this.cartIgnoreWrite;this.memoryHighWriter[44]=this.memoryWriter[65324]=
this.cartIgnoreWrite;this.memoryHighWriter[45]=this.memoryWriter[65325]=this.cartIgnoreWrite;this.memoryHighWriter[46]=this.memoryWriter[65326]=this.cartIgnoreWrite;this.memoryHighWriter[47]=this.memoryWriter[65327]=this.cartIgnoreWrite;this.memoryHighWriter[48]=this.memoryWriter[65328]=function(a,b,c){a.channel3WriteRAM(0,c)};this.memoryHighWriter[49]=this.memoryWriter[65329]=function(a,b,c){a.channel3WriteRAM(1,c)};this.memoryHighWriter[50]=this.memoryWriter[65330]=function(a,b,c){a.channel3WriteRAM(2,
c)};this.memoryHighWriter[51]=this.memoryWriter[65331]=function(a,b,c){a.channel3WriteRAM(3,c)};this.memoryHighWriter[52]=this.memoryWriter[65332]=function(a,b,c){a.channel3WriteRAM(4,c)};this.memoryHighWriter[53]=this.memoryWriter[65333]=function(a,b,c){a.channel3WriteRAM(5,c)};this.memoryHighWriter[54]=this.memoryWriter[65334]=function(a,b,c){a.channel3WriteRAM(6,c)};this.memoryHighWriter[55]=this.memoryWriter[65335]=function(a,b,c){a.channel3WriteRAM(7,c)};this.memoryHighWriter[56]=this.memoryWriter[65336]=
function(a,b,c){a.channel3WriteRAM(8,c)};this.memoryHighWriter[57]=this.memoryWriter[65337]=function(a,b,c){a.channel3WriteRAM(9,c)};this.memoryHighWriter[58]=this.memoryWriter[65338]=function(a,b,c){a.channel3WriteRAM(10,c)};this.memoryHighWriter[59]=this.memoryWriter[65339]=function(a,b,c){a.channel3WriteRAM(11,c)};this.memoryHighWriter[60]=this.memoryWriter[65340]=function(a,b,c){a.channel3WriteRAM(12,c)};this.memoryHighWriter[61]=this.memoryWriter[65341]=function(a,b,c){a.channel3WriteRAM(13,
c)};this.memoryHighWriter[62]=this.memoryWriter[65342]=function(a,b,c){a.channel3WriteRAM(14,c)};this.memoryHighWriter[63]=this.memoryWriter[65343]=function(a,b,c){a.channel3WriteRAM(15,c)};this.memoryHighWriter[66]=this.memoryWriter[65346]=function(a,b,c){a.backgroundY!=c&&(a.midScanLineJIT(),a.backgroundY=c)};this.memoryHighWriter[67]=this.memoryWriter[65347]=function(a,b,c){a.backgroundX!=c&&(a.midScanLineJIT(),a.backgroundX=c)};this.memoryHighWriter[68]=this.memoryWriter[65348]=function(a,b,c){a.LCDisOn&&
(a.modeSTAT=2,a.midScanlineOffset=-1,a.totalLinesPassed=a.currentX=a.queuedScanLines=a.lastUnrenderedLine=a.LCDTicks=a.STATTracker=a.actualScanLine=a.memory[65348]=0)};this.memoryHighWriter[69]=this.memoryWriter[65349]=function(a,b,c){a.memory[65349]!=c&&(a.memory[65349]=c,a.LCDisOn&&a.matchLYC())};this.memoryHighWriter[74]=this.memoryWriter[65354]=function(a,b,c){a.windowY!=c&&(a.midScanLineJIT(),a.windowY=c)};this.memoryHighWriter[75]=this.memoryWriter[65355]=function(a,b,c){a.memory[65355]!=c&&
(a.midScanLineJIT(),a.memory[65355]=c,a.windowX=c-7)};this.memoryHighWriter[114]=this.memoryWriter[65394]=function(a,b,c){a.memory[65394]=c};this.memoryHighWriter[115]=this.memoryWriter[65395]=function(a,b,c){a.memory[65395]=c};this.memoryHighWriter[117]=this.memoryWriter[65397]=function(a,b,c){a.memory[65397]=c};this.memoryHighWriter[118]=this.memoryWriter[65398]=this.cartIgnoreWrite;this.memoryHighWriter[119]=this.memoryWriter[65399]=this.cartIgnoreWrite;this.memoryHighWriter[255]=this.memoryWriter[65535]=
function(a,b,c){a.interruptsEnabled=c;a.checkIRQMatching()};this.recompileModelSpecificIOWriteHandling();this.recompileBootIOWriteHandling()};
GameBoyCore.prototype.recompileModelSpecificIOWriteHandling=function(){this.cGBC?(this.memoryHighWriter[2]=this.memoryWriter[65282]=function(a,b,c){1==(c&1)?(a.memory[65282]=c&127,a.serialTimer=0==(c&2)?4096:128,a.serialShiftTimer=a.serialShiftTimerAllocated=0==(c&2)?512:16):(a.memory[65282]=c,a.serialShiftTimer=a.serialShiftTimerAllocated=a.serialTimer=0)},this.memoryHighWriter[64]=this.memoryWriter[65344]=function(a,b,c){a.memory[65344]!=c&&(a.midScanLineJIT(),b=127<c,b!=a.LCDisOn&&(a.LCDisOn=b,
a.memory[65345]&=120,a.midScanlineOffset=-1,a.totalLinesPassed=a.currentX=a.queuedScanLines=a.lastUnrenderedLine=a.STATTracker=a.LCDTicks=a.actualScanLine=a.memory[65348]=0,a.LCDisOn?(a.modeSTAT=2,a.matchLYC(),a.LCDCONTROL=a.LINECONTROL):(a.modeSTAT=0,a.LCDCONTROL=a.DISPLAYOFFCONTROL,a.DisplayShowOff()),a.interruptsRequested&=253),a.gfxWindowCHRBankPosition=64==(c&64)?1024:0,a.gfxWindowDisplay=32==(c&32),a.gfxBackgroundBankOffset=16==(c&16)?0:128,a.gfxBackgroundCHRBankPosition=8==(c&8)?1024:0,a.gfxSpriteNormalHeight=
0==(c&4),a.gfxSpriteShow=2==(c&2),a.BGPriorityEnabled=1==(c&1),a.priorityFlaggingPathRebuild(),a.memory[65344]=c)},this.memoryHighWriter[65]=this.memoryWriter[65345]=function(a,b,c){a.LYCMatchTriggerSTAT=64==(c&64);a.mode2TriggerSTAT=32==(c&32);a.mode1TriggerSTAT=16==(c&16);a.mode0TriggerSTAT=8==(c&8);a.memory[65345]=c&120},this.memoryHighWriter[70]=this.memoryWriter[65350]=function(a,b,c){a.memory[65350]=c;if(224>c){c<<=8;b=65024;var g=a.modeSTAT;a.modeSTAT=0;do{var e=a.memoryReader[c](a,c++);if(e!=
a.memory[b]){a.modeSTAT=g;a.graphicsJIT();a.modeSTAT=0;a.memory[b++]=e;break}}while(65184>++b);if(65184>b){do a.memory[b++]=a.memoryReader[c](a,c++),a.memory[b++]=a.memoryReader[c](a,c++),a.memory[b++]=a.memoryReader[c](a,c++),a.memory[b++]=a.memoryReader[c](a,c++);while(65184>b)}a.modeSTAT=g}},this.memoryHighWriter[77]=this.memoryWriter[65357]=function(a,b,c){a.memory[65357]=c&127|a.memory[65357]&128},this.memoryHighWriter[79]=this.memoryWriter[65359]=function(a,b,c){a.currVRAMBank=c&1;a.BGCHRCurrentBank=
0<a.currVRAMBank?a.BGCHRBank2:a.BGCHRBank1},this.memoryHighWriter[81]=this.memoryWriter[65361]=function(a,b,c){a.hdmaRunning||(a.memory[65361]=c)},this.memoryHighWriter[82]=this.memoryWriter[65362]=function(a,b,c){a.hdmaRunning||(a.memory[65362]=c&240)},this.memoryHighWriter[83]=this.memoryWriter[65363]=function(a,b,c){a.hdmaRunning||(a.memory[65363]=c&31)},this.memoryHighWriter[84]=this.memoryWriter[65364]=function(a,b,c){a.hdmaRunning||(a.memory[65364]=c&240)},this.memoryHighWriter[85]=this.memoryWriter[65365]=
function(a,b,c){a.hdmaRunning?0==(c&128)?(a.hdmaRunning=!1,a.memory[65365]|=128):a.memory[65365]=c&127:0==(c&128)?(a.DMAWrite((c&127)+1),a.memory[65365]=255):(a.hdmaRunning=!0,a.memory[65365]=c&127)},this.memoryHighWriter[104]=this.memoryWriter[65384]=function(a,b,c){a.memory[65385]=a.gbcBGRawPalette[c&63];a.memory[65384]=c},this.memoryHighWriter[105]=this.memoryWriter[65385]=function(a,b,c){a.updateGBCBGPalette(a.memory[65384]&63,c);127<a.memory[65384]?(b=a.memory[65384]+1&63,a.memory[65384]=b|128,
a.memory[65385]=a.gbcBGRawPalette[b]):a.memory[65385]=c},this.memoryHighWriter[106]=this.memoryWriter[65386]=function(a,b,c){a.memory[65387]=a.gbcOBJRawPalette[c&63];a.memory[65386]=c},this.memoryHighWriter[107]=this.memoryWriter[65387]=function(a,b,c){a.updateGBCOBJPalette(a.memory[65386]&63,c);127<a.memory[65386]?(b=a.memory[65386]+1&63,a.memory[65386]=b|128,a.memory[65387]=a.gbcOBJRawPalette[b]):a.memory[65387]=c},this.memoryHighWriter[112]=this.memoryWriter[65392]=function(a,b,c){b=a.memory[65361]<<
8|a.memory[65362];if(!a.hdmaRunning||53248>b||57344<=b)a.gbcRamBank=Math.max(c&7,1),a.gbcRamBankPosition=(a.gbcRamBank-1<<12)-53248,a.gbcRamBankPositionECHO=a.gbcRamBankPosition-8192;a.memory[65392]=c},this.memoryHighWriter[116]=this.memoryWriter[65396]=function(a,b,c){a.memory[65396]=c}):(this.memoryHighWriter[2]=this.memoryWriter[65282]=function(a,b,c){1==(c&1)?(a.memory[65282]=c&127,a.serialTimer=4096,a.serialShiftTimer=a.serialShiftTimerAllocated=512):(a.memory[65282]=c,a.serialShiftTimer=a.serialShiftTimerAllocated=
a.serialTimer=0)},this.memoryHighWriter[64]=this.memoryWriter[65344]=function(a,b,c){a.memory[65344]!=c&&(a.midScanLineJIT(),b=127<c,b!=a.LCDisOn&&(a.LCDisOn=b,a.memory[65345]&=120,a.midScanlineOffset=-1,a.totalLinesPassed=a.currentX=a.queuedScanLines=a.lastUnrenderedLine=a.STATTracker=a.LCDTicks=a.actualScanLine=a.memory[65348]=0,a.LCDisOn?(a.modeSTAT=2,a.matchLYC(),a.LCDCONTROL=a.LINECONTROL):(a.modeSTAT=0,a.LCDCONTROL=a.DISPLAYOFFCONTROL,a.DisplayShowOff()),a.interruptsRequested&=253),a.gfxWindowCHRBankPosition=
64==(c&64)?1024:0,a.gfxWindowDisplay=32==(c&32),a.gfxBackgroundBankOffset=16==(c&16)?0:128,a.gfxBackgroundCHRBankPosition=8==(c&8)?1024:0,a.gfxSpriteNormalHeight=0==(c&4),a.gfxSpriteShow=2==(c&2),a.bgEnabled=1==(c&1),a.memory[65344]=c)},this.memoryHighWriter[65]=this.memoryWriter[65345]=function(a,b,c){a.LYCMatchTriggerSTAT=64==(c&64);a.mode2TriggerSTAT=32==(c&32);a.mode1TriggerSTAT=16==(c&16);a.mode0TriggerSTAT=8==(c&8);a.memory[65345]=c&120;(!a.usedBootROM||!a.usedGBCBootROM)&&a.LCDisOn&&2>a.modeSTAT&&
(a.interruptsRequested|=2,a.checkIRQMatching())},this.memoryHighWriter[70]=this.memoryWriter[65350]=function(a,b,c){a.memory[65350]=c;if(127<c&&224>c){c<<=8;b=65024;var g=a.modeSTAT;a.modeSTAT=0;do{var e=a.memoryReader[c](a,c++);if(e!=a.memory[b]){a.modeSTAT=g;a.graphicsJIT();a.modeSTAT=0;a.memory[b++]=e;break}}while(65184>++b);if(65184>b){do a.memory[b++]=a.memoryReader[c](a,c++),a.memory[b++]=a.memoryReader[c](a,c++),a.memory[b++]=a.memoryReader[c](a,c++),a.memory[b++]=a.memoryReader[c](a,c++);
while(65184>b)}a.modeSTAT=g}},this.memoryHighWriter[71]=this.memoryWriter[65351]=function(a,b,c){a.memory[65351]!=c&&(a.midScanLineJIT(),a.updateGBBGPalette(c),a.memory[65351]=c)},this.memoryHighWriter[72]=this.memoryWriter[65352]=function(a,b,c){a.memory[65352]!=c&&(a.midScanLineJIT(),a.updateGBOBJPalette(0,c),a.memory[65352]=c)},this.memoryHighWriter[73]=this.memoryWriter[65353]=function(a,b,c){a.memory[65353]!=c&&(a.midScanLineJIT(),a.updateGBOBJPalette(4,c),a.memory[65353]=c)},this.memoryHighWriter[77]=
this.memoryWriter[65357]=function(a,b,c){a.memory[65357]=c},this.memoryHighWriter[79]=this.memoryWriter[65359]=this.cartIgnoreWrite,this.memoryHighWriter[85]=this.memoryWriter[65365]=this.cartIgnoreWrite,this.memoryHighWriter[104]=this.memoryWriter[65384]=this.cartIgnoreWrite,this.memoryHighWriter[105]=this.memoryWriter[65385]=this.cartIgnoreWrite,this.memoryHighWriter[106]=this.memoryWriter[65386]=this.cartIgnoreWrite,this.memoryHighWriter[107]=this.memoryWriter[65387]=this.cartIgnoreWrite,this.memoryHighWriter[108]=
this.memoryWriter[65388]=this.cartIgnoreWrite,this.memoryHighWriter[112]=this.memoryWriter[65392]=this.cartIgnoreWrite,this.memoryHighWriter[116]=this.memoryWriter[65396]=this.cartIgnoreWrite)};
GameBoyCore.prototype.recompileBootIOWriteHandling=function(){this.inBootstrap?(this.memoryHighWriter[80]=this.memoryWriter[65360]=function(a,b,c){cout("Boot ROM reads blocked: Bootstrap process has ended.",0);a.inBootstrap=!1;a.disableBootROM();a.memory[65360]=c},this.cGBC&&(this.memoryHighWriter[108]=this.memoryWriter[65388]=function(a,b,c){a.inBootstrap&&(a.cGBC=0==(c&1),"Game and Watch 50"==a.name+a.gameCode+a.ROM[323]&&(a.cGBC=!0,cout("Created a boot exception for Game and Watch Gallery 2 (GBC ID byte is wrong on the cartridge).",
1)),cout("Booted to GBC Mode: "+a.cGBC,0));a.memory[65388]=c})):this.memoryHighWriter[80]=this.memoryWriter[65360]=this.cartIgnoreWrite};
GameBoyCore.prototype.toTypedArray=function(a,b){try{if(settings[5])return a;if(!a||!a.length)return[];var c=a.length;switch(b){case "uint8":var g=new Uint8Array(c);break;case "int8":g=new Int8Array(c);break;case "int32":g=new Int32Array(c);break;case "float32":g=new Float32Array(c)}for(b=0;b<c;b++)g[b]=a[b];return g}catch(e){return cout("Could not convert an array to a typed array: "+e.message,1),a}};
GameBoyCore.prototype.fromTypedArray=function(a){try{if(!a||!a.length)return[];for(var b=[],c=0;c<a.length;++c)b[c]=a[c];return b}catch(g){return cout("Conversion from a typed array failed: "+g.message,1),a}};
GameBoyCore.prototype.getTypedArray=function(a,b,c){var g;try{if(settings[5])throw Error("Settings forced typed arrays to be disabled.");switch(c){case "int8":var e=new Int8Array(a);break;case "uint8":e=new Uint8Array(a);break;case "int32":e=new Int32Array(a);break;case "float32":e=new Float32Array(a)}if(0!=b)for(g=0;g<a;)e[g++]=b}catch(d){for(cout("Could not convert an array to a typed array: "+d.message,1),e=[],g=0;g<a;)e[g++]=b}return e};var gameboy=null,gbRunInterval=null,settings=[!0,!0,!1,1,!0,!1,8,10,20,!1,!1,!1,!1,!0,[!0,!0,!0,!0]];function cout(a){console.info(a)}function start(a,b){clearLastEmulation();autoSave();gameboy=new GameBoyCore(a,b);gameboy.openMBC=openSRAM;gameboy.openRTC=openRTC;gameboy.start();run()}
function run(){GameBoyEmulatorInitialized()?GameBoyEmulatorPlaying()?cout("The GameBoy core is already running.",1):(gameboy.stopEmulator&=1,cout("Starting the iterator.",0),gameboy.firstIteration=(new Date).getTime(),gameboy.iterations=0,gbRunInterval=setInterval(function(){document.hidden||document.msHidden||document.mozHidden||document.webkitHidden||gameboy.run()},settings[6])):cout("GameBoy core cannot run while it has not been initialized.",1)}
function pause(){GameBoyEmulatorInitialized()?GameBoyEmulatorPlaying()?(autoSave(),clearLastEmulation()):cout("GameBoy core has already been paused.",1):cout("GameBoy core cannot be paused while it has not been initialized.",1)}function clearLastEmulation(){GameBoyEmulatorInitialized()&&GameBoyEmulatorPlaying()?(clearInterval(gbRunInterval),gameboy.stopEmulator|=2,cout("The previous emulation has been cleared.",0)):cout("No previous emulation was found to be cleared.",0)}
function save(){if(GameBoyEmulatorInitialized()){for(var a=0;null!=findValue("FREEZE_"+gameboy.name+"_"+a);)a++;saveState("FREEZE_"+gameboy.name+"_"+a)}else cout("GameBoy core cannot be saved while it has not been initialized.",1)}
function saveSRAM(){if(GameBoyEmulatorInitialized()){if(gameboy.cBATT)try{var a=gameboy.saveSRAMState();0<a.length?(cout("Saving the SRAM...",0),null!=findValue("SRAM_"+gameboy.name)&&(cout("Deleting the old SRAM save due to outdated format.",0),deleteValue("SRAM_"+gameboy.name)),setValue("B64_SRAM_"+gameboy.name,arrayToBase64(a))):cout("SRAM could not be saved because it was empty.",1)}catch(b){cout('Could not save the current emulation state("'+b.message+'").',2)}else cout("Cannot save a game that does not have battery backed SRAM specified.",
1);saveRTC()}else cout("GameBoy core cannot be saved while it has not been initialized.",1)}function saveRTC(){if(GameBoyEmulatorInitialized()){if(gameboy.cTIMER)try{cout("Saving the RTC...",0),setValue("RTC_"+gameboy.name,gameboy.saveRTCState())}catch(a){cout('Could not save the RTC of the current emulation state("'+a.message+'").',2)}}else cout("GameBoy core cannot be saved while it has not been initialized.",1)}
function autoSave(){GameBoyEmulatorInitialized()&&(cout("Automatically saving the SRAM.",0),saveSRAM(),saveRTC())}
function openSRAM(a){try{if(null!=findValue("B64_SRAM_"+a))return cout("Found a previous SRAM state (Will attempt to load).",0),base64ToArray(findValue("B64_SRAM_"+a));if(null!=findValue("SRAM_"+a))return cout("Found a previous SRAM state (Will attempt to load).",0),findValue("SRAM_"+a);cout("Could not find any previous SRAM copy for the current ROM.",0)}catch(b){cout("Could not open the  SRAM of the saved emulation state.",2)}return[]}
function openRTC(a){try{if(null!=findValue("RTC_"+a))return cout("Found a previous RTC state (Will attempt to load).",0),findValue("RTC_"+a);cout("Could not find any previous RTC copy for the current ROM.",0)}catch(b){cout("Could not open the RTC data of the saved emulation state.",2)}return[]}
function saveState(a){if(GameBoyEmulatorInitialized())try{setValue(a,gameboy.saveState()),cout("Saved the current state as: "+a,0)}catch(b){cout('Could not save the current emulation state("'+b.message+'").',2)}else cout("GameBoy core cannot be saved while it has not been initialized.",1)}
function openState(a,b){try{if(null!=findValue(a))try{clearLastEmulation(),cout("Attempting to run a saved emulation state.",0),gameboy=new GameBoyCore(b,""),gameboy.savedStateFileName=a,gameboy.returnFromState(findValue(a)),run()}catch(c){alert(c.message+" file: "+c.fileName+" line: "+c.lineNumber)}else cout("Could not find the save state "+a+'".',2)}catch(c){cout("Could not open the saved emulation state.",2)}}
function import_save(a){if((a=decodeBlob(a))&&a.blobs)if(0<a.blobs.length)for(var b=0;b<a.blobs.length;++b)cout('Importing blob "'+a.blobs[b].blobID+'"',0),a.blobs[b].blobContent?"SRAM_"==a.blobs[b].blobID.substring(0,5)?setValue("B64_"+a.blobs[b].blobID,base64(a.blobs[b].blobContent)):setValue(a.blobs[b].blobID,JSON.parse(a.blobs[b].blobContent)):a.blobs[b].blobID?cout('Save file imported had blob "'+a.blobs[b].blobID+'" with no blob data interpretable.',2):cout("Blob chunk information missing completely.",
2);else cout("Could not decode the imported file.",2);else cout("Could not decode the imported file.",2)}function generateBlob(a,b){var c="EMULATOR_DATA";c+=to_little_endian_dword(c.length+4+8+(1+a.length+(4+b.length)));c+=to_byte(7);c=c+"GameBoy"+to_byte(a.length);c=c+a+to_little_endian_dword(b.length);return c+=b}
function generateMultiBlob(a){var b=25,c=to_byte(7);c+="GameBoy";for(var g,e,d=0;d<a.length;++d)g=a[d][0],e=a[d][1],c+=to_byte(g.length),c+=g,c+=to_little_endian_dword(e.length),c+=e,b+=1+g.length+4+e.length;return c="EMULATOR_DATA"+to_little_endian_dword(b)+c}
function decodeBlob(a){var b=a.length;var c={consoleID:null},g=-1;c.blobs=[];if(17<b&&"EMULATOR_DATA"==a.substring(0,13)){b=Math.min((a.charCodeAt(16)&255)<<24|(a.charCodeAt(15)&255)<<16|(a.charCodeAt(14)&255)<<8|a.charCodeAt(13)&255,b);var e=a.charCodeAt(17)&255;if(b>17+e)for(c.consoleID=a.substring(18,18+e),e=18+e;e<b;){var d=a.charCodeAt(e++)&255;if(e+d<b)if(c.blobs[++g]={},c.blobs[g].blobID=a.substring(e,e+d),e+=d,e+4<b)if(d=(a.charCodeAt(e+3)&255)<<24|(a.charCodeAt(e+2)&255)<<16|(a.charCodeAt(e+
1)&255)<<8|a.charCodeAt(e)&255,e+=4,e+d<=b)c.blobs[g].blobContent=a.substring(e,e+d),e+=d;else{cout("Blob length check failed, blob determined to be incomplete.",2);break}else{cout("Blob was incomplete, bailing out.",2);break}else{cout("Blob was incomplete, bailing out.",2);break}}}return c}function matchKey(a){for(var b="right left up down a b select start".split(" "),c=0;c<b.length;c++)if(b[c]==a)return c;return-1}
function GameBoyEmulatorInitialized(){return"object"==typeof gameboy&&null!=gameboy}function GameBoyEmulatorPlaying(){return 0==(gameboy.stopEmulator&2)}function GameBoyKeyDown(a){GameBoyEmulatorInitialized()&&GameBoyEmulatorPlaying()&&GameBoyJoyPadEvent(matchKey(a),!0)}function GameBoyJoyPadEvent(a,b){GameBoyEmulatorInitialized()&&GameBoyEmulatorPlaying()&&0<=a&&8>a&&gameboy.JoyPadEvent(a,b)}
function GameBoyKeyUp(a){GameBoyEmulatorInitialized()&&GameBoyEmulatorPlaying()&&GameBoyJoyPadEvent(matchKey(a),!1)}function GameBoyGyroSignalHandler(a){if(GameBoyEmulatorInitialized()&&GameBoyEmulatorPlaying()){a.gamma||a.beta?gameboy.GyroEvent(a.gamma*Math.PI/180,a.beta*Math.PI/180):gameboy.GyroEvent(a.x,a.y);try{a.preventDefault()}catch(b){}}}
function initNewCanvas(){GameBoyEmulatorInitialized()&&(gameboy.canvas.width=gameboy.canvas.clientWidth,gameboy.canvas.height=gameboy.canvas.clientHeight)}function initNewCanvasSize(){GameBoyEmulatorInitialized()&&(settings[12]?gameboy.onscreenWidth==gameboy.canvas.clientWidth&&gameboy.onscreenHeight==gameboy.canvas.clientHeight||gameboy.initLCD():160==gameboy.onscreenWidth&&144==gameboy.onscreenHeight||gameboy.initLCD())};this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=l[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,e){var g=d,l=e[a];l&&"object"===typeof l&&"function"===typeof l.toJSON&&(l=l.toJSON(a));"function"===typeof m&&(l=m.call(e,a,l));switch(typeof l){case "string":return b(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";
d+=f;var n=[];if("[object Array]"===Object.prototype.toString.apply(l)){var r=l.length;for(a=0;a<r;a+=1)n[a]=c(a,l)||"null";e=0===n.length?"[]":d?"[\n"+d+n.join(",\n"+d)+"\n"+g+"]":"["+n.join(",")+"]";d=g;return e}if(m&&"object"===typeof m)for(r=m.length,a=0;a<r;a+=1){var x=m[a];"string"===typeof x&&(e=c(x,l))&&n.push(b(x)+(d?": ":":")+e)}else for(x in l)Object.hasOwnProperty.call(l,x)&&(e=c(x,l))&&n.push(b(x)+(d?": ":":")+e);e=0===n.length?"{}":d?"{\n"+d+n.join(",\n"+d)+"\n"+g+"}":"{"+n.join(",")+
"}";d=g;return e}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,f,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,e){var g;f=d="";if("number"===typeof e)for(g=0;g<e;g+=1)f+=" ";else"string"===typeof e&&(f=e);if((m=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f=a[d];if(f&&"object"===typeof f)for(e in f)if(Object.hasOwnProperty.call(f,e)){var g=c(f,e);void 0!==g?f[e]=g:delete f[e]}return b.call(a,d,f)}a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a=eval("("+a+")"),"function"===typeof b?c({"":a},""):a;throw new SyntaxError("JSON.parse");})})();/*
 Masonry PACKAGED v3.2.2
 Cascading grid layout library
 http://masonry.desandro.com
 MIT License
 by David DeSandro
*/
!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(d){if("string"==typeof d){for(var e=g.call(arguments,1),f=0,m=this.length;m>f;f++){var n=a.data(this[f],b);if(n)if(a.isFunction(n[d])&&"_"!==d.charAt(0)){if(n=n[d].apply(n,e),void 0!==n)return n}else l("no such method '"+d+"' for "+b+" instance");else l("cannot call methods on "+b+" prior to initialization; attempted to call '"+
d+"'")}return this}return this.each(function(){var e=a.data(this,b);e?(e.option(d),e._init()):(e=new c(this,d),a.data(this,b,e))})}}if(a){var l="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b);e(a,b)},a.bridget}}var g=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c("object"==typeof exports?require("jquery"):a.jQuery)}(window);
(function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,g=function(){};c.addEventListener?g=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(g=function(a,c,e){a[c+e]=e.handleEvent?function(){var c=b(a);e.handleEvent.call(e,c)}:function(){var c=b(a);e.call(a,c)};a.attachEvent("on"+c,a[c+e])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+
b,a[b+c]);try{delete a[b+c]}catch(m){a[b+c]=void 0}});c={bind:g,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",c):"object"==typeof exports?module.exports=c:a.eventie=c})(this);
(function(a){function b(a){"function"==typeof a&&(b.isReady?a():f.push(a))}function c(a){a="readystatechange"===a.type&&"complete"!==d.readyState;b.isReady||a||g()}function g(){b.isReady=!0;for(var a=0,c=f.length;c>a;a++)(0,f[a])()}function e(e){return"complete"===d.readyState?g():(e.bind(d,"DOMContentLoaded",c),e.bind(d,"readystatechange",c),e.bind(a,"load",c)),b}var d=a.document,f=[];b.isReady=!1;"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==
typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)})(window);
(function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var g=a.prototype,e=this,d=e.EventEmitter;g.getListeners=function(a){var b,c=this._getEvents();if(a instanceof RegExp){var d={};for(b in c)c.hasOwnProperty(b)&&a.test(b)&&(d[b]=c[b])}else d=c[a]||(c[a]=[]);return d};g.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c};g.getListenersAsObject=
function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c};g.addListener=function(a,c){var d;a=this.getListenersAsObject(a);var e="object"==typeof c;for(d in a)a.hasOwnProperty(d)&&-1===b(a[d],c)&&a[d].push(e?c:{listener:c,once:!1});return this};g.on=c("addListener");g.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};g.once=c("addOnceListener");g.defineEvent=function(a){return this.getListeners(a),this};g.defineEvents=function(a){for(var b=
0;b<a.length;b+=1)this.defineEvent(a[b]);return this};g.removeListener=function(a,c){var d,e;a=this.getListenersAsObject(a);for(e in a)a.hasOwnProperty(e)&&(d=b(a[e],c),-1!==d&&a[e].splice(d,1));return this};g.off=c("removeListener");g.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};g.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};g.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;
if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):a.call(this,d,e));return this};g.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this};g.removeAllListeners=c("removeEvent");g.emitEvent=function(a,b){var c,d,e=this.getListenersAsObject(a);
for(d in e)if(e.hasOwnProperty(d))for(c=e[d].length;c--;){var f=e[d][c];!0===f.once&&this.removeListener(a,f.listener);var g=f.listener.apply(this,b||[]);g===this._getOnceReturnValue()&&this.removeListener(a,f.listener)}return this};g.trigger=c("emitEvent");g.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};g.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};g._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?
this._onceReturnValue:!0};g._getEvents=function(){return this._events||(this._events={})};a.noConflict=function(){return e.EventEmitter=d,a};"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}).call(this);
(function(a){function b(a){if(a){if("string"==typeof g[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,l=c.length;l>e;e++)if(b=c[e]+a,"string"==typeof g[b])return b}}var c=["Webkit","Moz","ms","Ms","O"],g=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b})(window);
(function(a){function b(a){var b=parseFloat(a);return-1===a.indexOf("%")&&!isNaN(b)&&b}function c(){}function g(c){function f(){if(!t){t=!0;var d=a.getComputedStyle;if(g=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){b=a(b);return b||e("Style returned "+b+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),b}}(),n=c("boxSizing")){var f=document.createElement("div");f.style.width="200px";f.style.padding=
"1px 2px 3px 4px";f.style.borderStyle="solid";f.style.borderWidth="1px 2px 3px 4px";f.style[n]="border-box";var l=document.body||document.documentElement;l.appendChild(f);var m=g(f);r=200===b(m.width);l.removeChild(f)}}}var g,n,r,t=!1;return function(c){if(f(),"string"==typeof c&&(c=document.querySelector(c)),c&&"object"==typeof c&&c.nodeType){var e=g(c);if("none"===e.display){var l={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};e=0;for(var m=d.length;m>e;e++)l[d[e]]=0;return l}l=
{};l.width=c.offsetWidth;l.height=c.offsetHeight;m=l.isBorderBox=!(!n||!e[n]||"border-box"!==e[n]);for(var t=0,v=d.length;v>t;t++){var O=d[t],q=e[O];var R=c,A=q;if(a.getComputedStyle||-1===A.indexOf("%"))q=A;else{q=R.style;var z=q.left,F=R.runtimeStyle,D=F&&F.left;q=(D&&(F.left=R.currentStyle.left),q.left=A,A=q.pixelLeft,q.left=z,D&&(F.left=D),A)}R=parseFloat(q);l[O]=isNaN(R)?0:R}c=l.paddingLeft+l.paddingRight;t=l.paddingTop+l.paddingBottom;v=l.marginLeft+l.marginRight;O=l.marginTop+l.marginBottom;
R=l.borderLeftWidth+l.borderRightWidth;A=l.borderTopWidth+l.borderBottomWidth;m=m&&r;q=b(e.width);!1!==q&&(l.width=q+(m?0:c+R));e=b(e.height);return!1!==e&&(l.height=e+(m?0:t+A)),l.innerWidth=l.width-(c+R),l.innerHeight=l.height-(t+A),l.outerWidth=l.width+v,l.outerHeight=l.height+O,l}}}var e="undefined"==typeof console?c:function(a){console.error(a)},d="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");
"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],g):"object"==typeof exports?module.exports=g(require("desandro-get-style-property")):a.getSize=g(a.getStyleProperty)})(window);
(function(a){function b(a,b){return a[e](b)}function c(a,b){a.parentNode||document.createDocumentFragment().appendChild(a);b=a.parentNode.querySelectorAll(b);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return!0;return!1}function g(a,c){a.parentNode||document.createDocumentFragment().appendChild(a);return b(a,c)}var e=function(){if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var e=b[c]+"MatchesSelector";if(a[e])return e}}();if(e){var d=document.createElement("div");
var f=b(d,"div")?b:g}else f=c;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f})(Element.prototype);
(function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function g(a,e,g){function f(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var l=g("transition"),m=g("transform"),v=l&&m,y=!!g("perspective"),P={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],x=["transform","transition","transitionDuration","transitionProperty"],
J=function(){for(var a={},b=0,c=x.length;c>b;b++){var d=x[b],e=g(d);e&&e!==d&&(a[d]=e)}return a}();b(f.prototype,a.prototype);f.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};f.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)};f.prototype.getSize=function(){this.size=e(this.element)};f.prototype.css=function(a){var b=this.element.style,c;for(c in a)b[J[c]||c]=a[c]};f.prototype.getPosition=function(){var a=d(this.element),
b=this.layout.options,c=b.isOriginLeft;b=b.isOriginTop;var e=parseInt(a[c?"left":"right"],10);a=parseInt(a[b?"top":"bottom"],10);e=isNaN(e)?0:e;a=isNaN(a)?0:a;var f=this.layout.size;e-=c?f.paddingLeft:f.paddingRight;a-=b?f.paddingTop:f.paddingBottom;this.position.x=e;this.position.y=a};f.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left="");
b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top="");this.css(c);this.emitEvent("layout",[this])};var da=y?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};f.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10);e=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),e&&!this.isTransitioning)return void this.layoutPosition();
a-=c;b-=d;d={};c=this.layout.options;a=c.isOriginLeft?a:-a;b=c.isOriginTop?b:-b;d.transform=da(a,b);this.transition({to:d,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})};f.prototype.goTo=function(a,b){this.setPosition(a,b);this.layoutPosition()};f.prototype.moveTo=v?f.prototype._transitionTo:f.prototype.goTo;f.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10);this.position.y=parseInt(b,10)};f.prototype._nonTransition=function(a){this.css(a.to);a.isCleaning&&this._removeStyles(a.to);
for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)};f.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn,c;for(c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);a.from&&this.css(a.from);this.enableTransition(a.to);this.css(a.to);this.isTransitioning=!0};var O=m&&c(m)+",opacity";f.prototype.enableTransition=function(){this.isTransitioning||
(this.css({transitionProperty:O,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(P,this,!1))};f.prototype.transition=f.prototype[l?"_transition":"_nonTransition"];f.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)};f.prototype.onotransitionend=function(a){this.ontransitionend(a)};var q={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};f.prototype.ontransitionend=function(a){if(a.target===this.element){var b=
this._transn,c=q[a.propertyName]||a.propertyName;delete b.ingProperties[c];a:{var d=b.ingProperties;for(var e in d){d=!1;break a}d=!0}if(d&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd)b.onEnd[c].call(this),delete b.onEnd[c];this.emitEvent("transitionEnd",[this])}};f.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(P,this,!1);this.isTransitioning=!1};f.prototype._removeStyles=function(a){var b=
{},c;for(c in a)b[c]="";this.css(b)};var R={transitionProperty:"",transitionDuration:""};return f.prototype.removeTransitionStyles=function(){this.css(R)},f.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])},f.prototype.remove=function(){if(!l||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0});this.hide()},f.prototype.reveal=function(){delete this.isHidden;
this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},f.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},f.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},f}var e=a.getComputedStyle,
d=e?function(a){return e(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],g):"object"==typeof exports?module.exports=g(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(a.Outlayer={},a.Outlayer.Item=g(a.EventEmitter,a.getSize,a.getStyleProperty))})(window);
(function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){var b=[];if("[object Array]"===r.call(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function g(a,b){a=v(b,a);-1!==a&&b.splice(a,1)}function e(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function d(d,r,x,v,da,O){function q(a,c){if("string"==typeof a&&(a=f.querySelector(a)),!a||!t(a))return void(l&&l.error("Bad "+this.constructor.namespace+
" element: "+a));this.element=a;this.options=b({},this.constructor.defaults);this.option(c);a=++y;this.element.outlayerGUID=a;A[a]=this;this._create();this.options.isInitLayout&&this.layout()}var y=0,A={};return q.namespace="outlayer",q.Item=O,q.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},
b(q.prototype,x.prototype),q.prototype.option=function(a){b(this.options,a)},q.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);b(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},q.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},q.prototype._itemize=function(a){a=this._filterFindItemElements(a);for(var b=this.constructor.Item,c=[],d=0,e=a.length;e>d;d++){var f=new b(a[d],this);
c.push(f)}return c},q.prototype._filterFindItemElements=function(a){a=c(a);for(var b=this.options.itemSelector,d=[],e=0,f=a.length;f>e;e++){var g=a[e];if(t(g))if(b){da(g,b)&&d.push(g);g=g.querySelectorAll(b);for(var l=0,m=g.length;m>l;l++)d.push(g[l])}else d.push(g)}return d},q.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},q.prototype.layout=function(){this._resetLayout();this._manageStamps();this.layoutItems(this.items,void 0!==
this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited);this._isLayoutInited=!0},q.prototype._init=q.prototype.layout,q.prototype._resetLayout=function(){this.getSize()},q.prototype.getSize=function(){this.size=v(this.element)},q.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):t(d)&&(c=d),this[a]=c?v(c)[b]:d):this[a]=0},q.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a);this._layoutItems(a,
b);this._postLayout()},q.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},q.prototype._layoutItems=function(a,b){function c(){d.emitEvent("layoutComplete",[d,a])}var d=this;if(!a||!a.length)return void c();this._itemsOn(a,"layout",c);for(var e=[],f=0,g=a.length;g>f;f++){var l=a[f],m=this._getItemLayoutPosition(l);m.item=l;m.isInstant=b||l.isLayoutInstant;e.push(m)}this._processLayoutQueue(e)},q.prototype._getItemLayoutPosition=
function(){return{x:0,y:0}},q.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},q.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},q.prototype._postLayout=function(){this.resizeContainer()},q.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},q.prototype._getContainerSize=
n,q.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth);a=Math.max(a,0);this.element.style[b?"width":"height"]=a+"px"}},q.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,l=0,m=a.length;m>l;l++)a[l].on(b,d)},q.prototype.ignore=function(a){(a=this.getItem(a))&&(a.isIgnored=
!0)},q.prototype.unignore=function(a){(a=this.getItem(a))&&delete a.isIgnored},q.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++)this.ignore(a[b])}},q.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];g(d,this.stamps);this.unignore(d)}},q.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),c(a)):void 0},q.prototype._manageStamps=function(){if(this.stamps&&
this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++)this._manageStamp(this.stamps[a])}},q.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},q.prototype._manageStamp=n,q.prototype._getElementOffset=function(a){var b=
a.getBoundingClientRect(),c=this._boundingRect;a=v(a);return{left:b.left-c.left-a.marginLeft,top:b.top-c.top-a.marginTop,right:c.right-b.right-a.marginRight,bottom:c.bottom-b.bottom-a.marginBottom}},q.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},q.prototype.bindResize=function(){this.isResizeBound||(d.bind(a,"resize",this),this.isResizeBound=!0)},q.prototype.unbindResize=function(){this.isResizeBound&&d.unbind(a,"resize",this);this.isResizeBound=!1},q.prototype.onresize=
function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var a=this;this.resizeTimeout=setTimeout(function(){a.resize();delete a.resizeTimeout},100)},q.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},q.prototype.needsResizeLayout=function(){var a=v(this.element);return this.size&&a&&a.innerWidth!==this.size.innerWidth},q.prototype.addItems=function(a){a=this._itemize(a);return a.length&&(this.items=this.items.concat(a)),a},q.prototype.appended=function(a){a=
this.addItems(a);a.length&&(this.layoutItems(a,!0),this.reveal(a))},q.prototype.prepended=function(a){a=this._itemize(a);if(a.length){var b=this.items.slice(0);this.items=a.concat(b);this._resetLayout();this._manageStamps();this.layoutItems(a,!0);this.reveal(a);this.layoutItems(b)}},q.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++)a[c].reveal()},q.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++)a[c].hide()},q.prototype.getItem=function(a){for(var b=0,
c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},q.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=this.getItem(a[c]);e&&b.push(e)}return b}},q.prototype.remove=function(a){a=c(a);var b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});a=0;for(var d=b.length;d>a;a++){var e=b[a];e.remove();g(e,this.items)}}},q.prototype.destroy=function(){var a=this.element.style;a.height=
"";a.position="";a.width="";a=0;for(var b=this.items.length;b>a;a++)this.items[a].destroy();this.unbindResize();delete A[this.element.outlayerGUID];delete this.element.outlayerGUID;m&&m.removeData(this.element,this.constructor.namespace)},q.data=function(a){return(a=a&&a.outlayerGUID)&&A[a]},q.create=function(a,c){function d(){q.apply(this,arguments)}return Object.create?d.prototype=Object.create(q.prototype):b(d.prototype,q.prototype),d.prototype.constructor=d,d.defaults=b({},q.defaults),b(d.defaults,
c),d.prototype.settings={},d.namespace=a,d.data=q.data,d.Item=function(){O.apply(this,arguments)},d.Item.prototype=new O,r(function(){var b=e(a),c=f.querySelectorAll(".js-"+b);b="data-"+b+"-options";for(var g=0,n=c.length;n>g;g++){var r=c[g],q=r.getAttribute(b);try{var t=q&&JSON.parse(q)}catch(K){l&&l.error("Error parsing "+b+" on "+r.nodeName.toLowerCase()+(r.id?"#"+r.id:"")+": "+K);continue}q=new d(r,t);m&&m.data(r,a,q)}}),m&&m.bridget&&m.bridget(a,d),d},q.Item=O,q}var f=a.document,l=a.console,
m=a.jQuery,n=function(){},r=Object.prototype.toString,t="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},v=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer","eventie/eventie doc-ready/doc-ready eventEmitter/EventEmitter get-size/get-size matches-selector/matches-selector ./item".split(" "),
d):"object"==typeof exports?module.exports=d(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):a.Outlayer=d(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)})(window);
(function(a){function b(a,b){a=a.create("masonry");return a.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},a.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0];this.columnWidth=(a=a&&a.element)&&b(a).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;
this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)},a.prototype.getContainerWidth=function(){var a=b(this.options.isFitWidth?this.element.parentNode:this.element);this.containerWidth=a&&a.innerWidth},a.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth;b=Math[b&&1>b?"round":"ceil"](a.size.outerWidth/this.columnWidth);b=Math.min(b,this.cols);var d=this._getColGroup(b),e=Math.min.apply(Math,d);b=c(d,
e);var g={x:this.columnWidth*b,y:e};a=e+a.size.outerHeight;d=this.cols+1-d.length;for(e=0;d>e;e++)this.colYs[b+e]=a;return g},a.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},a.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a);a=this.options.isOriginLeft?d.left:d.right;var e=a+c.outerWidth,g=Math.floor(a/this.columnWidth);g=Math.max(0,g);a=Math.floor(e/
this.columnWidth);a-=e%this.columnWidth?0:1;a=Math.min(this.cols-1,a);c=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight;for(d=g;a>=d;d++)this.colYs[d]=Math.max(c,this.colYs[d])},a.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},a.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-
this.gutter},a.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},a}var c=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,e=a.length;e>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],b):"object"==typeof exports?module.exports=b(require("outlayer"),require("get-size")):a.Masonry=b(a.Outlayer,a.getSize)})(window);function mr_parallax(){function a(){var a,b=0;return d()?(b=jQuery(".viu").find("nav:first").outerHeight(!0),a=jQuery(".viu").find("nav:first").css("position"),("absolute"===a||"fixed"===a)&&(b=0)):b=jQuery(document).find("nav:first").outerHeight(!0),b}function b(){if(F){for(var a=f.length,e=c();a--;){var g=f[a],D=e,G=n,J=r;d()?D+t-v>g.elemTop&&D-v<g.elemBottom&&(g.isFirstSection?g.imageHolder.style[m]=G+D/2+J:g.imageHolder.style[m]=G+(D-g.elemTop-v)/2+J):D+t>g.elemTop&&D<g.elemBottom&&(g.isFirstSection?
g.imageHolder.style[m]=G+D/2+J:g.imageHolder.style[m]=G+(D+t-g.elemTop)/2+J)}F=!1}y&&(a=A,e=-x,D=P,G=D-1,g=(G/=R,D/=R,G--,D--,O*(D*D*D*D*D+1)+0-(O*(G*G*G*G*G+1)+0)),A=a+e*g,(A>q||-q>A)&&(z.scrollBy(0,A),A=0),P++,P>R&&(P=0,y=!1,x=0,A=0));l(b)}function c(){return z!=window?z.scrollTop:0===document.documentElement.scrollTop?document.body.scrollTop:document.documentElement.scrollTop}function g(){F=!0}function e(a){!0===D.mr_scrollAssist&&(a.preventDefault&&a.preventDefault(),x=a.notRealWheel?-a.deltaY/
4:1==a.deltaMode?-a.deltaY/3:100===Math.abs(a.deltaY)?-a.deltaY/120:-a.deltaY/40,x=-J>x?-J:x,x=x>J?J:x,y=!0,P=da)}function d(){return"undefined"==typeof window.mr_variant?!1:!0}var f,l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,m=function(a){for(var b=0;b<a.length;b++)if("undefined"!=typeof document.body.style[a[b]])return a[b];return null}(["transform","msTransform","webkitTransform","mozTransform","oTransform"]),
n="translate3d(0,",r="px,0)",t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=0,y=!1,P=0,x=0,J=2,da=4,O=300,q=1,R=30,A=0,z=window,F=(d(),!1),D=this;this.mr_scrollAssist=$("body").hasClass("scroll-assist")?!0:!1;jQuery(document).ready(function(){D.documentReady()});jQuery(window).load(function(){D.windowLoad()});this.getScrollingState=function(){return 0<P?!0:!1};this.documentReady=function(a){t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);jQuery("body").hasClass("parallax-2d")&&
(n="translate(0,",r="px)");/Android|iPad|iPhone|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)?jQuery(".parallax").removeClass("parallax"):l&&(D.profileParallaxElements(),D.setupParallax());var b={};return a&&"[object Function]"===b.toString.call(a)?void a():void 0};this.windowLoad=function(){t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);v=a();window.mr_parallax.profileParallaxElements()};this.setupParallax=function(){d()&&(z=jQuery(".viu").get(0),
"undefined"!=typeof z&&(z.scrollBy=function(a,b){this.scrollTop+=b;this.scrollLeft+=a}));"undefined"!=typeof z&&(z.addEventListener("scroll",g,!1),window.addWheelListener(z,e,!1),window.addEventListener("resize",function(){t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);v=a();D.profileParallaxElements()},!1),b())};this.profileParallaxElements=function(){f=[];v=a();var b=d(),e=".parallax > .background-image-holder, .parallax ul.slides > li > .background-image-holder";b&&(e=
".viu .parallax > .background-image-holder, .viu .parallax ul.slides > li > .background-image-holder");jQuery(e).each(function(a){a=jQuery(this).closest(".parallax");var d=b?a.position().top:a.offset().top;f.push({section:a.get(0),outerHeight:a.outerHeight(),elemTop:d,elemBottom:d+a.outerHeight(),isFirstSection:a.is(":nth-of-type(1)")?!0:!1,imageHolder:jQuery(this).get(0)});b?b&&(a.is(":nth-of-type(1)")?D.mr_setTranslate3DTransform(jQuery(this).get(0),0===c()?0:c()/2):D.mr_setTranslate3DTransform(jQuery(this).get(0),
(c()-d-v)/2)):a.is(":nth-of-type(1)")?D.mr_setTranslate3DTransform(jQuery(this).get(0),0===c()?0:c()/2):D.mr_setTranslate3DTransform(jQuery(this).get(0),(c()+t-d)/2)})};this.mr_setTranslate3DTransform=function(a,b){a.style[m]=n+b+r}}window.mr_parallax=new mr_parallax;
(function(a,b){function c(b,c,m,n){b[g](e+c,"wheel"==d?m:function(b){!b&&(b=a.event);var c={originalEvent:b,target:b.target||b.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==b.type?0:1,deltaX:0,deltaZ:0,notRealWheel:1,preventDefault:function(){b.preventDefault?b.preventDefault():b.returnValue=!1}};return"mousewheel"==d?(c.deltaY=-.025*b.wheelDelta,b.wheelDeltaX&&(c.deltaX=-.025*b.wheelDeltaX)):c.deltaY=b.detail/3,m(c)},n||!1)}var g,e="";a.addEventListener?g="addEventListener":(g="attachEvent",
e="on");var d="onwheel"in b.createElement("div")?"wheel":"undefined"!=typeof b.onmousewheel?"mousewheel":"DOMMouseScroll";a.addWheelListener=function(a,b,e){c(a,d,b,e);"DOMMouseScroll"==d&&c(a,"MozMousePixelScroll",b,e)}})(window,document);$(".cover").ready(function(){$.getJSON("projects.json",function(a){var b=[];$.each(a,function(a,g){b.push('<div class="col-md-4 col-sm-6 masonry-item project" data-filter="'+g.type+'">\n\t                        <div class="image-tile inner-title hover-reveal text-center">\n\t                            <a href="project.html?name='+g.name+'" target="_blank">\n\t                                <img class="project-image" alt="project image" src="img/'+g.image+'" />\n\t                                <div class="title">\n\t                                    <h5 class="uppercase mb0">'+
g.name+"</h5>\n\t                                    <span>"+g.shortDescription+"</span>\n\t                                </div>\n\t                            </a>\n\t                        </div>\n\t                    </div>")});$("#projects").append(b.join(""))})});function Resampler(a,b,c,g,e){this.fromSampleRate=a;this.toSampleRate=b;this.channels=c|0;this.outputBufferSize=g;this.noReturn=!!e;this.initialize()}
Resampler.prototype.initialize=function(){if(0<this.fromSampleRate&&0<this.toSampleRate&&0<this.channels)this.fromSampleRate==this.toSampleRate?(this.resampler=this.bypassResampler,this.ratioWeight=1):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers());else throw Error("Invalid settings specified for the resampler.");
};
Resampler.prototype.compileLinearInterpolationFunction=function(){for(var a="var bufferLength = buffer.length;\tvar outLength = this.outputBufferSize;\tif ((bufferLength % "+this.channels+") == 0) {\t\tif (bufferLength > 0) {\t\t\tvar weight = this.lastWeight;\t\t\tvar firstWeight = 0;\t\t\tvar secondWeight = 0;\t\t\tvar sourceOffset = 0;\t\t\tvar outputOffset = 0;\t\t\tvar outputBuffer = this.outputBuffer;\t\t\tfor (; weight < 1; weight += "+this.ratioWeight+") {\t\t\t\tsecondWeight = weight % 1;\t\t\t\tfirstWeight = 1 - secondWeight;",b=
0;b<this.channels;++b)a+="outputBuffer[outputOffset++] = (this.lastOutput["+b+"] * firstWeight) + (buffer["+b+"] * secondWeight);";a+="}\t\t\tweight -= 1;\t\t\tfor (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; outputOffset < outLength && sourceOffset < bufferLength;) {\t\t\t\tsecondWeight = weight % 1;\t\t\t\tfirstWeight = 1 - secondWeight;";for(b=0;b<this.channels;++b)a+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(0<b?" + "+b:"")+"] * firstWeight) + (buffer[sourceOffset + "+
(this.channels+b)+"] * secondWeight);";a+="weight += "+this.ratioWeight+";\t\t\t\tsourceOffset = Math.floor(weight) * "+this.channels+";\t\t\t}";for(b=0;b<this.channels;++b)a+="this.lastOutput["+b+"] = buffer[sourceOffset++];";this.resampler=Function("buffer",a+'this.lastWeight = weight % 1;\t\t\treturn this.bufferSlice(outputOffset);\t\t}\t\telse {\t\t\treturn (this.noReturn) ? 0 : [];\t\t}\t}\telse {\t\tthrow(new Error("Buffer was of incorrect sample length."));\t}')};
Resampler.prototype.compileMultiTapFunction=function(){for(var a="var bufferLength = buffer.length;\tvar outLength = this.outputBufferSize;\tif ((bufferLength % "+this.channels+") == 0) {\t\tif (bufferLength > 0) {\t\t\tvar weight = 0;",b=0;b<this.channels;++b)a+="var output"+b+" = 0;";a+="var actualPosition = 0;\t\t\tvar amountToNext = 0;\t\t\tvar alreadyProcessedTail = !this.tailExists;\t\t\tthis.tailExists = false;\t\t\tvar outputBuffer = this.outputBuffer;\t\t\tvar outputOffset = 0;\t\t\tvar currentPosition = 0;\t\t\tdo {\t\t\t\tif (alreadyProcessedTail) {\t\t\t\t\tweight = "+
this.ratioWeight+";";for(b=0;b<this.channels;++b)a+="output"+b+" = 0;";a+="}\t\t\t\telse {\t\t\t\t\tweight = this.lastWeight;";for(b=0;b<this.channels;++b)a+="output"+b+" = this.lastOutput["+b+"];";a+="alreadyProcessedTail = true;\t\t\t\t}\t\t\t\twhile (weight > 0 && actualPosition < bufferLength) {\t\t\t\t\tamountToNext = 1 + actualPosition - currentPosition;\t\t\t\t\tif (weight >= amountToNext) {";for(b=0;b<this.channels;++b)a+="output"+b+" += buffer[actualPosition++] * amountToNext;";a+="currentPosition = actualPosition;\t\t\t\t\t\tweight -= amountToNext;\t\t\t\t\t}\t\t\t\t\telse {";
for(b=0;b<this.channels;++b)a+="output"+b+" += buffer[actualPosition"+(0<b?" + "+b:"")+"] * weight;";a+="currentPosition += weight;\t\t\t\t\t\tweight = 0;\t\t\t\t\t\tbreak;\t\t\t\t\t}\t\t\t\t}\t\t\t\tif (weight <= 0) {";for(b=0;b<this.channels;++b)a+="outputBuffer[outputOffset++] = output"+b+" / "+this.ratioWeight+";";a+="}\t\t\t\telse {\t\t\t\t\tthis.lastWeight = weight;";for(b=0;b<this.channels;++b)a+="this.lastOutput["+b+"] = output"+b+";";this.resampler=Function("buffer",a+'this.tailExists = true;\t\t\t\t\tbreak;\t\t\t\t}\t\t\t} while (actualPosition < bufferLength && outputOffset < outLength);\t\t\treturn this.bufferSlice(outputOffset);\t\t}\t\telse {\t\t\treturn (this.noReturn) ? 0 : [];\t\t}\t}\telse {\t\tthrow(new Error("Buffer was of incorrect sample length."));\t}')};
Resampler.prototype.bypassResampler=function(a){return this.noReturn?(this.outputBuffer=a,a.length):a};Resampler.prototype.bufferSlice=function(a){if(this.noReturn)return a;try{return this.outputBuffer.subarray(0,a)}catch(b){try{return this.outputBuffer.length=a,this.outputBuffer}catch(c){return this.outputBuffer.slice(0,a)}}};
Resampler.prototype.initializeBuffers=function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(a){this.outputBuffer=[],this.lastOutput=[]}};var swfobject=function(){function a(){if(!U){try{var a=q.getElementsByTagName("body")[0].appendChild(q.createElement("span"));a.parentNode.removeChild(a)}catch(Y){return}U=!0;a=z.length;for(var b=0;b<a;b++)z[b]()}}function b(a){U?a():z[z.length]=a}function c(a){if("undefined"!=typeof O.addEventListener)O.addEventListener("load",a,!1);else if("undefined"!=typeof q.addEventListener)q.addEventListener("load",a,!1);else if("undefined"!=typeof O.attachEvent)y(O,"onload",a);else if("function"==typeof O.onload){var b=
O.onload;O.onload=function(){b();a()}}else O.onload=a}function g(){var a=q.getElementsByTagName("body")[0],b=q.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;(function(){if("undefined"!=typeof c.GetVariable){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),E.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}
function e(){var a=F.length;if(0<a)for(var b=0;b<a;b++){var c=F[b].id,e=F[b].callbackFn,g={success:!1,id:c};if(0<E.pv[0]){var n=v(c);if(n)if(!P(F[b].swfVersion)||E.wk&&312>E.wk)if(F[b].expressInstall&&f()){g={};g.data=F[b].expressInstall;g.width=n.getAttribute("width")||"0";g.height=n.getAttribute("height")||"0";n.getAttribute("class")&&(g.styleclass=n.getAttribute("class"));n.getAttribute("align")&&(g.align=n.getAttribute("align"));var q={};n=n.getElementsByTagName("param");for(var r=n.length,t=
0;t<r;t++)"movie"!=n[t].getAttribute("name").toLowerCase()&&(q[n[t].getAttribute("name")]=n[t].getAttribute("value"));l(g,q,c,e)}else m(n),e&&e(g);else J(c,!0),e&&(g.success=!0,g.ref=d(c),e(g))}else J(c,!0),e&&((c=d(c))&&"undefined"!=typeof c.SetVariable&&(g.success=!0,g.ref=c),e(g))}}function d(a){var b=null;(a=v(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function f(){return!T&&P("6.0.65")&&(E.win||E.mac)&&!(E.wk&&312>
E.wk)}function l(a,b,c,d){T=!0;X=d||null;G={success:!1,id:c};var e=v(c);if(e){"OBJECT"==e.nodeName?(ha=n(e),S=null):(ha=e,S=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";q.title=q.title.slice(0,47)+" - Flash Player Installation";d=E.ie&&E.win?"ActiveX":"PlugIn";d="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+
d+"&MMdoctitle="+q.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;E.ie&&E.win&&4!=e.readyState&&(d=q.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());r(a,b,c)}}function m(a){if(E.ie&&E.win&&4!=a.readyState){var b=q.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(n(a),b);a.style.display="none";
(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(n(a),a)}function n(a){var b=q.createElement("div");if(E.win&&E.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function r(a,b,c){var d=v(c);if(E.wk&&312>E.wk)return l;if(d)if("undefined"==typeof a.id&&
(a.id=c),E.ie&&E.win){var e="";for(f in a)a[f]!=Object.prototype[f]&&("data"==f.toLowerCase()?b.movie=a[f]:"styleclass"==f.toLowerCase()?e+=' class="'+a[f]+'"':"classid"!=f.toLowerCase()&&(e+=" "+f+'="'+a[f]+'"'));var f="";for(var g in b)b[g]!=Object.prototype[g]&&(f+='<param name="'+g+'" value="'+b[g]+'" />');d.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+e+">"+f+"</object>";D[D.length]=a.id;var l=v(a.id)}else{g=q.createElement("object");g.setAttribute("type","application/x-shockwave-flash");
for(var m in a)a[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?g.setAttribute("class",a[m]):"classid"!=m.toLowerCase()&&g.setAttribute(m,a[m]));for(e in b)b[e]!=Object.prototype[e]&&"movie"!=e.toLowerCase()&&(a=g,f=e,m=b[e],c=q.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",m),a.appendChild(c));d.parentNode.replaceChild(g,d);l=g}return l}function t(a){var b=v(a);b&&"OBJECT"==b.nodeName&&(E.ie&&E.win?(b.style.display="none",function(){if(4==b.readyState){var c=v(a);
if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function v(a){var b=null;try{b=q.getElementById(a)}catch(Y){}return b}function y(a,b,c){a.attachEvent(b,c);C[C.length]=[a,b,c]}function P(a){var b=E.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function x(a,b,c,d){if(!E.ie||
!E.mac){var e=q.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(L=K=null),K&&L==c||(d=q.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),K=e.appendChild(d),E.ie&&E.win&&"undefined"!=typeof q.styleSheets&&0<q.styleSheets.length&&(K=q.styleSheets[q.styleSheets.length-1]),L=c),E.ie&&E.win?K&&"object"==typeof K.addRule&&K.addRule(a,b):K&&"undefined"!=typeof q.createTextNode&&K.appendChild(q.createTextNode(a+" {"+b+"}")))}}function J(a,b){aa&&
(b=b?"visible":"hidden",U&&v(a)?v(a).style.visibility=b:x("#"+a,"visibility:"+b))}function da(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var O=window,q=document,R=navigator,A=!1,z=[function(){A?g():e()}],F=[],D=[],C=[],ha,S,X,G,U=!1,T=!1,K,L,aa=!0,E=function(){var a="undefined"!=typeof q.getElementById&&"undefined"!=typeof q.getElementsByTagName&&"undefined"!=typeof q.createElement,b=R.userAgent.toLowerCase(),c=R.platform.toLowerCase(),d=
c?/win/.test(c):/win/.test(b);c=c?/mac/.test(c):/mac/.test(b);b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var e=!+"\v1",f=[0,0,0],g=null;if("undefined"!=typeof R.plugins&&"object"==typeof R.plugins["Shockwave Flash"])!(g=R.plugins["Shockwave Flash"].description)||"undefined"!=typeof R.mimeTypes&&R.mimeTypes["application/x-shockwave-flash"]&&!R.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(A=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,
"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof O.ActiveXObject)try{if(g=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(ka){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){E.w3&&(("undefined"!=typeof q.readyState&&"complete"==q.readyState||"undefined"==
typeof q.readyState&&(q.getElementsByTagName("body")[0]||q.body))&&a(),U||("undefined"!=typeof q.addEventListener&&q.addEventListener("DOMContentLoaded",a,!1),E.ie&&E.win&&(q.attachEvent("onreadystatechange",function(){"complete"==q.readyState&&(q.detachEvent("onreadystatechange",arguments.callee),a())}),O==top&&function(){if(!U){try{q.documentElement.doScroll("left")}catch(Z){setTimeout(arguments.callee,0);return}a()}}()),E.wk&&function(){U||(/loaded|complete/.test(q.readyState)?a():setTimeout(arguments.callee,
0))}(),c(a)))})();(function(){E.ie&&E.win&&window.attachEvent("onunload",function(){for(var a=C.length,b=0;b<a;b++)C[b][0].detachEvent(C[b][1],C[b][2]);a=D.length;for(b=0;b<a;b++)t(D[b]);for(var c in E)E[c]=null;E=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(E.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;F[F.length]=e;J(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(E.w3)return d(a)},embedSWF:function(a,
c,d,e,g,m,n,q,t,v){var x={success:!1,id:c};E.w3&&!(E.wk&&312>E.wk)&&a&&c&&d&&e&&g?(J(c,!1),b(function(){d+="";e+="";var b={};if(t&&"object"===typeof t)for(var y in t)b[y]=t[y];b.data=a;b.width=d;b.height=e;y={};if(q&&"object"===typeof q)for(var z in q)y[z]=q[z];if(n&&"object"===typeof n)for(var A in n)y.flashvars="undefined"!=typeof y.flashvars?y.flashvars+("&"+A+"="+n[A]):A+"="+n[A];if(P(g))z=r(b,y,c),b.id==c&&J(c,!0),x.success=!0,x.ref=z;else{if(m&&f()){b.data=m;l(b,y,c,v);return}J(c,!0)}v&&v(x)})):
v&&v(x)},switchOffAutoHideShow:function(){aa=!1},ua:E,getFlashPlayerVersion:function(){return{major:E.pv[0],minor:E.pv[1],release:E.pv[2]}},hasFlashPlayerVersion:P,createSWF:function(a,b,c){if(E.w3)return r(a,b,c)},showExpressInstall:function(a,b,c,d){E.w3&&f()&&l(a,b,c,d)},removeSWF:function(a){E.w3&&t(a)},createCSS:function(a,b,c,d){E.w3&&x(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=q.location.search||q.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==
a)return da(b);b=b.split("&");for(var c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return da(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(T){var a=v("SWFObjectExprInst");a&&ha&&(a.parentNode.replaceChild(ha,a),S&&(J(S,!0),E.ie&&E.win&&(ha.style.display="block")),X&&X(G));T=!1}}}}();var XAudioJSscriptsHandle=document.getElementsByTagName("script"),XAudioJSsourceHandle=XAudioJSscriptsHandle[XAudioJSscriptsHandle.length-1].src;
function XAudioServer(a,b,c,g,e,d,f){XAudioJSChannelsAllocated=Math.max(a,1);this.XAudioJSSampleRate=Math.abs(b);XAudioJSMinBufferSize=c>=XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated&&c<g?c&-XAudioJSChannelsAllocated:XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated;XAudioJSMaxBufferSize=Math.floor(g)>XAudioJSMinBufferSize+XAudioJSChannelsAllocated?g&-XAudioJSChannelsAllocated:XAudioJSMinBufferSize*XAudioJSChannelsAllocated;this.underRunCallback="function"==typeof e?e:function(){};XAudioJSVolume=
0<=d&&1>=d?d:1;this.failureCallback="function"==typeof f?f:function(){throw Error("XAudioJS has encountered a fatal error.");};this.initializeAudio()}
XAudioServer.prototype.MOZWriteAudioNoCallback=function(a){for(var b=a.length,c=0;c<b;){for(var g=Math.min(b-c,XAudioJSMaxBufferSize),e=0;e<g;++e)XAudioJSAudioContextSampleBuffer[e]=a[c++];g=XAudioJSResampleControl.resampler(XAudioJSGetArraySlice(XAudioJSAudioContextSampleBuffer,e));0<g&&(g=XAudioJSGetArraySlice(XAudioJSResampleControl.outputBuffer,g),this.samplesAlreadyWritten+=this.audioHandleMoz.mozWriteAudio(g))}};
XAudioServer.prototype.callbackBasedWriteAudioNoCallback=function(a){for(var b=a.length,c=0;c<b&&XAudioJSAudioBufferSize<XAudioJSMaxBufferSize;)XAudioJSAudioContextSampleBuffer[XAudioJSAudioBufferSize++]=a[c++]};XAudioServer.prototype.writeAudio=function(a){switch(this.audioType){case 0:this.MOZWriteAudioNoCallback(a);this.MOZExecuteCallback();break;case 2:this.checkFlashInit();case 1:case 3:this.callbackBasedWriteAudioNoCallback(a);this.callbackBasedExecuteCallback();break;default:this.failureCallback()}};
XAudioServer.prototype.writeAudioNoCallback=function(a){switch(this.audioType){case 0:this.MOZWriteAudioNoCallback(a);break;case 2:this.checkFlashInit();case 1:case 3:this.callbackBasedWriteAudioNoCallback(a);break;default:this.failureCallback()}};
XAudioServer.prototype.remainingBuffer=function(){switch(this.audioType){case 0:return Math.floor((this.samplesAlreadyWritten-this.audioHandleMoz.mozCurrentSampleOffset())*XAudioJSResampleControl.ratioWeight/XAudioJSChannelsAllocated)*XAudioJSChannelsAllocated;case 2:this.checkFlashInit();case 1:case 3:return Math.floor(XAudioJSResampledSamplesLeft()*XAudioJSResampleControl.ratioWeight/XAudioJSChannelsAllocated)*XAudioJSChannelsAllocated+XAudioJSAudioBufferSize;default:return this.failureCallback(),
null}};XAudioServer.prototype.MOZExecuteCallback=function(){var a=XAudioJSMinBufferSize-this.remainingBuffer();0<a&&this.MOZWriteAudioNoCallback(this.underRunCallback(a))};XAudioServer.prototype.callbackBasedExecuteCallback=function(){var a=XAudioJSMinBufferSize-this.remainingBuffer();0<a&&this.callbackBasedWriteAudioNoCallback(this.underRunCallback(a))};
XAudioServer.prototype.executeCallback=function(){switch(this.audioType){case 0:this.MOZExecuteCallback();break;case 2:this.checkFlashInit();case 1:case 3:this.callbackBasedExecuteCallback();break;default:this.failureCallback()}};XAudioServer.prototype.initializeAudio=function(){try{this.initializeMozAudio()}catch(a){try{this.initializeWebAudio()}catch(b){try{this.initializeMediaStream()}catch(c){try{this.initializeFlashAudio()}catch(g){this.audioType=-1,this.failureCallback()}}}}};
XAudioServer.prototype.initializeMediaStream=function(){this.audioHandleMediaStream=new Audio;this.resetCallbackAPIAudioBuffer(XAudioJSMediaStreamSampleRate);XAudioJSMediaStreamWorker&&XAudioJSMediaStreamWorker.terminate();XAudioJSMediaStreamWorker=new Worker(XAudioJSsourceHandle.substring(0,XAudioJSsourceHandle.length-3)+"MediaStreamWorker.js");this.audioHandleMediaStreamProcessing=new ProcessedMediaStream(XAudioJSMediaStreamWorker,XAudioJSMediaStreamSampleRate,XAudioJSChannelsAllocated);this.audioHandleMediaStream.src=
this.audioHandleMediaStreamProcessing;this.audioHandleMediaStream.volume=XAudioJSVolume;XAudioJSMediaStreamWorker.onmessage=XAudioJSMediaStreamPushAudio;XAudioJSMediaStreamWorker.postMessage([1,XAudioJSResampleBufferSize,XAudioJSChannelsAllocated]);this.audioHandleMediaStream.play();this.audioType=3};
XAudioServer.prototype.initializeMozAudio=function(){this.audioHandleMoz=new Audio;this.audioHandleMoz.mozSetup(XAudioJSChannelsAllocated,XAudioJSMozAudioSampleRate);this.audioHandleMoz.volume=XAudioJSVolume;this.audioType=this.samplesAlreadyWritten=0;var a=this.XAudioJSSampleRate*XAudioJSChannelsAllocated/10|0;a-=a%XAudioJSChannelsAllocated;this.samplesAlreadyWritten-=a;this.initializeResampler(XAudioJSMozAudioSampleRate)};
XAudioServer.prototype.initializeWebAudio=function(){if(!XAudioJSWebAudioLaunchedContext){try{XAudioJSWebAudioContextHandle=new AudioContext}catch(b){XAudioJSWebAudioContextHandle=new webkitAudioContext}XAudioJSWebAudioLaunchedContext=!0}XAudioJSWebAudioAudioNode&&(XAudioJSWebAudioAudioNode.disconnect(),XAudioJSWebAudioAudioNode=XAudioJSWebAudioAudioNode.onaudioprocess=null);try{XAudioJSWebAudioAudioNode=XAudioJSWebAudioContextHandle.createScriptProcessor(XAudioJSSamplesPerCallback,0,XAudioJSChannelsAllocated)}catch(b){XAudioJSWebAudioAudioNode=
XAudioJSWebAudioContextHandle.createJavaScriptNode(XAudioJSSamplesPerCallback,0,XAudioJSChannelsAllocated)}XAudioJSWebAudioAudioNode.onaudioprocess=XAudioJSWebAudioEvent;XAudioJSWebAudioAudioNode.connect(XAudioJSWebAudioContextHandle.destination);this.resetCallbackAPIAudioBuffer(XAudioJSWebAudioContextHandle.sampleRate);this.audioType=1;XAudioJSWebAudioWatchDogLast=(new Date).getTime();if(-1<navigator.userAgent.indexOf("Gecko/")){XAudioJSWebAudioWatchDogTimer&&clearInterval(XAudioJSWebAudioWatchDogTimer);
var a=this;XAudioJSWebAudioWatchDogTimer=setInterval(function(){500<(new Date).getTime()-XAudioJSWebAudioWatchDogLast&&a.initializeWebAudio()},500)}};
XAudioServer.prototype.initializeFlashAudio=function(){var a=document.getElementById("XAudioJS");this.flashInitialized=!1;this.resetCallbackAPIAudioBuffer(44100);switch(XAudioJSChannelsAllocated){case 1:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashMonoString;break;case 2:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashStereoString;break;default:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashSurroundString}if(null==a){this.audioHandleFlash=null;var b=this;a=document.createElement("div");
a.setAttribute("style","position: fixed; bottom: 0px; right: 0px; margin: 0px; padding: 0px; border: none; width: 8px; height: 8px; overflow: hidden; z-index: -1000; ");var c=document.createElement("div");c.setAttribute("style","position: static; border: none; width: 0px; height: 0px; visibility: hidden; margin: 8px; padding: 0px;");c.setAttribute("id","XAudioJS");a.appendChild(c);document.getElementsByTagName("body")[0].appendChild(a);swfobject.embedSWF(XAudioJSsourceHandle.substring(0,XAudioJSsourceHandle.length-
9)+"JS.swf","XAudioJS","8","8","9.0.0","",{},{allowscriptaccess:"always"},{style:"position: static; visibility: hidden; margin: 8px; padding: 0px; border: none"},function(a){a.success?(b.audioHandleFlash=a.ref,b.checkFlashInit()):(b.failureCallback(),b.audioType=-1)})}else this.audioHandleFlash=a,this.checkFlashInit();this.audioType=2};
XAudioServer.prototype.changeVolume=function(a){if(0<=a&&1>=a)switch(XAudioJSVolume=a,this.audioType){case 0:this.audioHandleMoz.volume=XAudioJSVolume;case 1:break;case 2:this.flashInitialized?this.audioHandleFlash.changeVolume(XAudioJSVolume):this.checkFlashInit();break;case 3:this.audioHandleMediaStream.volume=XAudioJSVolume;break;default:this.failureCallback()}};
XAudioServer.prototype.checkFlashInit=function(){if(!this.flashInitialized)try{this.audioHandleFlash&&this.audioHandleFlash.initialize&&(this.flashInitialized=!0,this.audioHandleFlash.initialize(XAudioJSChannelsAllocated,XAudioJSVolume))}catch(a){this.flashInitialized=!1}};XAudioServer.prototype.resetCallbackAPIAudioBuffer=function(a){XAudioJSAudioBufferSize=XAudioJSResampleBufferEnd=XAudioJSResampleBufferStart=0;this.initializeResampler(a);XAudioJSResampledBuffer=this.getFloat32(XAudioJSResampleBufferSize)};
XAudioServer.prototype.initializeResampler=function(a){XAudioJSAudioContextSampleBuffer=this.getFloat32(XAudioJSMaxBufferSize);XAudioJSResampleBufferSize=Math.max(XAudioJSMaxBufferSize*Math.ceil(a/this.XAudioJSSampleRate)+XAudioJSChannelsAllocated,XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated);XAudioJSResampleControl=new Resampler(this.XAudioJSSampleRate,a,XAudioJSChannelsAllocated,XAudioJSResampleBufferSize,!0)};XAudioServer.prototype.getFloat32=function(a){try{return new Float32Array(a)}catch(b){return[]}};
function XAudioJSFlashAudioEvent(){XAudioJSResampleRefill();return XAudioJSFlashTransportEncoder()}
function XAudioJSGenerateFlashSurroundString(){var a=XAudioJSSamplesPerCallback<<1;XAudioJSBinaryString.length>a&&(XAudioJSBinaryString=[]);for(var b=a=0;b<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;++b)XAudioJSBinaryString[a++]=String.fromCharCode((16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)+12288),XAudioJSBinaryString[a++]=String.fromCharCode((16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+
1,0),2)|0)+12288),XAudioJSResampleBufferStart+=XAudioJSChannelsAllocated-2,XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}
function XAudioJSGenerateFlashStereoString(){var a=XAudioJSSamplesPerCallback<<1;XAudioJSBinaryString.length>a&&(XAudioJSBinaryString=[]);for(var b=0;b<a&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;)XAudioJSBinaryString[b++]=String.fromCharCode((16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)+12288),XAudioJSBinaryString[b++]=String.fromCharCode((16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)+12288),XAudioJSResampleBufferStart==
XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}
function XAudioJSGenerateFlashMonoString(){XAudioJSBinaryString.length>XAudioJSSamplesPerCallback&&(XAudioJSBinaryString=[]);for(var a=0;a<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;)XAudioJSBinaryString[a++]=String.fromCharCode((16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)+12288),XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}
var XAudioJSWebAudioContextHandle=null,XAudioJSWebAudioAudioNode=null,XAudioJSWebAudioWatchDogTimer=null,XAudioJSWebAudioWatchDogLast=!1,XAudioJSWebAudioLaunchedContext=!1,XAudioJSAudioContextSampleBuffer=[],XAudioJSResampledBuffer=[],XAudioJSMinBufferSize=15E3,XAudioJSMaxBufferSize=25E3,XAudioJSChannelsAllocated=1,XAudioJSVolume=1,XAudioJSResampleControl=null,XAudioJSAudioBufferSize=0,XAudioJSResampleBufferStart=0,XAudioJSResampleBufferEnd=0,XAudioJSResampleBufferSize=0,XAudioJSMediaStreamWorker=
null,XAudioJSMediaStreamBuffer=[],XAudioJSMediaStreamSampleRate=44100,XAudioJSMozAudioSampleRate=44100,XAudioJSSamplesPerCallback=2048,XAudioJSFlashTransportEncoder=null,XAudioJSMediaStreamLengthAliasCounter=0,XAudioJSBinaryString=[];
function XAudioJSWebAudioEvent(a){XAudioJSWebAudioWatchDogTimer&&(XAudioJSWebAudioWatchDogLast=(new Date).getTime());for(var b=0,c=[];b<XAudioJSChannelsAllocated;++b)c[b]=a.outputBuffer.getChannelData(b);XAudioJSResampleRefill();for(a=0;a<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;++a){for(b=0;b<XAudioJSChannelsAllocated;++b)c[b][a]=XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]*XAudioJSVolume;XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&
(XAudioJSResampleBufferStart=0)}for(;a<XAudioJSSamplesPerCallback;){for(b=0;b<XAudioJSChannelsAllocated;++b)c[b][a]=0;++a}}
function XAudioJSMediaStreamPushAudio(a){var b=0;a=a.data;var c=XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated,g=a%XAudioJSSamplesPerCallback;a=a-(XAudioJSMediaStreamLengthAliasCounter-XAudioJSMediaStreamLengthAliasCounter%XAudioJSSamplesPerCallback)-g+XAudioJSSamplesPerCallback;XAudioJSMediaStreamLengthAliasCounter-=XAudioJSMediaStreamLengthAliasCounter-XAudioJSMediaStreamLengthAliasCounter%XAudioJSSamplesPerCallback;XAudioJSMediaStreamLengthAliasCounter+=XAudioJSSamplesPerCallback-g;XAudioJSMediaStreamBuffer.length!=
c&&(XAudioJSMediaStreamBuffer=new Float32Array(c));for(XAudioJSResampleRefill();b<a;){for(g=0;g<c&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;)XAudioJSMediaStreamBuffer[g++]=XAudioJSResampledBuffer[XAudioJSResampleBufferStart++],XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);XAudioJSMediaStreamWorker.postMessage([0,XAudioJSMediaStreamBuffer]);b+=XAudioJSSamplesPerCallback}}
function XAudioJSResampleRefill(){if(0<XAudioJSAudioBufferSize){for(var a=XAudioJSResampleControl.resampler(XAudioJSGetBufferSamples()),b=XAudioJSResampleControl.outputBuffer,c=0;c<a;)XAudioJSResampledBuffer[XAudioJSResampleBufferEnd++]=b[c++],XAudioJSResampleBufferEnd==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferEnd=0),XAudioJSResampleBufferStart==XAudioJSResampleBufferEnd&&(XAudioJSResampleBufferStart+=XAudioJSChannelsAllocated,XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=
0));XAudioJSAudioBufferSize=0}}function XAudioJSResampledSamplesLeft(){return(XAudioJSResampleBufferStart<=XAudioJSResampleBufferEnd?0:XAudioJSResampleBufferSize)+XAudioJSResampleBufferEnd-XAudioJSResampleBufferStart}function XAudioJSGetBufferSamples(){return XAudioJSGetArraySlice(XAudioJSAudioContextSampleBuffer,XAudioJSAudioBufferSize)}function XAudioJSGetArraySlice(a,b){try{return a.subarray(0,b)}catch(c){try{return a.length=b,a}catch(g){return a.slice(0,b)}}};XAudioJSResampledBuffer=[];var XAudioJSOutputBuffer=[];XAudioJSResampleBufferSize=XAudioJSResampleBufferEnd=XAudioJSResampleBufferStart=0;XAudioJSChannelsAllocated=1;
self.onmessage=function(a){a=a.data;switch(a[0]){case 0:a=a[1];for(var b=a.length,c=0;c<b;++c)XAudioJSResampledBuffer[XAudioJSResampleBufferEnd++]=a[c],XAudioJSResampleBufferEnd==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferEnd=0),XAudioJSResampleBufferStart==XAudioJSResampleBufferEnd&&(XAudioJSResampleBufferStart+=XAudioJSChannelsAllocated,XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0));break;case 1:XAudioJSResampleBufferSize=a[1],XAudioJSChannelsAllocated=
a[2],XAudioJSResampledBuffer=new Float32Array(XAudioJSResampleBufferSize)}};
self.onprocessmedia=function(a){var b=a.audioLength,c=b*a.audioChannels;c>XAudioJSOutputBuffer.length&&(XAudioJSOutputBuffer=new Float32Array(c));for(var g=Math.min(b,XAudioJSResampledSamplesLeft()/XAudioJSChannelsAllocated),e=0,d;e<g;++e)for(d=e;d<c;d+=b)XAudioJSOutputBuffer[d]=XAudioJSResampledBuffer[XAudioJSResampleBufferStart++],XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);for(;e<b;)for(d=e++;d<c;d+=b)XAudioJSOutputBuffer[d]=0;a.writeAudio(XAudioJSOutputBuffer.subarray(0,
c));self.postMessage(a.audioLength)};function XAudioJSResampledSamplesLeft(){return(XAudioJSResampleBufferStart<=XAudioJSResampleBufferEnd?0:XAudioJSResampleBufferSize)+XAudioJSResampleBufferEnd-XAudioJSResampleBufferStart};
}).call(this)
